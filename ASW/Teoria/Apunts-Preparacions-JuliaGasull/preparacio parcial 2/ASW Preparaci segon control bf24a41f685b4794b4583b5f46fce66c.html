<html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><title>[ASW] Preparaci√≥ segon control</title><style>
/* webkit printing magic: print all background colors */
html {
	-webkit-print-color-adjust: exact;
}
* {
	box-sizing: border-box;
	-webkit-print-color-adjust: exact;
}

html,
body {
	margin: 0;
	padding: 0;
}
@media only screen {
	body {
		margin: 2em auto;
		max-width: 900px;
		color: rgb(55, 53, 47);
	}
}

body {
	line-height: 1.5;
	white-space: pre-wrap;
}

a,
a.visited {
	color: inherit;
	text-decoration: underline;
}

.pdf-relative-link-path {
	font-size: 80%;
	color: #444;
}

h1,
h2,
h3 {
	letter-spacing: -0.01em;
	line-height: 1.2;
	font-weight: 600;
	margin-bottom: 0;
}

.page-title {
	font-size: 2.5rem;
	font-weight: 700;
	margin-top: 0;
	margin-bottom: 0.75em;
}

h1 {
	font-size: 1.875rem;
	margin-top: 1.875rem;
}

h2 {
	font-size: 1.5rem;
	margin-top: 1.5rem;
}

h3 {
	font-size: 1.25rem;
	margin-top: 1.25rem;
}

.source {
	border: 1px solid #ddd;
	border-radius: 3px;
	padding: 1.5em;
	word-break: break-all;
}

.callout {
	border-radius: 3px;
	padding: 1rem;
}

figure {
	margin: 1.25em 0;
	page-break-inside: avoid;
}

figcaption {
	opacity: 0.5;
	font-size: 85%;
	margin-top: 0.5em;
}

mark {
	background-color: transparent;
}

.indented {
	padding-left: 1.5em;
}

hr {
	background: transparent;
	display: block;
	width: 100%;
	height: 1px;
	visibility: visible;
	border: none;
	border-bottom: 1px solid rgba(55, 53, 47, 0.09);
}

img {
	max-width: 100%;
}

@media only print {
	img {
		max-height: 100vh;
		object-fit: contain;
	}
}

@page {
	margin: 1in;
}

.collection-content {
	font-size: 0.875rem;
}

.column-list {
	display: flex;
	justify-content: space-between;
}

.column {
	padding: 0 1em;
}

.column:first-child {
	padding-left: 0;
}

.column:last-child {
	padding-right: 0;
}

.table_of_contents-item {
	display: block;
	font-size: 0.875rem;
	line-height: 1.3;
	padding: 0.125rem;
}

.table_of_contents-indent-1 {
	margin-left: 1.5rem;
}

.table_of_contents-indent-2 {
	margin-left: 3rem;
}

.table_of_contents-indent-3 {
	margin-left: 4.5rem;
}

.table_of_contents-link {
	text-decoration: none;
	opacity: 0.7;
	border-bottom: 1px solid rgba(55, 53, 47, 0.18);
}

table,
th,
td {
	border: 1px solid rgba(55, 53, 47, 0.09);
	border-collapse: collapse;
}

table {
	border-left: none;
	border-right: none;
}

th,
td {
	font-weight: normal;
	padding: 0.25em 0.5em;
	line-height: 1.5;
	min-height: 1.5em;
	text-align: left;
}

th {
	color: rgba(55, 53, 47, 0.6);
}

ol,
ul {
	margin: 0;
	margin-block-start: 0.6em;
	margin-block-end: 0.6em;
}

li > ol:first-child,
li > ul:first-child {
	margin-block-start: 0.6em;
}

ul > li {
	list-style: disc;
}

ul.to-do-list {
	text-indent: -1.7em;
}

ul.to-do-list > li {
	list-style: none;
}

.to-do-children-checked {
	text-decoration: line-through;
	opacity: 0.375;
}

ul.toggle > li {
	list-style: none;
}

ul {
	padding-inline-start: 1.7em;
}

ul > li {
	padding-left: 0.1em;
}

ol {
	padding-inline-start: 1.6em;
}

ol > li {
	padding-left: 0.2em;
}

.mono ol {
	padding-inline-start: 2em;
}

.mono ol > li {
	text-indent: -0.4em;
}

.toggle {
	padding-inline-start: 0em;
	list-style-type: none;
}

/* Indent toggle children */
.toggle > li > details {
	padding-left: 1.7em;
}

.toggle > li > details > summary {
	margin-left: -1.1em;
}

.selected-value {
	display: inline-block;
	padding: 0 0.5em;
	background: rgba(206, 205, 202, 0.5);
	border-radius: 3px;
	margin-right: 0.5em;
	margin-top: 0.3em;
	margin-bottom: 0.3em;
	white-space: nowrap;
}

.collection-title {
	display: inline-block;
	margin-right: 1em;
}

time {
	opacity: 0.5;
}

.icon {
	display: inline-block;
	max-width: 1.2em;
	max-height: 1.2em;
	text-decoration: none;
	vertical-align: text-bottom;
	margin-right: 0.5em;
}

img.icon {
	border-radius: 3px;
}

.user-icon {
	width: 1.5em;
	height: 1.5em;
	border-radius: 100%;
	margin-right: 0.5rem;
}

.user-icon-inner {
	font-size: 0.8em;
}

.text-icon {
	border: 1px solid #000;
	text-align: center;
}

.page-cover-image {
	display: block;
	object-fit: cover;
	width: 100%;
	height: 30vh;
}

.page-header-icon {
	font-size: 3rem;
	margin-bottom: 1rem;
}

.page-header-icon-with-cover {
	margin-top: -0.72em;
	margin-left: 0.07em;
}

.page-header-icon img {
	border-radius: 3px;
}

.link-to-page {
	margin: 1em 0;
	padding: 0;
	border: none;
	font-weight: 500;
}

p > .user {
	opacity: 0.5;
}

td > .user,
td > time {
	white-space: nowrap;
}

input[type="checkbox"] {
	transform: scale(1.5);
	margin-right: 0.6em;
	vertical-align: middle;
}

p {
	margin-top: 0.5em;
	margin-bottom: 0.5em;
}

.image {
	border: none;
	margin: 1.5em 0;
	padding: 0;
	border-radius: 0;
	text-align: center;
}

.code,
code {
	background: rgba(135, 131, 120, 0.15);
	border-radius: 3px;
	padding: 0.2em 0.4em;
	border-radius: 3px;
	font-size: 85%;
	tab-size: 2;
}

code {
	color: #eb5757;
}

.code {
	padding: 1.5em 1em;
}

.code > code {
	background: none;
	padding: 0;
	font-size: 100%;
	color: inherit;
}

blockquote {
	font-size: 1.25em;
	margin: 1em 0;
	padding-left: 1em;
	border-left: 3px solid rgb(55, 53, 47);
}

.bookmark {
	text-decoration: none;
	max-height: 8em;
	padding: 0;
	display: flex;
	width: 100%;
	align-items: stretch;
}

.bookmark-title {
	font-size: 0.85em;
	overflow: hidden;
	text-overflow: ellipsis;
	height: 1.75em;
	white-space: nowrap;
}

.bookmark-text {
	display: flex;
	flex-direction: column;
}

.bookmark-info {
	flex: 4 1 180px;
	padding: 12px 14px 14px;
	display: flex;
	flex-direction: column;
	justify-content: space-between;
}

.bookmark-image {
	width: 33%;
	flex: 1 1 180px;
	display: block;
	position: relative;
	object-fit: cover;
	border-radius: 1px;
}

.bookmark-description {
	color: rgba(55, 53, 47, 0.6);
	font-size: 0.75em;
	overflow: hidden;
	max-height: 4.5em;
	word-break: break-word;
}

.bookmark-href {
	font-size: 0.75em;
	margin-top: 0.25em;
}

.sans { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol"; }
.code { font-family: "SFMono-Regular", Consolas, "Liberation Mono", Menlo, Courier, monospace; }
.serif { font-family: Lyon-Text, Georgia, YuMincho, "Yu Mincho", "Hiragino Mincho ProN", "Hiragino Mincho Pro", "Songti TC", "Songti SC", "SimSun", "Nanum Myeongjo", NanumMyeongjo, Batang, serif; }
.mono { font-family: iawriter-mono, Nitti, Menlo, Courier, monospace; }
.pdf .sans { font-family: Inter, -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol", 'Twemoji', 'Noto Color Emoji', 'Noto Sans CJK SC', 'Noto Sans CJK KR'; }

.pdf .code { font-family: Source Code Pro, "SFMono-Regular", Consolas, "Liberation Mono", Menlo, Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK SC', 'Noto Sans Mono CJK KR'; }

.pdf .serif { font-family: PT Serif, Lyon-Text, Georgia, YuMincho, "Yu Mincho", "Hiragino Mincho ProN", "Hiragino Mincho Pro", "Songti TC", "Songti SC", "SimSun", "Nanum Myeongjo", NanumMyeongjo, Batang, serif, 'Twemoji', 'Noto Color Emoji', 'Noto Sans CJK SC', 'Noto Sans CJK KR'; }

.pdf .mono { font-family: PT Mono, iawriter-mono, Nitti, Menlo, Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK SC', 'Noto Sans Mono CJK KR'; }

.highlight-default {
}
.highlight-gray {
	color: rgb(155,154,151);
}
.highlight-brown {
	color: rgb(100,71,58);
}
.highlight-orange {
	color: rgb(217,115,13);
}
.highlight-yellow {
	color: rgb(223,171,1);
}
.highlight-teal {
	color: rgb(15,123,108);
}
.highlight-blue {
	color: rgb(11,110,153);
}
.highlight-purple {
	color: rgb(105,64,165);
}
.highlight-pink {
	color: rgb(173,26,114);
}
.highlight-red {
	color: rgb(224,62,62);
}
.highlight-gray_background {
	background: rgb(235,236,237);
}
.highlight-brown_background {
	background: rgb(233,229,227);
}
.highlight-orange_background {
	background: rgb(250,235,221);
}
.highlight-yellow_background {
	background: rgb(251,243,219);
}
.highlight-teal_background {
	background: rgb(221,237,234);
}
.highlight-blue_background {
	background: rgb(221,235,241);
}
.highlight-purple_background {
	background: rgb(234,228,242);
}
.highlight-pink_background {
	background: rgb(244,223,235);
}
.highlight-red_background {
	background: rgb(251,228,228);
}
.block-color-default {
	color: inherit;
	fill: inherit;
}
.block-color-gray {
	color: rgba(55, 53, 47, 0.6);
	fill: rgba(55, 53, 47, 0.6);
}
.block-color-brown {
	color: rgb(100,71,58);
	fill: rgb(100,71,58);
}
.block-color-orange {
	color: rgb(217,115,13);
	fill: rgb(217,115,13);
}
.block-color-yellow {
	color: rgb(223,171,1);
	fill: rgb(223,171,1);
}
.block-color-teal {
	color: rgb(15,123,108);
	fill: rgb(15,123,108);
}
.block-color-blue {
	color: rgb(11,110,153);
	fill: rgb(11,110,153);
}
.block-color-purple {
	color: rgb(105,64,165);
	fill: rgb(105,64,165);
}
.block-color-pink {
	color: rgb(173,26,114);
	fill: rgb(173,26,114);
}
.block-color-red {
	color: rgb(224,62,62);
	fill: rgb(224,62,62);
}
.block-color-gray_background {
	background: rgb(235,236,237);
}
.block-color-brown_background {
	background: rgb(233,229,227);
}
.block-color-orange_background {
	background: rgb(250,235,221);
}
.block-color-yellow_background {
	background: rgb(251,243,219);
}
.block-color-teal_background {
	background: rgb(221,237,234);
}
.block-color-blue_background {
	background: rgb(221,235,241);
}
.block-color-purple_background {
	background: rgb(234,228,242);
}
.block-color-pink_background {
	background: rgb(244,223,235);
}
.block-color-red_background {
	background: rgb(251,228,228);
}
.select-value-color-default { background-color: rgba(206,205,202,0.5); }
.select-value-color-gray { background-color: rgba(155,154,151, 0.4); }
.select-value-color-brown { background-color: rgba(140,46,0,0.2); }
.select-value-color-orange { background-color: rgba(245,93,0,0.2); }
.select-value-color-yellow { background-color: rgba(233,168,0,0.2); }
.select-value-color-green { background-color: rgba(0,135,107,0.2); }
.select-value-color-blue { background-color: rgba(0,120,223,0.2); }
.select-value-color-purple { background-color: rgba(103,36,222,0.2); }
.select-value-color-pink { background-color: rgba(221,0,129,0.2); }
.select-value-color-red { background-color: rgba(255,0,26,0.2); }

.checkbox {
	display: inline-flex;
	vertical-align: text-bottom;
	width: 16;
	height: 16;
	background-size: 16px;
	margin-left: 2px;
	margin-right: 5px;
}

.checkbox-on {
	background-image: url("data:image/svg+xml;charset=UTF-8,%3Csvg%20width%3D%2216%22%20height%3D%2216%22%20viewBox%3D%220%200%2016%2016%22%20fill%3D%22none%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%0A%3Crect%20width%3D%2216%22%20height%3D%2216%22%20fill%3D%22%2358A9D7%22%2F%3E%0A%3Cpath%20d%3D%22M6.71429%2012.2852L14%204.9995L12.7143%203.71436L6.71429%209.71378L3.28571%206.2831L2%207.57092L6.71429%2012.2852Z%22%20fill%3D%22white%22%2F%3E%0A%3C%2Fsvg%3E");
}

.checkbox-off {
	background-image: url("data:image/svg+xml;charset=UTF-8,%3Csvg%20width%3D%2216%22%20height%3D%2216%22%20viewBox%3D%220%200%2016%2016%22%20fill%3D%22none%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%0A%3Crect%20x%3D%220.75%22%20y%3D%220.75%22%20width%3D%2214.5%22%20height%3D%2214.5%22%20fill%3D%22white%22%20stroke%3D%22%2336352F%22%20stroke-width%3D%221.5%22%2F%3E%0A%3C%2Fsvg%3E");
}
	
</style></head><body><article id="d7a6686f-55bf-4ec1-b3a0-ce611409033d" class="page sans"><header><img class="page-cover-image" src="https://images.unsplash.com/photo-1558544956-15f3c317e06a?ixlib=rb-1.2.1&amp;q=85&amp;fm=jpg&amp;crop=entropy&amp;cs=srgb" style="object-position:center 5.74%"/><div class="page-header-icon page-header-icon-with-cover"><span class="icon">üíª</span></div><h1 class="page-title">[ASW] Preparaci√≥ segon control</h1></header><div class="page-body"><p id="fbfcbf18-efec-4929-8e54-810bd62e6519" class="">
</p><ul id="23eadc4a-1046-428e-b007-5eaa716d4601" class="bulleted-list"><li><a href="https://atenea.upc.edu/mod/quiz/view.php?id=2376122"><strong>Preguntes sobre Microserveis</strong></a>¬†(3 punts sobre 10).<ul id="e6eb65ac-4129-4428-ae76-f12ffdb8aaa2" class="bulleted-list"><li>Estar√† disponible entre les 08:00 i les 20:00 del dimecres 10 de juny. La duraci√≥ m√†xima √©s de 40 minuts. Tingueu en compte que si el comenceu a fer a partir de les 19:21, la duraci√≥ m√†xima ser√† el temps que resti fins a les 20:00.</li></ul><ul id="c2e5b508-3375-4a5c-bbe9-ea1668ef519e" class="bulleted-list"><li>Constar√† de 10 preguntes tancades escollides aleat√≤riament d&#x27;un conjunt de 38 preguntes.</li></ul><ul id="1c32eea2-9a04-4b43-81c5-16cfa4bec576" class="bulleted-list"><li>Enunciat de prova:¬†<a href="https://atenea.upc.edu/mod/quiz/view.php?id=2383793">aqu√≠</a>.</li></ul></li></ul><ul id="2fb27ee7-84cf-4946-8169-bc3fe7e573b8" class="bulleted-list"><li><a href="https://atenea.upc.edu/mod/lti/view.php?id=2385824"><strong>Exercici de Disseny</strong></a>¬†(7 punts sobre 10).<ul id="6bf5f3ed-f968-464b-8ace-17abae387b6d" class="bulleted-list"><li>Estar√† disponible entre les 11:30 i les 14:40 del dimecres 10 de juny. La duraci√≥ m√†xima √©s de 180 minuts. Igual que abans, si el comenceu a fer a partir de les 11:41, la duraci√≥ m√†xima ser√† el temps que resti fins a les 14:40.</li></ul><ul id="77c3ff57-a20a-445f-8586-a37eba89dc5e" class="bulleted-list"><li>Constar√† de les parts seg√ºents:<ul id="89579598-6e9d-4fb2-a58a-e177517db928" class="bulleted-list"><li>Apartat a, Disseny de serveis SOAP amb RPC API + Request/Response + DTO: 1.5 punts</li></ul><ul id="ce391be4-95f5-4a7a-8ca0-6fc24d5dceeb" class="bulleted-list"><li>Apartat b, Disseny de serveis SOAP amb RPC API + Request/Acknowledge/Poll + DTO: 0.75 punts</li></ul><ul id="240f6c2a-2c75-47cb-b445-470484db4d03" class="bulleted-list"><li>Apartat c, Disseny de serveis REST - Especifiaci√≥ OpenAPI de les operacions: 4 punts</li></ul><ul id="6cf15c03-4a49-4cca-8b3b-891dc5e29e9f" class="bulleted-list"><li>Apartat d, Disseny d&#x27;un client que consumeixi el servei REST de l&#x27;apartat c: 0.75 punts</li></ul></li></ul><ul id="aaebbb68-3ba0-4589-b8b5-1c0a4dbe89b9" class="bulleted-list"><li>Mentre duri aquest exercici (d&#x27; 11:30 a 14:40), estar√© disponible online per respondre dubtes sobre l&#x27;enunciat:¬†<a href="https://meet.google.com/wjq-twzi-zko">https://meet.google.com/wjq-twzi-zko</a></li></ul><ul id="ccdd83ad-ae44-4f4d-836e-c1f8d2f6c02d" class="bulleted-list"><li>Enunciat de prova:¬†<a href="https://atenea.upc.edu/mod/quiz/view.php?id=2376124">aqu√≠</a>.</li></ul></li></ul><p id="0c22dda8-6f76-4f95-9582-d8065127b756" class="">
</p><nav id="0b012752-2a5f-4c3c-90a2-27bb567fe537" class="block-color-gray table_of_contents"><div class="table_of_contents-item table_of_contents-indent-0"><a class="table_of_contents-link" href="#ca86d7ae-1e12-4c7b-b24f-4c489b7f8f6c">1a part</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#d95130f6-467b-44ba-99df-172c627db2fe">(1) An introduction for architecture style</a></div><div class="table_of_contents-item table_of_contents-indent-2"><a class="table_of_contents-link" href="#4207c035-a93d-4322-9347-54584ccdf105">What are microservices? Definition and characteristics</a></div><div class="table_of_contents-item table_of_contents-indent-2"><a class="table_of_contents-link" href="#0f0ddfed-6e2d-46e2-8ff6-c28d36f515bf">Why do we use microservices? What problem do they solve?</a></div><div class="table_of_contents-item table_of_contents-indent-2"><a class="table_of_contents-link" href="#30650026-51fe-4786-885e-e7e4916885ae">Other architecture style</a></div><div class="table_of_contents-item table_of_contents-indent-2"><a class="table_of_contents-link" href="#9bed312e-5fba-4907-9794-0a1f2afdf5f1">When to use microservices</a></div><div class="table_of_contents-item table_of_contents-indent-2"><a class="table_of_contents-link" href="#8154f715-c5d4-4039-a89e-5046c78a33a4">Pros and cons of microservices</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#c97854e7-0169-45ea-801d-24dfb1c24dc1">(2) Inner working of microservices</a></div><div class="table_of_contents-item table_of_contents-indent-2"><a class="table_of_contents-link" href="#f9151fb4-8b96-4b4f-a92a-72508e2d319b">What has influenced the proliferation of microservices?</a></div><div class="table_of_contents-item table_of_contents-indent-2"><a class="table_of_contents-link" href="#693d5d3d-daf3-42f9-b225-6d2df7cbb004">Communication in microservices ‚Äî&gt; REST API</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#3dab8a30-c5d8-4a52-986b-1f0dd5191523">(3) In practice</a></div><div class="table_of_contents-item table_of_contents-indent-2"><a class="table_of_contents-link" href="#8b25ec58-9aeb-4bd3-aa24-84cf00f94f1e">From Monolith to Microservices</a></div><div class="table_of_contents-item table_of_contents-indent-2"><a class="table_of_contents-link" href="#8f7e53e8-85d8-405a-aa7d-9583404eb413">SoundCloud journey to Microservices</a></div><div class="table_of_contents-item table_of_contents-indent-2"><a class="table_of_contents-link" href="#d54f5ff9-e70f-49fe-a283-c89408f91e86">Exercise: The online shop</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#6f93f59c-edba-4670-aae8-2b66ec17bd89">(4) Summary</a></div><div class="table_of_contents-item table_of_contents-indent-0"><a class="table_of_contents-link" href="#d2ef3c30-0b7b-44c4-8583-4440d3721e75">2a part</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#128a80f6-5756-4762-b3e9-1ae45ece1b49">201819q2_control_2</a></div><div class="table_of_contents-item table_of_contents-indent-2"><a class="table_of_contents-link" href="#cdf3207b-bc8a-45cd-8f6a-b0da8a1ba99f">Enunciat</a></div><div class="table_of_contents-item table_of_contents-indent-2"><a class="table_of_contents-link" href="#28792454-127c-44dc-ace1-1b3fdc97797e">Soluci√≥</a></div><div class="table_of_contents-item table_of_contents-indent-2"><a class="table_of_contents-link" href="#cf09e4bf-5f25-444e-8b29-fc5f6f3bb784">YAML</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#39669f49-53e6-4aa0-9008-46c602f723c0">201819q1_control_2</a></div><div class="table_of_contents-item table_of_contents-indent-2"><a class="table_of_contents-link" href="#5ec6e45e-6822-4b03-8536-ba6132bd87ce">Enunciat</a></div><div class="table_of_contents-item table_of_contents-indent-2"><a class="table_of_contents-link" href="#09f6ebc0-4f51-4894-8b44-f027e590c8d7">Soluci√≥</a></div><div class="table_of_contents-item table_of_contents-indent-2"><a class="table_of_contents-link" href="#3d3937aa-1a62-49cf-b999-754aac058747">YAML</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#2f62ad89-2cf6-4358-8da1-8d640482b408">201718q2_control_2</a></div><div class="table_of_contents-item table_of_contents-indent-2"><a class="table_of_contents-link" href="#92b7f4a7-7688-4f12-9a2a-2028477f4e81">Enunciat</a></div><div class="table_of_contents-item table_of_contents-indent-2"><a class="table_of_contents-link" href="#88869ce2-3b24-4df2-8c5e-06792ce23b74">Soluci√≥</a></div><div class="table_of_contents-item table_of_contents-indent-2"><a class="table_of_contents-link" href="#f1abd21f-f097-46f8-8faf-f0cc92f89171">YAML</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#0194ea11-4f40-467f-bfcc-e592f18653da">201718q1_control_2</a></div><div class="table_of_contents-item table_of_contents-indent-2"><a class="table_of_contents-link" href="#5b2f0c2d-929d-467a-9854-bd3da7368cb8">Enunciat</a></div><div class="table_of_contents-item table_of_contents-indent-2"><a class="table_of_contents-link" href="#227789f2-d36e-4225-a652-b412c237851e">Soluci√≥</a></div><div class="table_of_contents-item table_of_contents-indent-2"><a class="table_of_contents-link" href="#1b97de7b-9d2b-4341-a5e1-87cd805bbbe9">YAML</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#2a9795a3-1404-4238-91e0-a43c4ef73ca0">Unit 5. Design of Web Services Exercises</a></div><div class="table_of_contents-item table_of_contents-indent-2"><a class="table_of_contents-link" href="#3cd89d3e-a06c-459c-93bf-a0905455a768">Enunciat (1)</a></div><div class="table_of_contents-item table_of_contents-indent-2"><a class="table_of_contents-link" href="#c1f1dfe9-7553-4e76-856f-49b3dc2a9cfb">Enunciat (2)</a></div><div class="table_of_contents-item table_of_contents-indent-2"><a class="table_of_contents-link" href="#3394bcea-7c84-46b3-abfc-b94fd5a7dec0">Enunciat (3)</a></div><div class="table_of_contents-item table_of_contents-indent-2"><a class="table_of_contents-link" href="#f720da92-fe71-449f-8ffa-9de37686fdbe">Enunciat (4)</a></div><div class="table_of_contents-item table_of_contents-indent-2"><a class="table_of_contents-link" href="#3e8b071e-0145-4c6e-b103-8b50dcdac6cf">Enunciat (5)</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#8774d68a-dfb5-4d13-b6be-649b93a61acb">Annex 1: Plantilla per definir les operacions dels serveis web SOAP</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#fc5b5ba6-9681-46f8-90c8-fa17552b7d6a">Annex 2: Plantilla per definir les operacions dels serveis web REST</a></div></nav><h1 id="ca86d7ae-1e12-4c7b-b24f-4c489b7f8f6c" class="">1a part</h1><figure class="block-color-gray_background callout" style="white-space:pre-wrap;display:flex" id="b72f2c9b-f6d0-4fd4-b23b-e7cf32089191"><div style="font-size:1.5em"><span class="icon">üìÉ</span></div><div style="width:100%"><a href="https://atenea.upc.edu/mod/quiz/view.php?id=2376122"><strong>Preguntes sobre Microserveis</strong></a>¬†(3 punts sobre 10).</div></figure><hr id="da18e6c0-41b6-4cb1-91b8-cc90ad635ce7"/><h2 id="d95130f6-467b-44ba-99df-172c627db2fe" class="">(1) An introduction for architecture style</h2><h3 id="4207c035-a93d-4322-9347-54584ccdf105" class="">What are microservices? Definition and characteristics</h3><p id="523796a0-1862-4b94-a180-2514e3de620d" class="">Small example</p><figure id="bf24a41f-685b-4794-b458-3b5f46fce66c" class="image"><a href="ASW%20Preparaci%20segon%20control%20bf24a41f685b4794b4583b5f46fce66c/Screenshot_2020-06-02_at_21.00.04.png"><img style="width:480px" src="ASW%20Preparaci%20segon%20control%20bf24a41f685b4794b4583b5f46fce66c/Screenshot_2020-06-02_at_21.00.04.png"/></a><figcaption>One deployment unit vs multiple smaller deployment units.</figcaption></figure><div id="d364b45f-b2cb-4487-bc89-525adb7289b0" class="column-list"><div id="a405d129-7fbc-4300-b9b2-4153e9651d3b" style="width:50%" class="column"><p id="f22f3cf6-95a3-4b09-bc01-fb2eb0b1f3d9" class=""><strong>def</strong>. Microservices represent an architecture style that describes a way of designing software applications as suites of independently deployable services.</p><p id="faad5ff6-d8c7-4a0a-9c3b-816fbbf561e0" class="">
</p></div><div id="1e60cc73-28cc-47bb-8e62-67a3943f9611" style="width:50%" class="column"><p id="f78460ea-a209-408f-a952-e5e264552344" class=""><em>It is difficult to properly define microservices. Instead, the practitioners in the industry have focused on the common characteristics that applications using microservices architecture style exhibit.</em></p><p id="b78674dd-d37c-44af-af81-f84ab6980df0" class=""><em>Article ‚Üí 2014.</em></p><p id="49b2da97-ca37-4629-a650-a0b1f7cf1708" class=""><em>Microservices started in 2011</em></p></div></div><p id="3ebb9057-08bc-4070-88ca-5d6ac7b0d04d" class="">
</p><p id="4432a99e-90d9-42ac-b365-a1b2ae9b16cd" class="">Microservices characteristics:<div class="indented"><p id="509382f1-0cb8-461c-a6ed-7af44a5b8de7" class=""><em>(These are the common characteristics. Not all microservice architectures have all the characteristics, but we do expect that most microservice architectures have most characteristics.)</em></p><ol id="704e5838-1c3e-475b-a3bf-41c09cbdfeec" class="numbered-list" start="1"><li><strong>Componentization via Services</strong></li></ol><ol id="934fde96-b788-4d3f-bade-8500e195f173" class="numbered-list" start="2"><li><strong>Organized around Business Capabilities</strong></li></ol><ol id="7ad62f49-6e26-4d36-b075-3cd4fd422fae" class="numbered-list" start="3"><li>Products not Projects</li></ol><ol id="48296ca6-cf33-4e4e-b1a2-bd09511634e8" class="numbered-list" start="4"><li><strong>Smart endpoints and dumb pipes</strong></li></ol><ol id="c05483bf-4c30-49f8-9c01-6e1655222e4f" class="numbered-list" start="5"><li>Decentralized Governance </li></ol><ol id="2cbba69c-ebf1-4615-9026-7b4a6a8334f5" class="numbered-list" start="6"><li><strong>Decentralized Data Management</strong></li></ol><ol id="9580ede8-f993-41b6-865a-00334f7e1f12" class="numbered-list" start="7"><li><strong>Infrastructure Automation</strong></li></ol><ol id="37cfdc3c-0412-43a3-9d2d-1d90483d95e2" class="numbered-list" start="8"><li>Design for failure</li></ol><ol id="418b9784-d929-4272-9095-783daaff9e98" class="numbered-list" start="9"><li>Evolutionary Design</li></ol></div></p><p id="27f376b4-f19b-4388-bd1f-43c4480681c7" class="">Componentization via Services: A component is a unit of software that is independently replaceable and upgradable</p><figure id="95aa2503-fe45-421e-aebb-687f4425afef" class="image"><a href="ASW%20Preparaci%20segon%20control%20bf24a41f685b4794b4583b5f46fce66c/Screenshot_2020-06-02_at_21.02.01.png"><img style="width:528px" src="ASW%20Preparaci%20segon%20control%20bf24a41f685b4794b4583b5f46fce66c/Screenshot_2020-06-02_at_21.02.01.png"/></a><figcaption>There is in the industry a desire to build systems by plugging together components, much in the way we see things are made in the physical world. -	What is a component? Difficult definition (object, a class‚Ä¶)    Key: a component is a unit of software that is independently replaceable and upgradeable.</figcaption></figure><div id="11819571-7f8a-4ccb-aa6c-18e26d626d97" class="column-list"><div id="8657b8dd-7e1e-4596-aaef-4e2721b8dfa7" style="width:56.25%" class="column"><figure id="8775328b-59c8-4001-bb4b-876086ab7dcb" class="image"><a href="ASW%20Preparaci%20segon%20control%20bf24a41f685b4794b4583b5f46fce66c/Screenshot_2020-06-02_at_21.02.22.png"><img style="width:480px" src="ASW%20Preparaci%20segon%20control%20bf24a41f685b4794b4583b5f46fce66c/Screenshot_2020-06-02_at_21.02.22.png"/></a></figure><p id="3c9d5944-f9b8-4c3a-a1e3-91ae5ed97832" class="">
</p><p id="0c0b38d7-ceeb-4861-83d8-16448c305aeb" class="">Libraries: components that are linked into a program and called using in-memory function calls.</p><p id="fad52940-0905-48f1-914a-5405d87695a4" class="">Services: out of process components who communicate with a mechanism such as a web service request, or remote call.</p><p id="49ad3928-9d61-408c-b7cc-534c30fbe629" class="">
</p></div><div id="fd8789f9-5915-4bf4-bf3c-1122b422bc8f" style="width:43.74999999999999%" class="column"><ul id="feca4975-dfc1-4281-94ae-8a61c745224d" class="bulleted-list"><li>Reason for using services as a component rather than libraries<ul id="e55045b2-2d85-48b1-89b6-2a9921c7b4e9" class="bulleted-list"><li>Services are independently deployable</li></ul><ul id="f780718a-d48a-43d6-986c-eefb55c5af60" class="bulleted-list"><li>A more explicit component interface</li></ul></li></ul><ul id="d60250ad-aaeb-41df-93d7-b04f7b5399c3" class="bulleted-list"><li>Downsides of using services like this:<ul id="85f50e46-d066-4e12-9494-5cd79cf9dc05" class="bulleted-list"><li>Remote calls are more expensive than in-process calls</li></ul><ul id="34354687-8a77-4dc7-b1d1-efdb9ea7825c" class="bulleted-list"><li>If you have to change the allocation of responsibilities between components, such movements of behavior are harder to do when you‚Äôre crossing process boundaries</li></ul></li></ul></div></div><p id="b1b4f8ba-c8d8-4603-b17c-e7ae4e30e432" class="">Organized around business capabilities</p><div id="c65aa2a1-ff05-4739-89d6-c158aa9601e0" class="column-list"><div id="4df88039-b46f-411b-8b2f-c885777677f7" style="width:50%" class="column"><figure id="4dadee5a-56ce-483c-a0cc-f0a2930201b3" class="image"><a href="ASW%20Preparaci%20segon%20control%20bf24a41f685b4794b4583b5f46fce66c/Screenshot_2020-06-02_at_21.02.52.png"><img style="width:982px" src="ASW%20Preparaci%20segon%20control%20bf24a41f685b4794b4583b5f46fce66c/Screenshot_2020-06-02_at_21.02.52.png"/></a><figcaption>Traditional organization: Around infrastructure, layers (UI teams, server-side teams, DB teams), particular technologies‚Ä¶</figcaption></figure></div><div id="6070af74-eb4f-495a-8c72-6160599f6847" style="width:50%" class="column"><p id="98dc98b9-d364-4fef-8a93-7fe05f338b3e" class="">
</p><p id="553d5f42-cc08-4eb6-97a6-4ba3a177fcd7" class="">
</p><p id="cc62e2d0-e378-421b-9437-0261b1cf0418" class="">
</p><p id="08a71474-6415-4e0d-bd8f-d7a186def412" class="">
</p><p id="d6df72bd-4a1e-4d59-b1d2-583af7f6c7b4" class="">Conway‚Äôs law ‚Üí system is divided as company is divided (organized)</p><p id="e9691624-3466-49ae-8f19-e548363e8ca7" class="">
</p></div></div><figure id="5bb02933-92a2-4a77-9699-c0f526015a23" class="image"><a href="ASW%20Preparaci%20segon%20control%20bf24a41f685b4794b4583b5f46fce66c/Screenshot_2020-06-02_at_21.03.25.png"><img style="width:480px" src="ASW%20Preparaci%20segon%20control%20bf24a41f685b4794b4583b5f46fce66c/Screenshot_2020-06-02_at_21.03.25.png"/></a><figcaption>Microservices strategy Around business capability: small cross-functional teams, customer focused and with direct communication with the end user or customer.</figcaption></figure><figure id="801d345c-6212-4b65-9c63-868bdc8944e4" class="image"><a href="ASW%20Preparaci%20segon%20control%20bf24a41f685b4794b4583b5f46fce66c/Screenshot_2020-06-02_at_21.03.52.png"><img style="width:480px" src="ASW%20Preparaci%20segon%20control%20bf24a41f685b4794b4583b5f46fce66c/Screenshot_2020-06-02_at_21.03.52.png"/></a><figcaption><strong>Microservices is much about team organizational attitude as it‚Äôs about technological or software architecture attitude.
</strong>- Monolith: small change affects the entire organization, all the layers: UI, logic and DB
- Monolith: every team needs to know about all the business context
- Microservice: each team knows about a specific part of the business context.</figcaption></figure><p id="6d839704-fdd9-4641-af03-3d645077a3a5" class="">
</p><p id="da8ff99c-c9da-4f9e-8fac-8a893e04a1aa" class="">Smart endpoints</p><div id="c1f788bf-c8b7-47c0-b21c-25c1ad33eddb" class="column-list"><div id="6d7c1598-7356-443a-b249-4a1c43e5a492" style="width:50%" class="column"><figure id="45aa70c5-1e6d-46a3-87dc-9a81994f686a" class="image"><a href="ASW%20Preparaci%20segon%20control%20bf24a41f685b4794b4583b5f46fce66c/Screenshot_2020-06-02_at_21.04.26.png"><img style="width:1294px" src="ASW%20Preparaci%20segon%20control%20bf24a41f685b4794b4583b5f46fce66c/Screenshot_2020-06-02_at_21.04.26.png"/></a><figcaption>Other approaches put significant smarts into the communication mechanism itself. ESB.
ESB (Enterprise Service Bus) products often include sophisticated facilities for message routing, choreography, transformation..</figcaption></figure><p id="d1f157d9-0223-42ad-84ee-47312104f7d4" class="">
</p></div><div id="4dcb8826-426b-499f-b48e-b334a612321f" style="width:50%" class="column"><figure id="a84ddb09-b3fe-4497-a87e-e116354c2f85" class="image"><a href="ASW%20Preparaci%20segon%20control%20bf24a41f685b4794b4583b5f46fce66c/Screenshot_2020-06-02_at_21.04.33.png"><img style="width:1294px" src="ASW%20Preparaci%20segon%20control%20bf24a41f685b4794b4583b5f46fce66c/Screenshot_2020-06-02_at_21.04.33.png"/></a><figcaption>- Smart endpoints and dumb pipes
- Microservices approach puts the logic in the endpoints, using simple RESTish protocols, commonly HTTP request-response.
- The biggest issue in changing a monolith into microservices lies in changing the communication pattern</figcaption></figure></div></div><p id="1931cbe0-131f-4306-ba3f-cc5bc8cde05d" class="">Decentralized Data Management</p><figure id="c1074ac1-e292-4375-ab2a-25e63cd60cf9" class="image"><a href="ASW%20Preparaci%20segon%20control%20bf24a41f685b4794b4583b5f46fce66c/Screenshot_2020-06-02_at_21.10.42.png"><img style="width:528px" src="ASW%20Preparaci%20segon%20control%20bf24a41f685b4794b4583b5f46fce66c/Screenshot_2020-06-02_at_21.10.42.png"/></a><figcaption>- <strong>Monolithic</strong> applications prefer a single database for persistant data. 1 DB across a range of apps.
- <strong>Microservices</strong> each service manages its own database storage. You never share data directly. All sharing has to go through the service wrapped the data.
- <strong>Benefits</strong>: each team, each service can choose the type of DB. It‚Äôs up to individual service what they do.</figcaption></figure><figure id="dd896017-9166-4403-9fa9-54365256e86b" class="image"><a href="ASW%20Preparaci%20segon%20control%20bf24a41f685b4794b4583b5f46fce66c/Screenshot_2020-06-02_at_21.11.51.png"><img style="width:528px" src="ASW%20Preparaci%20segon%20control%20bf24a41f685b4794b4583b5f46fce66c/Screenshot_2020-06-02_at_21.11.51.png"/></a><figcaption>- N microservice : 1 team
- Never ‚Üí 1 microservice : N teams
- The programming language, the type of database, the architecture is up to each team / microservice</figcaption></figure><p id="e203a4be-45dc-40d9-98fe-b0cf843c496c" class="">Infrastructure automation<div class="indented"><p id="df11efbd-c798-4a3c-991f-e4f350cbe3d0" class="">Continuous Integration / Continuous Delivery</p><figure id="a8ec2781-d670-4310-bc67-e3aa330212cb" class="image"><a href="ASW%20Preparaci%20segon%20control%20bf24a41f685b4794b4583b5f46fce66c/Screenshot_2020-06-02_at_21.12.38.png"><img style="width:672px" src="ASW%20Preparaci%20segon%20control%20bf24a41f685b4794b4583b5f46fce66c/Screenshot_2020-06-02_at_21.12.38.png"/></a><figcaption>- Infrastructure automation techniques have evolved enormously over the last few years
- Cloud and AWS ‚Üí has reduced the operational complexity of building, deploying and operating microservices.
- CI/CD key points:
    - We want as much confidence as possible that our software is working, so we run lots of automated tests. 
    - Promotion of working software &#x27;up&#x27; the pipeline means we automate deployment to each new environment.
- One of the aims of CD is to make deployment boring, so whether its one or three applications, as long as its still boring it doesn&#x27;t matter</figcaption></figure></div></p><p id="95db96b1-9d85-4a78-905f-d74fa3c2c9e1" class="">
</p><hr id="c9467470-97c2-460c-a64a-1105abab1855"/><h3 id="0f0ddfed-6e2d-46e2-8ff6-c28d36f515bf" class="">Why do we use microservices? What problem do they solve?</h3><ul id="49a38485-d22c-4169-9530-62ffcce2e8d8" class="bulleted-list"><li>Autonomous teams responsible for their services.</li></ul><ul id="bcb3bab2-1978-4d8a-a864-5f32af9b0113" class="bulleted-list"><li>Strong boundaries between the services keep the system ‚Äúclean‚Äù.</li></ul><ul id="6f6734cb-239a-44ad-9d06-5b48e1d01471" class="bulleted-list"><li>Deployment of several services is easier compared to one big system.</li></ul><p id="e3004e31-d4eb-42cc-bec9-c10cbbf95efc" class="">
</p><p id="5d51a671-90fe-440c-b83f-11bd21dcea58" class=""><strong>Autonomous teams ‚Üí </strong><div class="indented"><ul id="12c1be6d-6389-42f2-8602-df32ef6c231b" class="bulleted-list"><li>Team responsible for their services<ul id="ea81307c-07e4-439a-895f-a26c6b5affd9" class="bulleted-list"><li>Allows to focus on cross-functional requirements, such as scalability</li></ul><ul id="2e00b8f5-4d66-49da-a939-75de774912c8" class="bulleted-list"><li>Allows to use different tech stacks</li></ul><ul id="f2c19a29-870e-4734-b4aa-564c56fbe03a" class="bulleted-list"><li>Allows to move quickly</li></ul></li></ul><p id="2032d25b-5865-4dde-8c65-60a2b3adbd02" class=""><em>Large team or an organization can be split into multiple smaller teams each responsible for their subset of services.
Cross-functional requirements come into focus - one service might need higher scalability than another.
Autonomous teams are possible possible due to bounded contexts.</em></p></div></p><p id="33ad59d2-5eeb-471b-ac1b-198979c15ed6" class=""><strong>Strong Boundaries between Services ‚Üí</strong><div class="indented"><ul id="1a511152-5c4e-4f22-8c34-4fed141d743d" class="bulleted-list"><li>Shields the system from the design choices of one service</li></ul><ul id="0345e2eb-d324-4af6-ad3c-d6ac5299496d" class="bulleted-list"><li>Teams can make their own design choices</li></ul><figure id="b6d9604c-b6dd-46c2-a48e-3b9abfe128dd" class="image"><a href="ASW%20Preparaci%20segon%20control%20bf24a41f685b4794b4583b5f46fce66c/Screenshot_2020-06-02_at_21.16.04.png"><img style="width:528px" src="ASW%20Preparaci%20segon%20control%20bf24a41f685b4794b4583b5f46fce66c/Screenshot_2020-06-02_at_21.16.04.png"/></a><figcaption><em>Software engineers like to keep their work separated (in modules) because it makes it easier to find where to put new functionality or were to go to find old stuff to be maintained. Though it is possible to keep the modules intact in a monolithic application, there is a temptation to incur technical debt by taking shortcuts by connecting domain objects that shouldn‚Äôt be connected. This ends up creating god-like entity objects that have dependencies to all parts of the system. For example, in a typical Java application it‚Äôs really easy to import something from another package in the same project.
Breaking module boundaries becomes more difficult when they are physically separated as they are in case of microservices.</em></figcaption></figure></div></p><div id="b92b473d-c00e-42a9-a08f-3bcecc4bb5b1" class="column-list"><div id="f1812494-be16-4168-ac2c-7b09689b1328" style="width:50%" class="column"><p id="a1933ecd-1910-4719-b42f-f6a7955d8e1a" class=""><strong>High level overview ‚Üí</strong><div class="indented"><p id="2f84df39-f3fd-4387-9f97-7cb85454b412" class=""><strong>Continuous integration: </strong>Creating a build and running automated tests against the build.</p><p id="5db6680f-5053-46f7-867b-63819f42d822" class=""><strong>Continuous delivery: </strong>Automate your release process, which means that by manually clicking you can release to production.</p><p id="432b7e0c-a753-4648-8e4c-5785a35115ab" class=""><strong>Continuous deployment: </strong>Only a failed test will prevent a new change to be deployed to production.</p></div></p></div><div id="8be2cc6a-dc2e-498d-ae0b-eb4c2d725303" style="width:50%" class="column"><figure id="e2a41aa1-e30d-4033-b93c-eb4683f6e8c0" class="image"><a href="ASW%20Preparaci%20segon%20control%20bf24a41f685b4794b4583b5f46fce66c/Screenshot_2020-06-02_at_21.17.29.png"><img style="width:1026px" src="ASW%20Preparaci%20segon%20control%20bf24a41f685b4794b4583b5f46fce66c/Screenshot_2020-06-02_at_21.17.29.png"/></a></figure></div></div><p id="f32c5c18-f801-4636-b29b-65c5414509fb" class=""><strong>Deployment ‚Üí</strong><div class="indented"><ul id="1fd5b440-4ae0-49b2-b68e-601424408ae5" class="bulleted-list"><li>Microservices can be independently deployed.<ul id="dd056502-7919-4fbc-abc0-7325768aa87e" class="bulleted-list"><li>Deployment has become a largely predictable endeavour.</li></ul><ul id="a43935ca-4db9-411c-a1ca-08a688131fe0" class="bulleted-list"><li>Deployment infrastructure is a prerequisite.</li></ul></li></ul><ul id="241940d7-39b9-41b7-b88d-d598ae3c6df8" class="bulleted-list"><li>Reduction of cycle time between idea and working software.</li></ul><figure id="1bb28a77-0cec-442f-9f32-a40605a8da39" class="image"><a href="ASW%20Preparaci%20segon%20control%20bf24a41f685b4794b4583b5f46fce66c/Screenshot_2020-06-02_at_21.18.05.png"><img style="width:576px" src="ASW%20Preparaci%20segon%20control%20bf24a41f685b4794b4583b5f46fce66c/Screenshot_2020-06-02_at_21.18.05.png"/></a><figcaption>Deployment in case of monoliths tends to be cumbersome and high-risk activity that is done rarely. Because of the it‚Äôs difficult to get timely user feedback. 
By embracing microservices, the deployment units become smaller, so it‚Äôs easier to do the process. By automating deployment activities, we are able to shift left and put more energy into analysis and coding, thus making sure we are building the right thing.</figcaption></figure></div></p><p id="43f53014-9780-49ad-8ef2-0b63da9516bb" class="">But ... , there are trade-offs ... ‚Üí<div class="indented"><ul id="5be3559f-cc24-4a2e-a55d-c026de1aa430" class="bulleted-list"><li>Development of distributed systems is tough</li></ul><ul id="ea814326-73aa-479b-bc07-67466d890d2b" class="bulleted-list"><li>Data consistency tends to be challenging</li></ul></div></p><p id="3a6d6247-99e1-474c-8cc2-4ccb91b99836" class="">Distributed systems ‚Üí<div class="indented"><ul id="007804bb-fb64-4b62-9a7d-4765f748553a" class="bulleted-list"><li>Interservice communication reduces performance.</li></ul><ul id="bf0fda41-ecd7-49be-9b09-b33553684d5b" class="bulleted-list"><li>Asynchronous processes are difficult to properly develop and debug.</li></ul><ul id="bd38510e-d49d-4a6a-af30-6a625e1b9dea" class="bulleted-list"><li>Infrastructure</li></ul><figure id="9cb80183-842c-4a9d-bdea-73548d3952e9" class="image"><a href="ASW%20Preparaci%20segon%20control%20bf24a41f685b4794b4583b5f46fce66c/Screenshot_2020-06-02_at_21.19.45.png"><img style="width:1772px" src="ASW%20Preparaci%20segon%20control%20bf24a41f685b4794b4583b5f46fce66c/Screenshot_2020-06-02_at_21.19.45.png"/></a><figcaption>Microservice proponents like to point out that since each service is smaller it&#x27;s easier to understand. But the danger is that complexity isn&#x27;t eliminated, it&#x27;s merely shifted around to the interconnections between services.</figcaption></figure></div></p><p id="3ac8ba2c-33fa-41c7-86c9-e65fa0882c40" class="">Eventual consistency ‚Üí<div class="indented"><ul id="90a70fe0-a73e-428c-b1de-20c2f78b9de5" class="bulleted-list"><li>One cannot rely on ACID transactions.</li></ul><ul id="84d1996e-be5e-488a-a537-d1e847b629fd" class="bulleted-list"><li>Developers need to deal with data synchronization problems and figure out how do make it consistent.</li></ul><figure id="1628b4f7-c845-42d8-803c-b620fc158dd0" class="image"><a href="ASW%20Preparaci%20segon%20control%20bf24a41f685b4794b4583b5f46fce66c/Screenshot_2020-06-02_at_21.20.45.png"><img style="width:528px" src="ASW%20Preparaci%20segon%20control%20bf24a41f685b4794b4583b5f46fce66c/Screenshot_2020-06-02_at_21.20.45.png"/></a><figcaption>ACID (atomicity, consistency, isolation, durability) is a set of properties of database transactions intended to guarantee validity even in the event of errors, power failures, etc. In the context of databases, a sequence of database operations that satisfies the ACID properties (and these can be perceived as a single logical operation on the data) is called a transaction.</figcaption></figure></div></p><h3 id="30650026-51fe-4786-885e-e7e4916885ae" class="">Other architecture style</h3><p id="2fa1b5c8-04fd-4c8d-a5d4-dcac66a5ce65" class="">Contrast microservices to other styles</p><ul id="e71848c7-d422-4ab3-b15e-2f6eeef8482b" class="bulleted-list"><li><strong>Monolith </strong>‚Üí <ul id="dd8b4dd9-3f1f-41fe-adbc-2605960c6708" class="bulleted-list"><li>Traditional unified model. It is design to be self-contained, components of the program are interconnected and interdependent. If any program component must be updated, the whole application has to be rewritten.</li></ul></li></ul><ul id="132a7d28-d750-4614-aa6a-3eac3520ee0c" class="bulleted-list"><li><strong>Microservices</strong> ‚Üí <ul id="194e19cb-8f95-41ab-ae6f-735be49645a9" class="bulleted-list"><li>is an approach to developing a single application as a suite of small services, each running in its own process and communicating with lightweight mechanisms, often an HTTP resource API.</li></ul></li></ul><figure id="408dc204-beb0-452b-bd14-8570099ce0b8" class="image"><a href="ASW%20Preparaci%20segon%20control%20bf24a41f685b4794b4583b5f46fce66c/Screenshot_2020-06-02_at_21.21.40.png"><img style="width:768px" src="ASW%20Preparaci%20segon%20control%20bf24a41f685b4794b4583b5f46fce66c/Screenshot_2020-06-02_at_21.21.40.png"/></a><figcaption><strong>Performance</strong> - when the microservices are independent, their performance is quite high since they are focused on one particular task. An issue might arise when there is a lot of communication between the services. Monoliths don‚Äôt have built in capabilities for improving performance, since it is one huge deployment unit. There are ways of doing it (using cache for data for example), but they all require extra effort.

<strong>Testability</strong> - for Microservices, it is relatively easy to write a good fast test suite consisting of a large number of unit tests that can be rerun often. The difficulty may arise testing all the interactions between the services. For monoliths, writing good tests becomes more difficult, since you may be dealing with a lot of internal dependencies. Additionally, each line of new code will trigger a huge test suite for regression testing.

<strong>Scalability</strong> is the ability of the system to accommodate larger loads just by adding resources either making hardware stronger (scale up) or adding additional nodes (scale out).

<strong>Elasticity</strong> is the ability to fit the resources needed to cope with loads dynamically usually in relation to scale out. So that when the load increases you scale by adding more resources and when demand wanes you shrink back and remove unneeded resources.</figcaption></figure><h3 id="9bed312e-5fba-4907-9794-0a1f2afdf5f1" class="">When to use microservices</h3><p id="142a0a69-c874-4369-b3d9-ea7586bdcaec" class="">Microservice Readiness Checklist ‚Üí</p><ol id="5abd70ba-3478-4480-8cae-03619f7e5144" class="numbered-list" start="1"><li>Is there a deep understanding of the problem domain?</li></ol><ol id="cf755c11-97d1-458f-97ad-199e4daec605" class="numbered-list" start="2"><li>Are there enough resources for automated infrastructure work (DevOps)?<ul id="5ea441f8-0fda-413c-97db-d7891aae58a8" class="bulleted-list"><li>Compute resources, monitoring, deployment, production-ready DB-s, authorization, ...</li></ul></li></ol><ol id="8b33aea6-5bf0-4398-88f1-8490654f4de1" class="numbered-list" start="3"><li>Are the principles of Agile followed?<ul id="1a4980ee-9678-47fc-9461-450ebb8c0507" class="bulleted-list"><li>Small autonomous teams</li></ul><ul id="a0d0d5fb-89c3-45ff-8322-0cc9cf93b6bf" class="bulleted-list"><li>Iterative approach to development with a strong emphasis on testing</li></ul></li></ol><p id="a6fae779-120c-4515-9a69-2846f2b5e9a9" class="">This list gives an intuition when <strong>not </strong>to use microservices.</p><p id="3529886e-2dfe-4337-ae6b-d749f02489ca" class="">
</p><p id="9b45653c-cf6a-423f-b4e5-063ebecb8d9c" class="">When to use microservices? ‚Üí</p><ul id="e4b392d0-63e1-4446-9811-02c3c4e64681" class="bulleted-list"><li>When the system becomes too large.<ul id="878c9a6d-9a29-4e40-89c3-5e984240cb12" class="bulleted-list"><li>What is large? If a cycle time for new features is too long. When the developers are overworked but the new features still don‚Äôt get done.</li></ul></li></ul><ul id="2330527e-4977-48a1-b0f7-9ca70f898ac3" class="bulleted-list"><li>When the (knowledge of the) domain is stable.</li></ul><ul id="4c89ee6d-bc10-45ff-9bfd-2ed63ee89e7c" class="bulleted-list"><li>When the development team working on the system is getting bigger.</li></ul><ul id="635439f2-4a43-4442-8d13-13615c36e15a" class="bulleted-list"><li>When the services have to be highly decoupled, have different cross-functional requirements, and different life-cycles.<ul id="1777a83c-23e6-4dd9-ac27-bdf9f16b9c43" class="bulleted-list"><li>Scalability or elasticity is very important for one part of the system.</li></ul><ul id="754c4627-e6ec-4ff5-b979-95d851b51a7f" class="bulleted-list"><li>Part of the system keeps changing while others remain stable.</li></ul></li></ul><p id="9fcc0e7b-9a71-49b7-b5b7-76bf23628d3b" class=""><div class="indented"><p id="6e0b62c9-64ca-4669-b2c8-3e3e781e7624" class=""><em>Microservices can be thought of as an optimization task in order for your system to deliver value quicker. Microservices make sense when you have figured out the boundaries of the (would-be) services and API-s. Don‚Äôt over optimize and complicate things when you don‚Äôt need to.</em></p><p id="6b448e49-7094-476f-ad96-02dc2ae2e70c" class=""><em>Concert ticket example: when you have a shop for concert tickets, you would expect different parts of the system to have different and sometimes even conflicting cross-functional requirements. For example we know that every once in a while there will be a concert for which there is a huge demand for tickets in a matter of seconds of them coming online. So the system has to be scalable enough to be able to withstand the demand. On the other hand, this is not an hourly occurrence, high-demand tickets don‚Äôt come out every hour, so the system also has to scale down parts of it dynamically, meaning it has to be elastic. There are parts of the concert ticket system that don‚Äôt need this type of scalability and elasticity - concert catalog, user profiles are some examples. For the user profile part, security and privacy may be the most important requirements.</em></p></div></p><h3 id="8154f715-c5d4-4039-a89e-5046c78a33a4" class="">Pros and cons of microservices</h3><p id="b021fa8a-9e5e-4185-be3f-32f17399eed2" class="">Pros:</p><ul id="4ec80a1b-d932-4446-80ba-7e81b3f4f1c4" class="bulleted-list"><li>Services are independently replaceable, upgradable, and deployable</li></ul><ul id="c1ba4703-6469-4564-92ca-b70e293312ab" class="bulleted-list"><li>Small deployment units support changing business better</li></ul><ul id="29553b6a-a737-46b4-b293-f475c27fbe71" class="bulleted-list"><li>Scalability and elasticity can be built into the architecture</li></ul><ul id="61ce73e9-2059-42d7-9afe-2868e24d3959" class="bulleted-list"><li>Isolated services have high fault tolerance</li></ul><ul id="7046e710-3e44-4b2f-8982-eb76a33f29c3" class="bulleted-list"><li>Developed in an evolutionary fashion</li></ul><p id="8567c928-f8e9-4c4a-9800-41ff4f1e3731" class="">Cons:</p><ul id="e28a6796-8080-47cd-84e1-089fc3ffe6a9" class="bulleted-list"><li>Operational concerns, such as debugging and monitoring are difficult to manage in a distributed system</li></ul><ul id="a07a81e0-ee93-4d42-be76-c0451d6b68ab" class="bulleted-list"><li>Interservice calls affect performance and reliability</li></ul><ul id="4e1ce85c-753c-4f21-bf8b-05555fc3ad83" class="bulleted-list"><li>Greater complexity introduces security challenges</li></ul><ul id="d77d328f-6763-4b6a-8fb6-47afef6713d3" class="bulleted-list"><li>Consistency of data becomes more challenging</li></ul><ul id="36501b97-f7d4-476f-b54d-bd538d231706" class="bulleted-list"><li>Cannot exist without DevOps and Agile practices</li></ul><hr id="bf85c98e-da15-4e4c-8449-4799c2e2ff32"/><h2 id="c97854e7-0169-45ea-801d-24dfb1c24dc1" class="">(2) Inner working of microservices</h2><h3 id="f9151fb4-8b96-4b4f-a92a-72508e2d319b" class="">What has influenced the proliferation of microservices?</h3><p id="43dee122-a55c-43b3-a564-3b7e1098bbe3" class="">What has influenced the proliferation of microservices? ‚Üí</p><ul id="b8d5beff-6bda-4dd3-b173-0665545f3bb4" class="bulleted-list"><li>Rise of domain-driven design</li></ul><ul id="5baff3fd-9056-45b9-8b04-90a842c9e28f" class="bulleted-list"><li>Agile methodology - independent small teams</li></ul><ul id="375e8504-b2f1-44a0-8aec-c0d6f4784d86" class="bulleted-list"><li>Cloud computing and Continuous Delivery mindset</li></ul><p id="9445e67f-952d-40f6-b296-22f98e06333b" class="">
</p><p id="3db54e63-ac79-4174-a192-8026094528e0" class="">Rise of domain-driven design ‚Üí</p><ul id="e0351eb5-54f5-4aae-8407-38b5c53e3f2e" class="bulleted-list"><li>Brings the conversation from how to why</li></ul><ul id="081c499b-ab48-4a0b-b836-621430e4ddd7" class="bulleted-list"><li>Collaboration between technical and domain experts, since everyone speaks using the same domain concepts.<figure id="3d2fbfe8-0d5e-41ce-8854-305e73e499e5" class="image"><a href="ASW%20Preparaci%20segon%20control%20bf24a41f685b4794b4583b5f46fce66c/Screenshot_2020-06-02_at_21.26.06.png"><img style="width:576px" src="ASW%20Preparaci%20segon%20control%20bf24a41f685b4794b4583b5f46fce66c/Screenshot_2020-06-02_at_21.26.06.png"/></a><figcaption>This process is useful for both monolithic and microservice architectures, but there is a natural correlation between service and context boundaries that helps clarify, and as we describe in the section on business capabilities, reinforce the separations.
Domain-driven design aims to ease the creation of complex applications by connecting the related pieces of the software into an ever-evolving model. DDD focuses on three core principles:
- Focus on the core domain and domain logic.
- Base complex designs on models of the domain.
- Constantly collaborate with domain experts, in order to improve the application model and resolve any emerging domain-related issues.</figcaption></figure></li></ul><p id="54520170-7d99-4322-8ffe-4db71fb20575" class="">
</p><p id="f027fec6-6cb1-433c-87d8-da658a1fd012" class="">Agile methodology - independent small teams ‚Üí</p><ul id="66a7c748-6b57-48fc-829b-efb04b868219" class="bulleted-list"><li>Agile is the way we think about a project in order to produce more value to the customer more quickly than older methods. The primary goal is to more efficiently bring the customer value and the word Agile represents the idea of adaptiveness and response to change.<p id="efe2e348-b6b1-4739-a2c9-d2e3b9dd77d9" class=""><em>Agile software development is an umbrella term for a set of frameworks and practices based on the values and principles expressed in the Manifesto for Agile Software Development where the word Agile represents the idea of adaptiveness and response to change.</em></p></li></ul><ul id="f04d5362-14af-4f6c-ae7d-bacf2916592f" class="bulleted-list"><li>Traditional vs DevOps<figure id="6c1c83f9-6dcf-4fbe-b069-cd7976e39232" class="image"><a href="ASW%20Preparaci%20segon%20control%20bf24a41f685b4794b4583b5f46fce66c/Screenshot_2020-06-02_at_21.27.50.png"><img style="width:1634px" src="ASW%20Preparaci%20segon%20control%20bf24a41f685b4794b4583b5f46fce66c/Screenshot_2020-06-02_at_21.27.50.png"/></a><figcaption>Agile software development has broken down some of the silos between requirements analysis, testing and development. Deployment, operations and maintenance are other activities which have suffered a similar separation from the rest of the software development process. The DevOps movement is aimed at removing these silos and encouraging collaboration between development and operations.

DevOps culture is all about a shared understanding between developers and operations, and sharing responsibility for the software they build.</figcaption></figure></li></ul><p id="659ba372-0cb2-4389-b655-c00a117b8d50" class="">
</p><ul id="d8c03157-9ef4-4cb8-b896-d5b683baff50" class="bulleted-list"><li>Microservices is much about team organizational attitude as it‚Äôs about technological or software architecture.<ul id="763b53c3-0076-4084-a8a0-8ac5a7e1de16" class="bulleted-list"><li>Agile principles:<ul id="39238538-c9c2-4498-8f56-a1a517ecea3f" class="bulleted-list"><li>Closer collaboration</li></ul><ul id="30edc6d9-575f-45b9-a611-18ecb62a862d" class="bulleted-list"><li>Autonomous teams</li></ul><ul id="30f84070-62d5-4d9a-8a07-ed3f23280e03" class="bulleted-list"><li>No silos between development and operations / DevOps culture</li></ul><ul id="22d7da1e-619b-435f-a8e9-b067a138051c" class="bulleted-list"><li>Adaptiveness and response to change</li></ul></li></ul><ul id="92551dec-c50d-49e8-bac4-547c76474b9e" class="bulleted-list"><li>Microservices‚Äô characteristics<ul id="dc53a982-d17c-4bd3-ac9c-0634d368f480" class="bulleted-list"><li>Organized around Business Capabilities</li></ul><ul id="cae43b56-c839-439b-889f-602b8b316137" class="bulleted-list"><li>Decentralized Governance</li></ul><ul id="5c845e75-c396-448f-ab17-8c21ac207961" class="bulleted-list"><li>Infrastructure Automation</li></ul><ul id="e2f8f44d-dc2f-4337-aa83-a1dd1e98a508" class="bulleted-list"><li>Evolutionary design</li></ul></li></ul></li></ul><p id="6533cb05-8d2e-458e-8179-8314cd893c1a" class=""><div class="indented"><p id="9e689dcc-d8d6-40ba-b3f2-0a4644246096" class=""><em>Agile culture and microservices have a lot in common

DevOps mentality is very important to build a microservice infrastructure successfully. </em><em><strong>Team structure and culture == software architecture

</strong></em><em>Main mistake ‚Üí 1 microservice: N teams. Against decentralized governance rule or autonomous teams principle.

Infrastructure Automation ‚Üí CI/CD</em></p></div></p><p id="57043324-861d-4fe7-af22-43f7c5fc8869" class="">
</p><p id="3c640518-fd68-47d5-8b5e-7207874dbcd2" class="">Cloud computing and Continuous Delivery mindset ‚Üí</p><ul id="0fa33505-09c9-4d8f-a386-308b3a32f5c4" class="bulleted-list"><li>Agile Culture - small teams<figure id="68d2400c-4982-4511-aa07-8f85c15cfbaa" class="image"><a href="ASW%20Preparaci%20segon%20control%20bf24a41f685b4794b4583b5f46fce66c/Screenshot_2020-06-02_at_21.31.11.png"><img style="width:576px" src="ASW%20Preparaci%20segon%20control%20bf24a41f685b4794b4583b5f46fce66c/Screenshot_2020-06-02_at_21.31.11.png"/></a><figcaption>Small teams can be contrasted with big stereotypical waterfall teams that do a lot of upfront planning. Agile teams approach a system iteratively, thus implementing the principles of evolutionary design. Also, again, small teams are focused on business needs, organized around business capabilities, and usually in charge of a subset of microservices.</figcaption></figure></li></ul><ul id="c5382971-1214-4d81-82d9-cd7b2afa873a" class="bulleted-list"><li>Virtualization<ul id="d139df3a-1683-46d9-b39e-454343f75d2b" class="bulleted-list"><li>The development of the cloud created new possibilities for robust, scalable software.</li></ul><ul id="0c7d3a7d-39b4-422b-8db3-4e4407a238b6" class="bulleted-list"><li>The proliferation of containerization brought the infrastructure work back into the team - ‚ÄúYou build it, you own it‚Äù mentality.</li></ul><ul id="2cb0e365-bfb2-4585-905d-28cfa6c041fa" class="bulleted-list"><li>Gave rise to Continuous Integration/Continuous Delivery (CI/CD).</li></ul></li></ul><ul id="de2311f3-162e-4bb8-a4ae-1771a25afbdd" class="bulleted-list"><li>CI/CD<ul id="675b09c2-860b-4306-82ea-ece8962462a5" class="bulleted-list"><li>The practice of building software in such a way that it can be deployed to production at any time. The aim is to make going into production a business decision.</li></ul><ul id="843fa0b0-6441-43f4-9a44-69f8274e3c45" class="bulleted-list"><li>CI/CD can be achieved through:<ul id="ed574b53-ef48-4f1c-a3e2-92d7757fc17d" class="bulleted-list"><li>Integrating early,</li></ul><ul id="f958071c-ce2b-4621-9705-066717c9aaf6" class="bulleted-list"><li>Running automated tests to catch problems,</li></ul><ul id="9ea95429-176e-4e0c-b7be-2be14cc50d64" class="bulleted-list"><li>Using production-like testing environments.</li></ul></li></ul><p id="77303811-0294-45e4-a711-b4a6e9180be6" class="">
</p><p id="187502a2-5dd8-450f-8b37-1c611e5751a9" class=""><em>Continuous Delivery is the ability to get changes of all types‚Äîincluding new features, configuration changes, bug fixes and experiments‚Äîinto production, or into the hands of users, safely and quickly in a sustainable way.

Microservices trade-offs by Martin Fowler:

&quot;Being able to swiftly deploy small independent units is a great boon for development, but it puts additional strain on operations as half-a-dozen applications now turn into hundreds of little microservices. Many organizations will find the difficulty of handling such a swarm of rapidly changing tools to be prohibitive. This reinforces the important role of continuous delivery. While continuous delivery is a valuable skill for monoliths, one that&#x27;s almost always worth the effort to get, it becomes essential for a serious microservices setup.&quot;

Independent deployable
Automated test</em></p></li></ul><h3 id="693d5d3d-daf3-42f9-b225-6d2df7cbb004" class="">Communication in microservices ‚Äî&gt; REST API</h3><ul id="2d6a10eb-fa25-44ef-ad54-a739bba280e3" class="bulleted-list"><li>Smart endpoints and dumb pipes</li></ul><ul id="2d6abd34-7ac8-4ee4-b83e-95e19225881b" class="bulleted-list"><li>The goal‚Üí to be as decoupled and as cohesive as possible receiving a request, applying logic as appropriate and producing a response.</li></ul><p id="defb1d98-eec2-4658-96ac-8fae748bc67a" class=""><em>‚ÄúBe on the web, not behind the web‚Äù </em></p><p id="485834b8-e2e0-4f34-9df5-36e2d2779f89" class=""><div class="indented"><p id="0adb6b5a-e80f-4a00-bc1a-af02d7f890c2" class=""><em>Microservices‚Äô requirements:
- One of the characteristics of Microservices was ‚Äúsmart endpoints and dumb pipes‚Äù
- Applications built from microservices aim to be as decoupled and as cohesive as possible receiving a request, applying logic as appropriate and producing a response. These are choreographed using simple RESTish protocols rather than complex protocols. The most commonly protocol used is HTTP request-response with resource API&#x27;s, because of the speed with low overhead and network latency. So REST APIs are a good fit.
- Microservice teams use the principles and protocols that the world wide web is built on. Often used resources can be cached with very little effort on the part of developers or operations folk: ‚ÄúBe on the web, not behind the web‚Äù</em></p></div></p><p id="4611a348-dd39-4d70-9728-22116c1fd13c" class="">
</p><p id="0d23b02c-a029-4007-9c0a-8a1832f48445" class="">What is a RESTful API?</p><figure id="dc2fffd6-0ec0-4dd1-ab87-68548936e13a" class="image"><a href="ASW%20Preparaci%20segon%20control%20bf24a41f685b4794b4583b5f46fce66c/Screenshot_2020-06-02_at_21.34.45.png"><img style="width:576px" src="ASW%20Preparaci%20segon%20control%20bf24a41f685b4794b4583b5f46fce66c/Screenshot_2020-06-02_at_21.34.45.png"/></a><figcaption>RESTful API is a client-facing language for describing our business domain, where resources are the nouns and HTTP request methods are the verbs (PUT, POST, GET, DELETE‚Ä¶)</figcaption></figure><p id="a7150d48-8ca4-423b-9748-14c6a22696ef" class="">
</p><p id="cbd3158e-7db5-4b69-8c92-d14e1e7f64be" class="">Richardson maturity model</p><figure id="1572c5cc-37a5-454a-af98-14450f205acf" class="image"><a href="ASW%20Preparaci%20segon%20control%20bf24a41f685b4794b4583b5f46fce66c/Screenshot_2020-06-02_at_21.35.15.png"><img style="width:528px" src="ASW%20Preparaci%20segon%20control%20bf24a41f685b4794b4583b5f46fce66c/Screenshot_2020-06-02_at_21.35.15.png"/></a></figure><p id="45253f69-cb9c-48c3-91fb-097b9ff51a50" class="">
</p><figure id="b843ce10-e63b-4c34-9e79-9916cafbff5f" class="image"><a href="ASW%20Preparaci%20segon%20control%20bf24a41f685b4794b4583b5f46fce66c/Screenshot_2020-06-02_at_21.35.54.png"><img style="width:528px" src="ASW%20Preparaci%20segon%20control%20bf24a41f685b4794b4583b5f46fce66c/Screenshot_2020-06-02_at_21.35.54.png"/></a></figure><p id="25fed5ca-8c9e-44b4-ac1d-0de97b608dec" class="">Common dangers of remote calls</p><ul id="9d0cdc5b-9bd8-4c34-96a4-b88773635eaf" class="bulleted-list"><li>Synchronous calls come with latency that reduces performance.</li></ul><ul id="67d3f166-872b-47fe-81b9-bb5fc1f32f53" class="bulleted-list"><li>Asynchronous calls come with a cognitive overhead - hard to debug.</li></ul><ul id="0d3afb9f-ef28-4e46-a681-ab726a116b71" class="bulleted-list"><li>Network is unreliable - anything can and will fail - one has to design with that in mind.<p id="a2afc78b-04ca-4bfa-bd34-1961f2a743cb" class="">
</p><p id="155876da-7e2c-494a-ac97-2845853d60de" class=""><em>Another approach is to treat your system as a generator of events. In this case we can use Kafka to transmit those events to relevant parties. Kafka provides two APIs implementing the publish/subscribe ‚Äî a.k.a observable/observer ‚Äî design pattern. They allow topics to have multiple &quot;inputs&quot; and &quot;outputs&quot;:
- The Producer API is used to publish events to topics.
- The Consumer API is used to subscribe to topics and process their messages on the fly.</em></p></li></ul><p id="d72894f5-7f73-4647-936f-f7ec493719b2" class="">Service Mesh<div class="indented"><figure id="1f77618c-ef63-4db4-832d-865a2502df9b" class="image"><a href="ASW%20Preparaci%20segon%20control%20bf24a41f685b4794b4583b5f46fce66c/Screenshot_2020-06-02_at_21.37.51.png"><img style="width:1758px" src="ASW%20Preparaci%20segon%20control%20bf24a41f685b4794b4583b5f46fce66c/Screenshot_2020-06-02_at_21.37.51.png"/></a><figcaption>As the complexity of the microservices increases, it becomes more difficult to design the system since each service needs to deal with errors, failures, latency, health checks, etc. This logic is duplicated on every service. Kubernetes introduced health checks and automatic recovery but services still need to implement circuit breaker patterns, service discovery, API management, encryption, SSL management, ACLs, etc.

Service Mesh such Istio were introduced to overcome this problem and allow developers to focus on pure development by automating the service to service communication complexity. A service mesh is the connective tissue between your services that adds additional capabilities like traffic control, service discovery, load balancing, resilience, observability, security, and so on. A service mesh allows applications to offload these capabilities from application level libraries and allow developers to focus on differentiating business logic.</figcaption></figure></div></p><p id="cfd62adf-9bb2-4561-aaec-d7290685e5c4" class="">Possible mitigations ‚Üí</p><figure id="e1f6e2e5-bb9b-4410-9635-b67ff4ea8363" class="image"><a href="ASW%20Preparaci%20segon%20control%20bf24a41f685b4794b4583b5f46fce66c/Screenshot_2020-06-02_at_21.39.26.png"><img style="width:528px" src="ASW%20Preparaci%20segon%20control%20bf24a41f685b4794b4583b5f46fce66c/Screenshot_2020-06-02_at_21.39.26.png"/></a></figure><p id="4c8895cd-5181-4855-a762-687c82e87547" class="">
</p><h2 id="3dab8a30-c5d8-4a52-986b-1f0dd5191523" class="">(3) In practice</h2><h3 id="8b25ec58-9aeb-4bd3-aa24-84cf00f94f1e" class="">From Monolith to Microservices</h3><p id="f3cf78f2-ce15-4ae7-950f-f4463a61ac6f" class="">Some principles first</p><ol id="fa02271e-2f60-4947-bd04-30fdaf169c0a" class="numbered-list" start="1"><li>Make sure the team has the operational readiness<p id="204476c9-8e2b-434a-b6e9-6fcf6f0b53e5" class=""><em>It‚Äôs important to have the CI/CD environment set up, container orchestration system for fast deployments, infrastructure to facilitate the communication between services (for example Istio), mechanisms to bring up new server and data storage instances, etc.</em></p></li></ol><ol id="74ec7204-7118-4916-9323-074911bd3cee" class="numbered-list" start="2"><li>Start easy to minimize risks<p id="96dcab66-c9f8-473d-b351-43523494256a" class=""><em>It is advisable to do edge services first because at the beginning of the journey, the delivery teams&#x27; biggest risk is failing to operate the microservices properly. So it‚Äôs good to use the edge services to practice the operational prerequisites they need. Once they have addressed that, they can then address the key problem of splitting the monolith.</em></p></li></ol><ol id="cb76eb0d-2316-41c6-ab90-36cda9fb509c" class="numbered-list" start="3"><li>Minimize dependencies to the monolith<p id="1ebfb3f1-22f9-4982-adc8-0315f42e9e0e" class=""><em>A major benefit of microservices is to have a fast and independent release cycle. Having dependencies to the monolith - data, logic, APIs - couples the service to the monolith&#x27;s release cycle, prohibiting this benefit. Often the main motivation for moving away from the monolith is the high cost and slow pace of change of the capabilities locked in it, so we want to progressively move in a direction that decouples these core capabilities by removing dependencies to the monolith. Dependencies from the monolith to the services are okay, since they don‚Äôt slow down the pace of change for new services.</em></p></li></ol><ol id="79477da9-cad9-4ecd-9d5d-a701c0911740" class="numbered-list" start="4"><li>Reassess domain concepts and separate them into services<p id="651b50c4-2e6f-4227-a4d1-b963cd9ba019" class=""><em>At some point one runs out of possibilities to easily separate services from the monolith. That‚Äôs because the capability in the domain may be poorly defined with a lot of inner dependencies. In order to be able to progress, the developers need to identify the sticky capability, deconstruct it into well-defined domain concepts and then migrate those domain concepts into separate services.</em></p></li></ol><ol id="fb9dd09a-0384-4790-854d-eee2c16df948" class="numbered-list" start="5"><li>Pay attention to all the layers of the service, especially the data storage<p id="91ca4119-26e3-47e3-a8b6-0130a5bda0ed" class=""><em>Most decoupling attempts start with extracting the user facing components and a few facade services to provide developer friendly APIs for the modern UIs, while the data remains locked in one schema and storage system. Though this approach gives some quick wins such as changing the UI more frequently, when it comes to core capabilities the delivery teams can only move as fast as the slowest part, the monolith and its monolithic data store. Simply put, without decoupling the data, the architecture is not microservices. The strategy is to move out capabilities vertically, decouple the core capability with its data and redirect all front-end applications to the new APIs.</em></p></li></ol><ol id="1547cdbf-0c21-4643-b605-e1c6d7311860" class="numbered-list" start="6"><li>Focus on what is needed for the business and avoid attachments to existing code<p id="cdac0bb0-754d-488e-a1b8-dfa8c04618a7" class=""><em>Prioritise business needs and focus on the parts of the monolith that get changed often. These parts may be ripe to be extracted. Once they are separate services, it‚Äôs often easier for a team to work on them.
Additionally, when extracting services from the monolith, one may ask themselves which parts of the code to reuse and extract, and which parts to rewrite. Complex and business logic heavy parts may be reused, while CRUD and boiler-plate code should be rewritten to take advantage of the modern tools. In general, if possible, it is better to rewrite the code to reduce the toxicity of the codebase and keep it modern and fresh even though humans have a bias of getting attached to their work, no matter the quality of it.</em></p></li></ol><ol id="b6605dc4-1510-4c20-966d-4eb72336fff7" class="numbered-list" start="7"><li>Start with bigger services, going ‚Äúmicro‚Äù can be left for later<p id="58851f62-226d-4bca-a5aa-9615ad57eddb" class=""><em>Getting domain boundaries correct is not an easy task. If one starts with the aim of having small services, one risks creating a huge number of CRUD services that aren‚Äôt especially useful. This creates a distributed system that is hard to debug, a distributed system that is broken across transactional boundaries and hence difficult to keep consistent, a system that is too complex for the operational maturity of the organization. Though there are some heuristics on how ‚Äòmicro‚Äô should be the microservice: the size of the team, the time to rewrite the service, how much behaviour it must encapsulate, etc. My advice is that the size depends on how many services the delivery and operation teams can independently release, monitor and operate. Start with larger services around a logical domain concept and break the service down into multiple services when the teams are operationally ready.</em></p></li></ol><ol id="f42eb61b-d614-4b38-a6ca-f5e85ca083dd" class="numbered-list" start="8"><li>Retire old code<p id="895baee8-6179-4a03-97f3-f4719bed0eeb" class=""><em>The atomic unit of monolith decomposition includes:
- Decouple the new service
- Redirect all consumers to new service
- Retire the old code path in the monolith.

The anti-pattern: Decouple the new service, use for new consumers and never retire the old

Often teams end migration of a capability out of the monolith and claim victory as soon as the new capability is built without retiring the old code path, the anti-pattern described above. The main reasons for this are (a) the focus on short-term benefits of introducing a new capability and (b) the total amount of effort required to retire the old implementations while facing competing priorities for building new features. In order to do the right thing, we need to strive for making the atomic steps as small as possible.</em></p></li></ol><p id="845a9b38-0eb9-4b48-bfcd-21bf92db7cfd" class="">
</p><h3 id="8f7e53e8-85d8-405a-aa7d-9583404eb413" class="">SoundCloud journey to Microservices</h3><ul id="cb6df76b-1cdd-41f6-8279-8983d7f3d62b" class="bulleted-list"><li>Started with a Ruby on Rails monolith.</li></ul><ul id="7f17aa88-f666-475d-a1cf-7fc91aa9599c" class="bulleted-list"><li>Scalability became an issue.</li></ul><ul id="74d0ff0e-a570-46ec-855e-64a37fc07951" class="bulleted-list"><li>All new functionality as microservices (Scala, Clojure, and JRuby).</li></ul><figure id="843872c1-8109-4189-8e31-5cb5882d10ec" class="image"><a href="ASW%20Preparaci%20segon%20control%20bf24a41f685b4794b4583b5f46fce66c/Screenshot_2020-06-02_at_21.44.57.png"><img style="width:1342px" src="ASW%20Preparaci%20segon%20control%20bf24a41f685b4794b4583b5f46fce66c/Screenshot_2020-06-02_at_21.44.57.png"/></a><figcaption>SoundCloud enables its users to upload, promote, and share audio.
In 2012/2013, Scalability became an issue but due to getting burnt in the past with big refactorings, decided to do things differently this time.
All new functionality as microservices (Scala, Clojure, and JRuby). Monolith code was extracted during refactorings.</figcaption></figure><ul id="140bfab5-0073-4a88-a8a5-37c26e26b4bb" class="bulleted-list"><li>Dependencies to the monolith became a problem. To manage this issue, the services started accessing the public API of the monolith.</li></ul><ul id="527cbe01-fe1b-4d24-a585-c4cbe3ca93a3" class="bulleted-list"><li>All the application changes were turned into events - streaming.</li></ul><ul id="b859c60e-4828-4dba-81b2-c94f1f45f079" class="bulleted-list"><li>Internal API-s for the microservices.</li></ul><figure id="fd8e8da8-8ef2-44bc-89e9-9bceca132074" class="image"><a href="ASW%20Preparaci%20segon%20control%20bf24a41f685b4794b4583b5f46fce66c/Screenshot_2020-06-02_at_21.46.32.png"><img style="width:934px" src="ASW%20Preparaci%20segon%20control%20bf24a41f685b4794b4583b5f46fce66c/Screenshot_2020-06-02_at_21.46.32.png"/></a><figcaption>Dependencies to the monolith became a problem. To manage this issue, the services started accessing the public API of the monolith.</figcaption></figure><h3 id="d54f5ff9-e70f-49fe-a283-c89408f91e86" class="">Exercise: The online shop</h3><ul id="98fb20e3-197b-427e-9926-e8ebab2b8b87" class="bulleted-list"><li>User journey<figure id="dbde018b-e92d-40a5-b9cf-1fbc3d34112b" class="image"><a href="ASW%20Preparaci%20segon%20control%20bf24a41f685b4794b4583b5f46fce66c/Screenshot_2020-06-02_at_21.47.20.png"><img style="width:576px" src="ASW%20Preparaci%20segon%20control%20bf24a41f685b4794b4583b5f46fce66c/Screenshot_2020-06-02_at_21.47.20.png"/></a></figure></li></ul><ul id="12ddfc45-45f4-4f53-a065-9b5fea26e84e" class="bulleted-list"><li>break up the monolith<ul id="74db5624-b872-4bd7-96e5-aa1694b4ff9b" class="bulleted-list"><li>Imagine this online shop is built in a monolith style architecture</li></ul><ul id="19f50c4a-5ae2-4291-bd1d-14005cfb5f3b" class="bulleted-list"><li>Exercise: Identify services and their boundaries</li></ul><ul id="86090fa8-6d36-4657-83b9-2bd46830518c" class="bulleted-list"><li>The goal of this exercise is to find out how a monolith can be broken<ul id="e15cbaa8-517d-4758-933b-334e7b5a2a28" class="bulleted-list"><li>one possible solution<ul id="7fba6618-f5e5-4de6-bb04-a26d18d3282d" class="bulleted-list"><li>Business Functions<figure id="02643d5a-b630-4487-8911-a81c8f8f59e6" class="image"><a href="ASW%20Preparaci%20segon%20control%20bf24a41f685b4794b4583b5f46fce66c/Screenshot_2020-06-06_at_10.23.03.png"><img style="width:576px" src="ASW%20Preparaci%20segon%20control%20bf24a41f685b4794b4583b5f46fce66c/Screenshot_2020-06-06_at_10.23.03.png"/></a></figure></li></ul></li></ul></li></ul><ul id="f471fa27-1b5d-4455-a0bb-0f1a51c4f11d" class="bulleted-list"><li>3 services design<figure id="2c9e6afd-0edc-401b-b30d-eff4ccbc7482" class="image"><a href="ASW%20Preparaci%20segon%20control%20bf24a41f685b4794b4583b5f46fce66c/Screenshot_2020-06-06_at_10.23.47.png"><img style="width:480px" src="ASW%20Preparaci%20segon%20control%20bf24a41f685b4794b4583b5f46fce66c/Screenshot_2020-06-06_at_10.23.47.png"/></a></figure></li></ul></li></ul><div id="f0fd386b-e7fa-47d1-9388-0f5640463da3" class="column-list"><div id="3073d72e-1b4c-47b4-856f-a55514331e2d" style="width:50%" class="column"><figure id="3b56fc95-69a3-4650-b4e9-2a6b0c9a7701" class="image"><a href="ASW%20Preparaci%20segon%20control%20bf24a41f685b4794b4583b5f46fce66c/Screenshot_2020-06-06_at_10.24.22.png"><img style="width:288px" src="ASW%20Preparaci%20segon%20control%20bf24a41f685b4794b4583b5f46fce66c/Screenshot_2020-06-06_at_10.24.22.png"/></a><figcaption>1</figcaption></figure><figure id="70b5fdcf-fdf2-4008-a520-6564da6f06ad" class="image"><a href="ASW%20Preparaci%20segon%20control%20bf24a41f685b4794b4583b5f46fce66c/Screenshot_2020-06-06_at_10.24.47.png"><img style="width:384px" src="ASW%20Preparaci%20segon%20control%20bf24a41f685b4794b4583b5f46fce66c/Screenshot_2020-06-06_at_10.24.47.png"/></a><figcaption>3</figcaption></figure><figure id="a22aa3a6-23ba-4732-84c3-c6ae0ee99330" class="image"><a href="ASW%20Preparaci%20segon%20control%20bf24a41f685b4794b4583b5f46fce66c/Screenshot_2020-06-06_at_10.26.02.png"><img style="width:1472px" src="ASW%20Preparaci%20segon%20control%20bf24a41f685b4794b4583b5f46fce66c/Screenshot_2020-06-06_at_10.26.02.png"/></a><figcaption>5</figcaption></figure><figure id="fbe2b363-1c0b-4cca-914c-9f28ba2c3321" class="image"><a href="ASW%20Preparaci%20segon%20control%20bf24a41f685b4794b4583b5f46fce66c/Screenshot_2020-06-06_at_10.26.45.png"><img style="width:1472px" src="ASW%20Preparaci%20segon%20control%20bf24a41f685b4794b4583b5f46fce66c/Screenshot_2020-06-06_at_10.26.45.png"/></a><figcaption>7</figcaption></figure></div><div id="d6252f63-6f48-4415-9e6a-cf056a6d756c" style="width:50%" class="column"><figure id="79a39802-008b-4d57-a276-1cef0f586a9a" class="image"><a href="ASW%20Preparaci%20segon%20control%20bf24a41f685b4794b4583b5f46fce66c/Screenshot_2020-06-06_at_10.24.38.png"><img style="width:384px" src="ASW%20Preparaci%20segon%20control%20bf24a41f685b4794b4583b5f46fce66c/Screenshot_2020-06-06_at_10.24.38.png"/></a><figcaption>2</figcaption></figure><figure id="a98ab076-2e67-4796-901c-d74b61b0875f" class="image"><a href="ASW%20Preparaci%20segon%20control%20bf24a41f685b4794b4583b5f46fce66c/Screenshot_2020-06-06_at_10.25.36.png"><img style="width:1472px" src="ASW%20Preparaci%20segon%20control%20bf24a41f685b4794b4583b5f46fce66c/Screenshot_2020-06-06_at_10.25.36.png"/></a><figcaption>4</figcaption></figure><figure id="c3cd9ead-a7e3-4e2d-8d8c-b70851fe4afa" class="image"><a href="ASW%20Preparaci%20segon%20control%20bf24a41f685b4794b4583b5f46fce66c/Screenshot_2020-06-06_at_10.26.27.png"><img style="width:1472px" src="ASW%20Preparaci%20segon%20control%20bf24a41f685b4794b4583b5f46fce66c/Screenshot_2020-06-06_at_10.26.27.png"/></a><figcaption>6</figcaption></figure><figure id="f27f2b01-ea12-4923-9162-122d7745098c" class="image"><a href="ASW%20Preparaci%20segon%20control%20bf24a41f685b4794b4583b5f46fce66c/Screenshot_2020-06-06_at_10.27.06.png"><img style="width:1516px" src="ASW%20Preparaci%20segon%20control%20bf24a41f685b4794b4583b5f46fce66c/Screenshot_2020-06-06_at_10.27.06.png"/></a><figcaption>8</figcaption></figure><p id="7f322513-180d-4200-b898-bb2c86a886b7" class="">
</p></div></div><ul id="196b5e7e-0aae-4fc5-aace-0959164be556" class="bulleted-list"><li>Exercise<ul id="bc3009de-1b4f-44f4-9d1e-997469a7e761" class="bulleted-list"><li>If you want to practice how to break up a monolith into microservices, take a look at these repositories: <ul id="571cd3f1-2bc5-4820-bc31-bd7fee5100bd" class="bulleted-list"><li><a href="https://github.com/xebia/microservices-breaking-up-a-monolith">https://github.com/xebia/microservices-breaking-up-a-monolith</a></li></ul><ul id="f008324e-0a92-42d9-9702-5a724aa4dd00" class="bulleted-list"><li><a href="https://github.com/micro-example/monolith-to-microservices/tree/master/microservices">https://github.com/micro-example/monolith-to-microservices/tree/master/microservices</a></li></ul><ul id="3b18f269-8c66-4c54-8c85-4e36d692fbef" class="bulleted-list"><li><a href="https://github.com/lasalazarr/guide-monolithic-to-microservices">https://github.com/lasalazarr/guide-monolithic-to-microservices</a></li></ul></li></ul></li></ul><hr id="712f6acd-0fbc-46e5-9aa7-0296079b3af6"/><h2 id="6f93f59c-edba-4670-aae8-2b66ec17bd89" class="">(4) Summary</h2><p id="bb8ca570-d41d-4eb0-a9a7-486228e72ae8" class="">Pay attention to what are the actual problems of your system. </p><div id="5de6ff64-afdb-4224-984b-ab8d8ca9500a" class="column-list"><div id="4d23a8ef-a411-45e2-a167-bba951341d30" style="width:50%" class="column"><p id="291c4230-039d-4477-ae1f-61949833af7f" class="">Microservices help in particular cases:</p><p id="22f90d0f-c297-4855-aa14-8fd4c68ab102" class="">
</p></div><div id="db05e6a2-c5c5-462f-a002-b59c48a2db36" style="width:50%" class="column"><ul id="84f01bb5-0e1e-42aa-bf37-7ad80d7f780b" class="bulleted-list"><li>Scalability and elasticity</li></ul><ul id="75b3507f-ba9d-4d27-ac28-1b0f58bd62de" class="bulleted-list"><li>Strong module boundaries</li></ul><ul id="b563fd32-f089-4f4f-9937-c8c78cfd8b1e" class="bulleted-list"><li>Autonomous teams</li></ul></div></div><p id="326c1fe7-b51d-4820-bf9a-357b0487e83b" class="">Don‚Äôt make microservices your first choice, they are tough to get right!</p><p id="1854b688-9a4b-4ed3-b472-7426c9291af7" class="">Make sure you are operationally ready for distributed systems.</p><p id="8c36b788-57ee-473c-8679-b339eb388665" class="">
</p><p id="942d9d7f-d10d-4155-8f93-58df93ddbc7f" class="">
</p><hr id="d6fa8daf-3ef3-4cd5-8985-917c26e984f9"/><p id="567924b8-852c-4c0d-b46a-8674590ece91" class="">
</p><p id="77c458cd-d73d-4f21-9ddb-a95461915d83" class="">
</p><p id="23416e3b-6f65-4b35-875e-54a2c98bfe02" class="">
</p><h1 id="d2ef3c30-0b7b-44c4-8583-4440d3721e75" class="">2a part</h1><figure class="block-color-gray_background callout" style="white-space:pre-wrap;display:flex" id="e242e5d5-e48e-42a5-9e59-9fa4c5c10a9e"><div style="font-size:1.5em"><span class="icon">üìÉ</span></div><div style="width:100%"><a href="https://atenea.upc.edu/mod/lti/view.php?id=2385824"><strong>Exercici de Disseny</strong></a>¬†(7 punts sobre 10).

Constar√† de les parts seg√ºents:
- Apartat a, Disseny de serveis SOAP amb RPC API + Request/Response + DTO: 1.5 punts
- Apartat b, Disseny de serveis SOAP amb RPC API + Request/Acknowledge/Poll + DTO: 0.75 punts
- Apartat c, Disseny de serveis REST - Especifiaci√≥ OpenAPI de les operacions: 4 punts
- Apartat d, Disseny d&#x27;un client que consumeixi el servei REST de l&#x27;apartat c: 0.75 punts</div></figure><p id="de84c7fb-116c-45c9-81e1-1bd261a29e68" class="">
</p><h2 id="128a80f6-5756-4762-b3e9-1ae45ece1b49" class="">201819q2_control_2</h2><h3 id="cdf3207b-bc8a-45cd-8f6a-b0da8a1ba99f" class="">Enunciat</h3><p id="2e9fbf27-5c2a-42da-82ec-513298e86001" class="">Considereu un sistema de venda de tickets per a events. Suposeu que els possibles clients (programes) dels serveis que dissenyareu ho faran des d‚Äôuna intranet segura i que, per tant, no cal considerar el tema de l‚Äôautenticaci√≥/ autoritzaci√≥. El diagrama de classes que en descriu el domini √©s el seg√ºent:</p><figure id="1b022093-4e9f-492a-8388-627369d7bb16" class="image"><a href="ASW%20Preparaci%20segon%20control%20bf24a41f685b4794b4583b5f46fce66c/Screenshot_2020-06-06_at_10.36.32.png"><img style="width:432px" src="ASW%20Preparaci%20segon%20control%20bf24a41f685b4794b4583b5f46fce66c/Screenshot_2020-06-06_at_10.36.32.png"/></a></figure><p id="94c89af3-c678-4525-b27d-46b6ff9c0b0c" class="">Caldr√† dissenyar els serveis que permetin implementar les 5 operacions seg√ºents:</p><ol id="d82970b2-80a4-4d34-a018-d2ccee3dddaf" class="numbered-list" start="1"><li>Consultar la info (tots els atributs) d‚Äôun PurchaseOrder concret. Caldr√† incloure tamb√© els atributs de tots els tickets que en formen part, aix√≠ com tamb√© el price i el code del TicketType i el name i l‚Äôstart_time de l‚ÄôEvent corresponents.</li></ol><ol id="979471ef-3d48-4ea6-a223-ff4713f5ff01" class="numbered-list" start="2"><li>Consultar els events que comencen despr√©s d‚Äôuna data determinada i obligat√≤ria. Hi ha d‚Äôhaver tamb√© la possibilitat de filtrar-los perqu√® acabin abans d‚Äôuna certa data. Per cada Event, cal retornar tots els seus atributs aix√≠ com els dels seus TicketTypes. Els events es retornaran ordenats per start_time asc.</li></ol><ol id="39e566e3-b1ff-4110-83b5-9ff3a126569a" class="numbered-list" start="3"><li>Eliminar un determinat TicketType. Nom√©s es pot fer si sold_tickets == 0.</li></ol><ol id="ce1e40b1-b519-4465-b5a5-beb6ac8183c8" class="numbered-list" start="4"><li>Canviar el name_on_ticket d‚Äôun Ticket determinat. Es pot fer fins a 24 hores abans que comenci l‚ÄôEvent. El sistema ha de regenerar el qr_code.</li></ol><ol id="377fd363-54a2-4203-af94-c4d0bf5b668e" class="numbered-list" start="5"><li>Crear una PurchaseOrder amb els seus Tickets corresponents. Les dades que s‚Äôhan de proporcionar s√≥n: l‚Äôemail del comprador i una llista de name_on_tickets amb la refer√®ncia al TicketType que es vol per cadascun. L‚Äôoperaci√≥ nom√©s tindr√† √®xit si hi ha disponibilitat en els TicketType que es demanen. En aquest cas, el sistema retornar√† la mateixa info que l‚Äôoperaci√≥ 1. Els atributs locator, total_price i create_at de PurchaseOrder i els number i qr_code dels Tickets s√≥n generats pel sistema. Un TicketType t√© disponibilitat mentre tickets_for_sale &gt; sold_tickets &amp; event.start_time &gt; (System.current_time + 24h).</li></ol><p id="2e978ae7-6932-43f1-93e7-87c391708deb" class="">
</p><p id="94094399-ee11-45b4-987d-c1943c10a2e4" class="">MeÃÅs concretament,</p><p id="b5fbbe7c-c89f-4d44-a8b5-9f03ad4efd94" class="">a) <strong>[2 punts] </strong>Dissenyeu un servei web SOAP que inclogui les <strong>4 primeres </strong>operacions. Heu d‚Äôutilitzar els patrons RPC API i DTO. Per a cada operacioÃÅ cal definir els paraÃÄmetres d‚Äôentrada i el resultat. Utilitzeu el mode d‚ÄôinteraccioÃÅ <em>Request/Response</em>.</p><p id="2513faf7-ddeb-4a6d-88de-4694386b9a95" class="">b) <strong>[1 punt] </strong>Dissenyeu un servei web SOAP utilitzant el mode d‚ÄôinteraccioÃÅ <em>Request/Acknowledge/Poll </em>per a l‚Äô<strong>operacioÃÅ 5</strong>. Heu d‚Äôutilitzar els patrons RPC API i DTO.</p><p id="cdc88bcc-ac04-43eb-83fe-9ad15615664e" class="">c) <strong>[3 punts] </strong>Dissenyeu un servei web REST per a les <strong>5 operacions</strong>. Per descriure cada operacioÃÅ caldraÃÄ omplir la plantilla que teniu a continuacioÃÅ:</p><figure id="89c601e1-3c84-4869-a581-ce10e8813e24" class="image"><a href="ASW%20Preparaci%20segon%20control%20bf24a41f685b4794b4583b5f46fce66c/Screenshot_2020-06-06_at_10.38.19.png"><img style="width:480px" src="ASW%20Preparaci%20segon%20control%20bf24a41f685b4794b4583b5f46fce66c/Screenshot_2020-06-06_at_10.38.19.png"/></a></figure><p id="801b5dd0-ea76-48a5-98d8-a9c128de661c" class="">d)<strong> [1 punt] </strong>Definiu l‚Äôescenari que utilitzi el servei web REST anterior i que permeti comprar per a la ‚ÄúMavis Batey‚Äù, la ‚ÄúJane Fawcett‚Äù i la ‚ÄúJean Valentine‚Äù els tickets m√©s cars disponibles per al primer Event que comenci despr√©s de l‚Äô11 de setembre de 2019.</p><h3 id="28792454-127c-44dc-ace1-1b3fdc97797e" class="">Soluci√≥</h3><p id="a58bc88e-703d-4589-b523-c265ff6ed1ce" class="">a) Servei web SOAP per a les 4 primeres operacions</p><ul id="670819fb-eff4-4d49-9e06-69059e2e9c3a" class="bulleted-list"><li><code>getPOByLocator</code><pre id="ebe2d34b-0d44-4bfd-9398-49f324615fa8" class="code"><code>// input
getPOByLocatorReq = 
&lt;
	locator: String
&gt;</code></pre><pre id="87ec530d-907f-45c8-b375-32c578c63814" class="code"><code>// output
getPOByLocatorRes = 
&lt;
	locator: String,
	email: String,
	create_at: Time,
	total_price: Decimal, 
	tickets: Set(TicketInfo)
&gt; 
	where TicketInfo = 
	&lt;
		number: Integer,
		name_on_ticket: String, 
		qur_code: Image, 
		tt_code: String,
		tt_price: Decimal, 
		event_name: String event_start_time: Time
	&gt;</code></pre></li></ul><ul id="51021031-36ba-4717-b798-092979d28c5c" class="bulleted-list"><li><code>getEvents</code><pre id="e0cbfefe-6de5-4652-aefc-9c327439771a" class="code"><code>// input
getEventsReq =
&lt;
	since_date: Date, 
	until_date: Date [0..1]
&gt;</code></pre><pre id="f2f0b977-f3bd-4e22-872c-de623b0435be" class="code"><code>// output
getEventsRes = 
&lt;
	Set(EventInfo)
&gt; 
	where EventInfo=  
	&lt;
		name: String,
		description: String,
		start_time: Time,
		end_time: Time,
		ticket_types: Set(TicketType)
	&gt; 
		where TicketType = 
		&lt;
			code: String
			price: Decimal, 
			tickets_for_sale: Integer 
			sold_tickets: Integer
		&gt;</code></pre></li></ul><ul id="a39d0e03-21c7-448f-9c94-6428d9b3a415" class="bulleted-list"><li><code>deleteTicketType</code><pre id="ceb8b17b-2f9a-41e4-8708-c2334b82d023" class="code"><code>// input
deleteTicketTypeReq = 
&lt;
	event_name: String,
	code: Time
&gt;</code></pre><pre id="68bc88a0-48a0-4525-9e30-8c234f704a0b" class="code"><code>// output
deleteTicketTypeRes = 
&lt;
	code: Integer,
	message: String
&gt;</code></pre></li></ul><ul id="274626a7-ac80-43af-86c2-8549e36d2bae" class="bulleted-list"><li><code>changeTicket</code><pre id="7e8fe4eb-55ad-4f9e-a121-8a72fa0f906a" class="code"><code>// input
changeTicketReq = 
&lt;
	po_locator: String,
	number: Integer, 
	new_name_on_ticket: String
&gt;</code></pre><pre id="441b1c18-39b2-49b7-a905-cc38206551ea" class="code"><code>// output
changeTicketRes = 
&lt;
	code: Integer,
	message: String,
	new_qr_code: Image [0..1]
&gt;</code></pre></li></ul><p id="58c96b54-ff24-42a0-9efa-8c8a79dd174c" class="">
</p><p id="88f2c064-802f-4521-967d-0e9c251315e6" class="">b) Servei web SOAP utilitzant el mode d‚Äôinteracci√≥ Request/Acknowledge/Poll per a l‚Äôoperaci√≥ de reprogramar una Lesson:</p><ul id="ffeb4c9b-5a50-4148-8c03-7cca7a20f4ee" class="bulleted-list"><li><code>createPO</code><pre id="0af5606c-2983-4b5b-87ba-4e9a1d00f15f" class="code"><code>// input
createPOReq = 
&lt;
	email: String,
	tickets_for: Set(TicketReq)
&gt;
	where TicketReq = 
	&lt;
		name_on_ticket: String,
		tt_event_name: String,
		tt_code: String
	&gt;</code></pre><pre id="25ad5a8c-99dd-4137-a96a-f2d270c31f87" class="code"><code>// output
createPOAck = 
&lt;
	id: String
&gt;</code></pre></li></ul><ul id="d08bdc99-6316-43c9-b5b3-7d85f4ec52b3" class="bulleted-list"><li><code>getResults</code><pre id="24f1ee4b-b382-4991-b3ec-d2baaa46e6e0" class="code"><code>// input
createPOAck = 
&lt;
	id: String
&gt;</code></pre><pre id="92987028-d231-48bd-844d-fb277cfea47b" class="code"><code>// output
createPORes = 
&lt;
	code: Integer,
	message: String, 
	getPOByLocatorRes [0..1]
&gt;</code></pre></li></ul><p id="d6f29bc6-344c-4aa2-93ab-f2163c9962be" class="">
</p><p id="95740d80-7592-43cf-a806-f9fa47477fde" class="">c) Api REST per a les 5 operacions</p><figure id="5df06e04-0c87-414f-b1ab-a598667fa256" class="image"><a href="ASW%20Preparaci%20segon%20control%20bf24a41f685b4794b4583b5f46fce66c/Screenshot_2020-06-06_at_10.50.23.png"><img style="width:480px" src="ASW%20Preparaci%20segon%20control%20bf24a41f685b4794b4583b5f46fce66c/Screenshot_2020-06-06_at_10.50.23.png"/></a></figure><figure id="a60e4ca7-a4a9-40ec-b005-aa1122c92063" class="image"><a href="ASW%20Preparaci%20segon%20control%20bf24a41f685b4794b4583b5f46fce66c/Screenshot_2020-06-06_at_10.50.36.png"><img style="width:480px" src="ASW%20Preparaci%20segon%20control%20bf24a41f685b4794b4583b5f46fce66c/Screenshot_2020-06-06_at_10.50.36.png"/></a></figure><figure id="93542696-2041-4d91-9051-a79437e7da1a" class="image"><a href="ASW%20Preparaci%20segon%20control%20bf24a41f685b4794b4583b5f46fce66c/Screenshot_2020-06-06_at_10.50.52.png"><img style="width:480px" src="ASW%20Preparaci%20segon%20control%20bf24a41f685b4794b4583b5f46fce66c/Screenshot_2020-06-06_at_10.50.52.png"/></a></figure><figure id="cce392dc-b0e6-4b97-8e5a-190ec78f56f1" class="image"><a href="ASW%20Preparaci%20segon%20control%20bf24a41f685b4794b4583b5f46fce66c/Screenshot_2020-06-06_at_10.51.11.png"><img style="width:480px" src="ASW%20Preparaci%20segon%20control%20bf24a41f685b4794b4583b5f46fce66c/Screenshot_2020-06-06_at_10.51.11.png"/></a></figure><figure id="55e33953-3592-4eef-9be5-7545ee5f78f7" class="image"><a href="ASW%20Preparaci%20segon%20control%20bf24a41f685b4794b4583b5f46fce66c/Screenshot_2020-06-06_at_10.51.26.png"><img style="width:480px" src="ASW%20Preparaci%20segon%20control%20bf24a41f685b4794b4583b5f46fce66c/Screenshot_2020-06-06_at_10.51.26.png"/></a></figure><p id="45835560-39b9-4597-895a-6769891a859c" class="">d) Client</p><ol id="774229de-28e1-4e11-b301-c4aa24f8375b" class="numbered-list" start="1"><li> Obtinc els events que comencen a partir de 2019-09-11:
<code>GET /api/events?since_date=2019-09-11</code></li></ol><ol id="5f08b3cc-f7a3-4f06-9077-bdaac42eeda9" class="numbered-list" start="2"><li>Agafo el primer event de la llista, amb <code>name = ‚ÄúSE 2019‚Äù</code> i inspecciono els seus
<code>TicketTypes</code>. El TicketType amb <code>code = ‚ÄúPremium‚Äù</code> eÃÅs el meÃÅs car i encara teÃÅ
disponibilitat per als 3 tickets que necessito. <p id="6b48d048-3485-47aa-9850-d39e3729e94b" class="">Per tant, faig la crida seguÃàent:</p><pre id="e365f7b4-8bf0-48d7-9d56-ed6075c205c7" class="code"><code>POST /api/puchase_orders
{ 
	‚Äúemail‚Äù: ‚Äúfarre@essi.upc.edu‚Äù,
	‚Äútickets_for‚Äù:
	[
		{ 
			‚Äúname_on_ticket‚Äù: ‚ÄúMavis Batey‚Äù, 
			‚Äútt_event_name‚Äù: ‚ÄúSE 2019‚Äù, 
			‚Äútt_code‚Äù: Premium‚Äù
		},
		{
			‚Äúname_on_ticket‚Äù: ‚ÄúJane Fawcett‚Äù, 
			‚Äútt_event_name‚Äù: ‚ÄúSE 2019‚Äù, 
			‚Äútt_code‚Äù: ‚ÄúPremium‚Äù
		},
		{
			‚Äúname_on_ticket‚Äù: ‚ÄúJean Valentine‚Äù,
			‚Äútt_event_name‚Äù: ‚ÄúSE 2019‚Äù,
			‚Äútt_code‚Äù: ‚ÄúPremium‚Äù
		}
	]
}</code></pre></li></ol><p id="84095336-f2c7-46a4-a24b-434c261ff46f" class="">
</p><h3 id="cf09e4bf-5f25-444e-8b29-fc5f6f3bb784" class="">YAML</h3><pre id="8e5bb750-0923-4456-9d72-2efc9c8768aa" class="code"><code>openapi: 3.0.1
info:
  version: 1.0.0
  title: 201819q2_control_2
  description: 
		&quot;Versi√≥ OpenAPI del l&#x27;apartat c de l&#x27;exercici del 
		**201819q2_control_2**. Se suposa que els possibles 
		clients (programes) que usen aqueste crides ho fan 
		des d‚Äôuna intranet segura i que, per tant, no cal 
		considerar el tema de l‚Äôautenticaci√≥/autoritzaci√≥&quot;
servers:
  - url: &#x27;https://aswfib.free.beeceptor.com/api/&#x27;
paths:
  /purchase_orders/{locator}:
    get:
      tags:
      - purchase_orders
      summary: Consultar la info d‚Äôun PurchaseOrder concret
      parameters:
      - in: path
        name: locator
        schema:
          type: string
        required: true
      responses:
        200:
          description: successful operation
          content:
            application/json:
              schema:
                $ref: &#x27;#/components/schemas/PurchaseOrder&#x27;
        404:
          description: &#x27;Error: Not Found&#x27;
          content:
            application/json:
              schema:
                $ref: &#x27;#/components/schemas/ErrorResult&#x27;
              examples:
                errorExample:
                  $ref: &#x27;#/components/examples/error404_gi&#x27;
  /purchase_orders:
    post:
      tags:
      - purchase_orders
      summary: Crear una PurchaseOrder
      requestBody:
        content:
          application/json:
            schema:
              $ref: &#x27;#/components/schemas/NewPO&#x27;
      responses:
        201:
          description: &quot;PurchaseOrder created successfully&quot;
          headers:
            Location:
              schema:
                type: string
                format: uri
                example: &quot;https://aswfib.free.beeceptor.com/api/tweets/4865651&quot;
          content:
            application/json:
              schema:
                $ref: &#x27;#/components/schemas/PurchaseOrder&#x27;
        400:
          description: &#x27;Error: Bad Request&#x27;
          content:
            application/json:
              schema:
                $ref: &#x27;#/components/schemas/ErrorResult&#x27;
              examples:
                errorExample:
                  $ref: &#x27;#/components/examples/error400_post&#x27;
        409:
          description: &#x27;Error: Conflict&#x27;
          content:
            application/json:
              schema:
                $ref: &#x27;#/components/schemas/ErrorResult&#x27;
              examples:
                errorExample:
                  $ref: &#x27;#/components/examples/error409_post&#x27;
  /events:
    get:
      tags:
      - events
      summary: Consultar events
      parameters:
      - in: query
        name: since_date
        schema:
          type: string
          format: date
        required: true
        example: &quot;2019-08-11&quot;
      - in: query
        name: until_date
        schema:
          type: string
          format: date
        required: false
        example: &quot;2019-08-31&quot;  
      responses:
        200:
          description: successful operation
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: &#x27;#/components/schemas/Event&#x27;
        400:
          description: &#x27;Error: Bad Request&#x27;
          content:
            application/json:
              schema:
                $ref: &#x27;#/components/schemas/ErrorResult&#x27;
              examples:
                errorExample:
                  $ref: &#x27;#/components/examples/error400_gc&#x27;
  /events/{name}/ticket_types/{code}:
    delete:
      tags:
      - ticket_types
      summary: Eliminar un TicketType concret
      parameters:
      - in: path
        name: name
        schema:
          type: string
        required: true
      - in: path
        name: code
        schema:
          type: string
        required: true
      responses:
        204:
          description: &quot;TicketType removed&quot;
          content:
            application/json: {}
        404:
          description: &#x27;Error: Not Found&#x27;
          content:
            application/json:
              schema:
                $ref: &#x27;#/components/schemas/ErrorResult&#x27;
              examples:
                errorExample:
                  $ref: &#x27;#/components/examples/error404_delete&#x27;
        409:
          description: &#x27;Error: Conflict&#x27;
          content:
            application/json:
              schema:
                $ref: &#x27;#/components/schemas/ErrorResult&#x27;
              examples:
                errorExample:
                  $ref: &#x27;#/components/examples/error409_delete&#x27;
  /purchase_order/{locator}/tickets/{number}:
    put:
      tags:
      - tickets
      summary: Canviar el name_on_ticket d‚Äôun ticket
      parameters:
      - in: path
        name: locator
        schema:
          type: string
        required: true
      - in: path
        name: number
        schema:
          type: integer
        required: true
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                new_name_on_ticket:
                  type: string
                  example: &quot;M. Rajoy&quot;
      responses:
        200:
          description: &quot;Name on ticket changed&quot;
          content:
            application/json:
              schema:
                $ref: &#x27;#/components/schemas/Ticket&#x27;
        400:
          description: &#x27;Error: Bad Request&#x27;
          content:
            application/json:
              schema:
                $ref: &#x27;#/components/schemas/ErrorResult&#x27;
              examples:
                errorExample:
                  $ref: &#x27;#/components/examples/error400_put&#x27;
        404:
          description: &#x27;Error: Not Found&#x27;
          content:
            application/json:
              schema:
                $ref: &#x27;#/components/schemas/ErrorResult&#x27;
              examples:
                errorExample:
                  $ref: &#x27;#/components/examples/error404_put&#x27;
        409:
          description: &#x27;Error: Conflict&#x27;
          content:
            application/json:
              schema:
                $ref: &#x27;#/components/schemas/ErrorResult&#x27;
              examples:
                errorExample:
                  $ref: &#x27;#/components/examples/error409_put&#x27;
components:
  schemas:
    TicketType:
      type: object
      properties:
        code:
          type: string
          example: &quot;VIP&quot;
        price:
          type: number
          format: float
          example: 50.00
        tickets_for_sale:
          type: integer
          example: 100
        sold_tickets:
          type: integer
          example: 54
    Event:
      type: object
      properties:
        name:
          type: string
          example: &quot;Wildest Party 2019&quot;
        description:
          type: string
          example: &quot;The wildest party ever&quot;
        start_time:
          type: string
          format: date-time
        end_time:
          type: string
          format: date-time
        ticket_types:
          type: array
          items:
            $ref: &#x27;#/components/schemas/TicketType&#x27;
    Ticket: 
      type: object
      properties:
        number:
            type: integer
            example: 1
        name_on_ticket:
          type: string
          example: &quot;M. Rajoy&quot;
        qr_code:
          type: string
          example: &quot;data:image/png;base64,iVB...ggg==&quot;
        tt_code:
          type: string
          example: &quot;VIP&quot;
        tt_price:
          type: number
          format: float
          example: 50.00
        event_name:
          type: string
          example: &quot;Wildest Party 2019&quot;
        event_start_time:
          type: string
          format: date-time
    PurchaseOrder:
      type: object
      properties:
        locator:
            type: string
            example: &quot;LMER45S&quot;
        email:
          type: string
          format: email
          example: espe@ppm.com
        created_at:
          type: string
          format: date-time
        total_price:
          type: number
          format: float
          example: 143.50
        tickets:
          type: array
          items:
            $ref: &#x27;#/components/schemas/Ticket&#x27;
    TicketReq:
      type: object
      required:
      - name_on_ticket
      - tt_event_name
      - tt_code
      properties:
        name_on_ticket:
          type: string
          example: &quot;M. Rajoy&quot;
        tt_event_name:
          type: string
          example: &quot;Wildest Party 2019&quot;
        tt_code:
          type: string
          example: &quot;VIP&quot;
    NewPO:
      type: object
      required:
      - email
      - tickets_for
      properties:
        email:
          type: string
          format: email
          example: espe@ppm.com
        tickets_for:
          type: array
          items:
            $ref: &#x27;#/components/schemas/TicketReq&#x27;
    ErrorResult:
      type: object
      properties:
        status:
          type: integer
          enum: [400, 401, 403, 404, 409]
        error: 
          type: string
          enum: 
					[
						&quot;Bad Request&quot;, 
						&quot;Unauthorized&quot;, 
						&quot;Forbidden&quot;, 
						&quot;Not Found&quot;, 
						&quot;Conflict&quot;
					]
        message: 
          type: string
  examples:
    error400_gc:
      value:
        status: 400
        error: &quot;Bad Request&quot;
        message: &quot;Incorrect parameters&quot;
    error400_put:
      value:
        status: 400
        error: &quot;Bad Request&quot;
        message: &quot;Missing parameter new_name_on_ticket&quot;
    error400_post:
      value:
        status: 400
        error: &quot;Bad Request&quot;
        message: &quot;Missing tt_code in one ticket&quot;
    error401:
      value:
        status: 401
        error: &quot;Unauthorized&quot;
        message: &quot;You provided no api key (X-API-KEY Header)&quot;
    error403:
      value:
        status: 403
        error: &quot;Forbidden&quot;
        message: &quot;Your api key (X-API-KEY Header) is not valid&quot;
    error404_gi:
      value:
        status: 404
        error: &quot;Not Found&quot;
        message: &quot;No PurchaseOrder with this locator&quot;
    error404_delete:
      value:
        status: 404
        error: &quot;Not Found&quot;
        message: &quot;No TicketType for this event name and code&quot;
    error404_put:
      value:
        status: 404
        error: &quot;Not Found&quot;
        message: &quot;No ticket for this PO locator and number&quot;
    error409_delete:
      value:
        status: 409
        error: &quot;Conflict&quot;
        message: &quot;This TicketType has some tickets sold&quot;
    error409_put:
      value:
        status: 409
        error: &quot;Conflict&quot;
        message: &quot;It is too late for changes in the ticket&quot;
    error409_post:
      value:
        status: 409
        error: &quot;Conflict&quot;
        message: &quot;Sorry, there is no availability for all the requested tickets&quot;</code></pre><p id="9cb572db-5c2a-4fb2-9805-2efa52381a01" class="">
</p><h2 id="39669f49-53e6-4aa0-9008-46c602f723c0" class="">201819q1_control_2</h2><h3 id="5ec6e45e-6822-4b03-8536-ba6132bd87ce" class="">Enunciat</h3><p id="6b5e4524-ce07-40d9-8f3b-936e65b117c1" class="">Considereu un sistema per programar lli√ßons d‚Äôidiomes. Suposeu que els possibles clients (programes) dels serveis que dissenyareu ho faran des d‚Äôuna intranet segura i que, per tant, no cal considerar el tema de l‚Äôautenticaci√≥/ autoritzaci√≥. El diagrama de classes que en descriu el domini √©s el seg√ºent:</p><figure id="c69658da-e1ad-48a0-81f8-635cba053aa3" class="image"><a href="ASW%20Preparaci%20segon%20control%20bf24a41f685b4794b4583b5f46fce66c/Screenshot_2020-06-06_at_14.01.14.png"><img style="width:384px" src="ASW%20Preparaci%20segon%20control%20bf24a41f685b4794b4583b5f46fce66c/Screenshot_2020-06-06_at_14.01.14.png"/></a></figure><p id="a79ecb59-0e12-48bd-ad78-27f416fe1c70" class="">
</p><p id="df7092a6-b0e2-4df6-9dd1-7db92cf985cf" class="">CaldraÃÄ dissenyar els serveis que permetin implementar les 5 operacions seguÃàents:</p><ol id="4ec60b7d-0b15-4d47-b498-2cfcba6eb0c1" class="numbered-list" start="1"><li>Consultar la info (tots els atributs) d‚Äôun <em>Teacher </em>concret. CaldraÃÄ incloure tambeÃÅ la info de tots els seus <em>TimeSlots </em>lliures. Un <em>TimeSlot </em>es considera lliure si no estaÃÄ associat a cap <em>Lesson </em>i comencÃßa com a miÃÅnim 24 hores meÃÅs tard de l‚Äôhora actual del sistema.</li></ol><ol id="03348331-7de6-4f3f-976f-e0613aa642dd" class="numbered-list" start="2"><li>Consultar les <em>Lessons </em>que comencen dins d‚Äôun interval de temps determinat (start_time &lt; end_time) i obligatori. Hi ha d‚Äôhaver tamb√© la possibilitat de filtrar-les per Teacher, Student i/o status. Per cada Lesson, cal retornar tots els seus atributs aix√≠ com els de l‚ÄôStudent i TimeSlot corresponents, i tamb√© el name del Teacher.</li></ol><ol id="7d7eab82-78eb-4ff7-ab6e-1d2ef7736695" class="numbered-list" start="3"><li>Eliminar un determinat TimeSlot. Cal que no estigui associat a cap Lesson.</li></ol><ol id="4adec717-552f-46f1-b5d9-cca0d7c46990" class="numbered-list" start="4"><li>Programar una nova <em>Lesson</em>. Cal que el <em>TimeSlot </em>estigui lliure en aquell moment. El <em>number </em>el genera el sistema i l‚Äô<em>status </em>inicial eÃÅs <em>scheduled</em>.</li></ol><ol id="01cd177b-df08-4e11-8c33-f4204953161c" class="numbered-list" start="5"><li>Reprogramar una <em>Lesson</em>: s‚Äôassocia un altre <em>TimeSlot </em>a la <em>Lesson</em>. Cal que aquest sigui un <em>TimeSlot </em>lliure del mateix <em>Teacher </em>i que la <em>Lesson </em>encara estigui en estat <em>scheduled</em>.</li></ol><p id="9f5eb6d2-1b03-4a3e-a9ac-672200294398" class="">MeÃÅs concretament,</p><p id="1f2485b1-ef18-428b-92c8-d52f56da0894" class="">a) <strong>[2 punts] </strong>Dissenyeu un servei web SOAP que inclogui les <strong>4 primeres </strong>operacions. Heu d‚Äôutilitzar els patrons RPC API i DTO. Per a cada operacioÃÅ cal definir els paraÃÄmetres d‚Äôentrada i el resultat. Utilitzeu el mode d‚ÄôinteraccioÃÅ <em>Request/Response</em>.</p><p id="9a9dbcc2-18dc-4e09-a96b-8c1187bdfac3" class="">b) <strong>[1 punt] </strong>Dissenyeu un servei web SOAP utilitzant el mode d‚ÄôinteraccioÃÅ <em>Request/Acknowledge/Poll </em>per a l‚ÄôoperacioÃÅ de <strong>reprogramar una </strong><em><strong>Lesson</strong></em>. Heu d‚Äôutilitzar els patrons RPC API i DTO.</p><p id="d9fcf1be-538e-4353-ad25-8f9089d7b794" class="">c) <strong>[3 punts] </strong>Dissenyeu un servei web REST per a les <strong>5 operacions</strong>. Per descriure cada operacioÃÅ caldraÃÄ omplir la plantilla que teniu a continuacioÃÅ:</p><figure id="b823d2c1-0458-428e-a6a7-03e20ceb9347" class="image"><a href="ASW%20Preparaci%20segon%20control%20bf24a41f685b4794b4583b5f46fce66c/Screenshot_2020-06-06_at_14.03.13.png"><img style="width:528px" src="ASW%20Preparaci%20segon%20control%20bf24a41f685b4794b4583b5f46fce66c/Screenshot_2020-06-06_at_14.03.13.png"/></a></figure><p id="e240317e-47bd-43e8-b5cf-52e59582bb24" class="">d) <strong>[1 punt]</strong> Definiu l‚Äôescenari que utilitzi el servei web REST anterior i que permeti eliminar els TimeSlots lliures del Teacher amb name ‚ÄúRance‚Äù que havien de comen√ßar durant el divendres 11 de gener de 2019.</p><h3 id="09f6ebc0-4f51-4894-8b44-f027e590c8d7" class="">Soluci√≥</h3><p id="f4e60433-15c2-4579-808a-af63a1b46e7d" class="">a) Servei web SOAP per a les 4 primeres operacions</p><ul id="a762907c-b5a7-4a59-a9b2-9f208e3b3405" class="bulleted-list"><li><code>getTeacherByName</code><pre id="c7b545da-9f23-4fd5-b824-a1bb39b72497" class="code"><code>//input
getTeacherByNameReq = 
&lt;
	name: String
&gt;</code></pre><pre id="e9a6f28d-32fd-4370-ae89-fcb94639e980" class="code"><code>//output
getTeacherByNameRes = 
&lt;
	name: String,
	language: String [1..*], 
	free_slots: TimeSlot [*]
&gt;
	where TimeSlot = 
	&lt;
		starts_at: Time, 
		type: {normal, premium}
	&gt;</code></pre></li></ul><ul id="f2c3d70c-f956-4acf-86b0-5320241c2d01" class="bulleted-list"><li><code>getLessons</code><pre id="b7bdd01a-112e-4198-aa8b-5f0f53fa9c2d" class="code"><code>//input
getLessonsReq = 
&lt;
	interval: TimeInterval,
	teacher_name: String [0..1], 
	student_email: String [0..1], 
	status: {scheduled, ...} [0..1] 
&gt;
	where TimeInterval = 
	&lt;
		start_time: Time, 
		end_time: Time
	&gt;</code></pre><pre id="f858f067-a052-4815-854c-d2b18525d8cb" class="code"><code>//output
getLessonsRes = 
&lt;
	Set(InfoReservation)
&gt;
	where InfoReservation = 
	&lt;
		number: Integer,
		status: {pending, ...},
		teacher_comments: String[0..1],
		student_comments: String[0..1],
		student: 
		&lt;
			name: String, 
			email:String
		&gt;,
	 slot: TimeSlot,
		teacher_name: String
	&gt;</code></pre></li></ul><ul id="4cfb54e5-83f3-41d3-8da3-ccf0110e9487" class="bulleted-list"><li><code>deleteTimeSlot</code><pre id="901d8727-fc4d-4793-9669-95f8da6cb2a5" class="code"><code>//input
deleteTimeSlotReq = 
&lt;
	teacher_name: String,
	starts_at: Time
&gt;</code></pre><pre id="4207ff59-c19a-4e5b-89b8-ae0b0fae8e89" class="code"><code>//output
deleteTimeSlotRes = 
&lt;
	code: Integer,
	message: String
&gt;</code></pre></li></ul><ul id="1fbbbb51-c02d-4b56-ae7c-d4e497fb0622" class="bulleted-list"><li><code>scheduleNewLesson</code><pre id="21c2ce3c-fa90-4350-9062-7a118276cd83" class="code"><code>//input
scheduleNewLessonReq = 
&lt;
	teacher_name: String,
	starts_at: Time,
	student_email: String, 
	teacher_comments: String [0..1],
	student_comments: String [0..1]
&gt;</code></pre><pre id="3cfe1c29-0200-4854-8284-512c7351ccbf" class="code"><code>//output
scheduleNewLessonRes = 
&lt;
	code: Integer,
	message: String,
	lesson_number: Integer [0..1]
&gt;</code></pre></li></ul><p id="708320c4-5f07-4a67-b4e9-f3dc4e585890" class="">
</p><p id="b5f42e39-5713-4288-aa6d-5d39ef78ec0d" class="">b) Servei web SOAP utilitzant el mode d‚Äôinteracci√≥ Request/Acknowledge/Poll per a l‚Äôoperaci√≥ de reprogramar una Lesson:</p><ul id="7a01003f-d544-417e-861f-c8b38a4e7666" class="bulleted-list"><li><code>rescheduleLesson</code><pre id="d515eb5f-e278-4dbb-ae32-da6c149ad3a2" class="code"><code>//input
rescheduleLessonReq =
&lt;
	num_lesson: Integer,
	starts_at: Time
&gt;</code></pre><pre id="d80b8a96-8eef-4c0a-9972-066638b8f0cb" class="code"><code>//output
rescheduleLessonAck = 
&lt;
	id: String
&gt;</code></pre></li></ul><ul id="90438d05-dad4-49c3-a62e-be7b7be5595e" class="bulleted-list"><li><code>getResults</code><pre id="249efa4e-6503-4ac0-86cf-843e3690c2cf" class="code"><code>//input
rescheduleLessonAck = 
&lt;
	id: String
&gt;</code></pre><pre id="a2cd345f-330c-4c31-9fc0-1e38fbfecb36" class="code"><code>//output
rescheduleLessonRes =
&lt;
	code: Integer,
	message: String
&gt;</code></pre></li></ul><p id="a746df17-ba56-4107-9b66-69321058a7df" class="">
</p><p id="3d2c1f72-df0b-49f8-a153-6f856c4bc2c6" class="">c) Api REST per a les 5 operacions</p><figure id="9cf758ee-4a17-43a2-a7fc-ce06a6787761" class="image"><a href="ASW%20Preparaci%20segon%20control%20bf24a41f685b4794b4583b5f46fce66c/Screenshot_2020-06-06_at_14.14.47.png"><img style="width:528px" src="ASW%20Preparaci%20segon%20control%20bf24a41f685b4794b4583b5f46fce66c/Screenshot_2020-06-06_at_14.14.47.png"/></a></figure><figure id="e9e46a8d-f993-498f-8602-150d83da83e3" class="image"><a href="ASW%20Preparaci%20segon%20control%20bf24a41f685b4794b4583b5f46fce66c/Screenshot_2020-06-06_at_14.15.03.png"><img style="width:528px" src="ASW%20Preparaci%20segon%20control%20bf24a41f685b4794b4583b5f46fce66c/Screenshot_2020-06-06_at_14.15.03.png"/></a></figure><figure id="e51d1f1a-8865-4528-945f-448bd979f47f" class="image"><a href="ASW%20Preparaci%20segon%20control%20bf24a41f685b4794b4583b5f46fce66c/Screenshot_2020-06-06_at_14.15.20.png"><img style="width:528px" src="ASW%20Preparaci%20segon%20control%20bf24a41f685b4794b4583b5f46fce66c/Screenshot_2020-06-06_at_14.15.20.png"/></a></figure><figure id="0e28b056-6ca5-4502-9e3d-b5a265b5b0f7" class="image"><a href="ASW%20Preparaci%20segon%20control%20bf24a41f685b4794b4583b5f46fce66c/Screenshot_2020-06-06_at_14.15.37.png"><img style="width:528px" src="ASW%20Preparaci%20segon%20control%20bf24a41f685b4794b4583b5f46fce66c/Screenshot_2020-06-06_at_14.15.37.png"/></a></figure><figure id="6037e667-7ab4-4590-87d1-868d599ef38c" class="image"><a href="ASW%20Preparaci%20segon%20control%20bf24a41f685b4794b4583b5f46fce66c/Screenshot_2020-06-06_at_14.15.57.png"><img style="width:528px" src="ASW%20Preparaci%20segon%20control%20bf24a41f685b4794b4583b5f46fce66c/Screenshot_2020-06-06_at_14.15.57.png"/></a></figure><p id="a2f7ff84-1651-455b-885f-f77296234d2a" class="">
</p><p id="a406c4f6-7304-4e91-8be0-22966a87c310" class="">d) Client</p><ol id="9f55156d-bbe8-41a3-af61-4a3927d7919a" class="numbered-list" start="1"><li>Obtinc tota info (slots lliures inclosos) del teacher amb <code>name = ‚ÄúRance‚Äù</code>:<pre id="f2f2203f-410b-447a-924b-765ec32d1cdc" class="code"><code>GET /api/teachers/‚Äã<strong>Rance</strong></code></pre></li></ol><ol id="82f1627f-da85-477a-8360-7fce4936acdb" class="numbered-list" start="2"><li>Per cada item de l‚Äôarray free_slots tal que el seu atribut <code>starts_at = ‚Äã</code><code><strong>TS</strong></code><strong> </strong>‚ÄãcomencÃßa per ‚Äú<code>2019-01-11</code>‚Äù faig la peticioÃÅ seguÃàent:<pre id="1341b968-ad6a-42ab-a6f3-451a348d36ad" class="code"><code>DELETE /api/teachers/‚Äã<strong>Rance</strong>/‚Äã time_slots/‚Äã<strong>TS</strong></code></pre></li></ol><h3 id="3d3937aa-1a62-49cf-b999-754aac058747" class="">YAML</h3><pre id="bdabae29-e0c5-4a9d-869a-a139bd7304bc" class="code"><code>openapi: 3.0.1
info:
  version: 1.0.0
  title: 201819q1_control_2
  description: 
		&quot;Versi√≥ OpenAPI del l&#x27;apartat c de l&#x27;exercici del 
		**201819q1_control_2**. Se suposa que els possibles 
		clients (programes) que usen aqueste crides ho fan 
		des d‚Äôuna intranet segura i que, per tant, no cal 
		considerar el tema de l‚Äôautenticaci√≥/autoritzaci√≥.&quot;
servers:
  - url: &#x27;https://aswfib.free.beeceptor.com/api/&#x27;
paths:
  /teachers/{name}:
    get:
      tags:
      - teachers
      summary: Consultar la info d‚Äôun Teacher concret
      parameters:
      - in: path
        name: name
        schema:
          type: string
        required: true
      responses:
        200:
          description: successful operation
          content:
            application/json:
              schema:
                $ref: &#x27;#/components/schemas/Teacher&#x27;
        404:
          description: &#x27;Error: Not Found&#x27;
          content:
            application/json:
              schema:
                $ref: &#x27;#/components/schemas/ErrorResult&#x27;
              examples:
                errorExample:
                  $ref: &#x27;#/components/examples/error404_gi&#x27;
  /lessons:
    get:
      tags:
      - lessons
      summary: Consultar lessons
      parameters:
      - in: query
        name: start_time
        schema:
          type: string
          format: date-time
        required: true
      - in: query
        name: end_time
        schema:
          type: string
          format: date-time
        required: true
      - in: query
        name: teacher_name
        schema:
          type: string
        required: false
      - in: query
        name: student_email
        schema:
          type: string
          format: email
        required: false
      - in: query
        name: status
        schema:
          $ref: &#x27;#/components/schemas/LessonStatus&#x27;
        required: false
      responses:
        200:
          description: successful operation
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: &#x27;#/components/schemas/Lesson&#x27;
        400:
          description: &#x27;Error: Bad Request&#x27;
          content:
            application/json:
              schema:
                $ref: &#x27;#/components/schemas/ErrorResult&#x27;
              examples:
                errorExample:
                  $ref: &#x27;#/components/examples/error400_gc&#x27;
    post:
      tags:
      - lessons
      summary: Programar una nova lesson
      requestBody:
        content:
          application/json:
            schema:
              $ref: &#x27;#/components/schemas/NewLesson&#x27;
      responses:
        201:
          description: &quot;Lesson created successfully&quot;
          headers:
            Location:
              schema:
                type: string
                format: uri
                example: &quot;https://aswfib.free.beeceptor.com/api/lessons/667766&quot;
          content:
            application/json:
              schema:
                $ref: &#x27;#/components/schemas/Lesson&#x27;
        400:
          description: &#x27;Error: Bad Request&#x27;
          content:
            application/json:
              schema:
                $ref: &#x27;#/components/schemas/ErrorResult&#x27;
              examples:
                errorExample:
                  $ref: &#x27;#/components/examples/error400_post&#x27;
        409:
          description: &#x27;Error: Conflict&#x27;
          content:
            application/json:
              schema:
                $ref: &#x27;#/components/schemas/ErrorResult&#x27;
              examples:
                errorExample:
                  $ref: &#x27;#/components/examples/error409_post&#x27;
  /teachers/{name}/time_slots/{starts_at}:
    delete:
      tags:
      - time_slots
      summary: Eliminar un slot concret
      parameters:
      - in: path
        name: name
        schema:
          type: string
        required: true
        description: Teacher&#x27;s
      - in: path
        name: starts_at
        schema:
          type: string
          format: date-time
        required: true
      responses:
        204:
          description: &quot;TimeSlot removed&quot;
          content:
            application/json: {}
        404:
          description: &#x27;Error: Not Found&#x27;
          content:
            application/json:
              schema:
                $ref: &#x27;#/components/schemas/ErrorResult&#x27;
              examples:
                errorExample:
                  $ref: &#x27;#/components/examples/error404_delete&#x27;
        409:
          description: &#x27;Error: Conflict&#x27;
          content:
            application/json:
              schema:
                $ref: &#x27;#/components/schemas/ErrorResult&#x27;
              examples:
                errorExample:
                  $ref: &#x27;#/components/examples/error409_delete&#x27;
  /lessons/{number}:
    put:
      tags:
      - lessons
      summary: Reprogramar una lesson
      parameters:
      - in: path
        name: number
        schema:
          type: integer
        required: true
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                starts_at:
                  type: string
                  format: date-time
      responses:
        200:
          description: &quot;Lesson rescheduled&quot;
          content:
            application/json:
              schema:
                $ref: &#x27;#/components/schemas/Lesson&#x27;
        400:
          description: &#x27;Error: Bad Request&#x27;
          content:
            application/json:
              schema:
                $ref: &#x27;#/components/schemas/ErrorResult&#x27;
              examples:
                errorExample:
                  $ref: &#x27;#/components/examples/error400_put&#x27;
        404:
          description: &#x27;Error: Not Found&#x27;
          content:
            application/json:
              schema:
                $ref: &#x27;#/components/schemas/ErrorResult&#x27;
              examples:
                errorExample:
                  $ref: &#x27;#/components/examples/error404_put&#x27;
        409:
          description: &#x27;Error: Conflict&#x27;
          content:
            application/json:
              schema:
                $ref: &#x27;#/components/schemas/ErrorResult&#x27;
              examples:
                errorExample:
                  $ref: &#x27;#/components/examples/error409_put&#x27;
components:
  schemas:
    Student:
      type: object
      properties:
        name:
          type: string
          example: &quot;Manolo&quot;
        email:
          type: string
          format: email
          example: &quot;manolo@g.cc&quot;
    LessonStatus:
      type: string
      enum:
      - schedulled
      - cancelled
      - done
    Lesson:
      type: object
      properties:
        number:
          type: integer
          example: 667766
        status:
          $ref: &#x27;#/components/schemas/LessonStatus&#x27;
        teacher_comments:
          type: string
          example: &quot;Bring your notebook&quot;
        student_comments:
          type: string
          example: null
        student:
          $ref: &#x27;#/components/schemas/Student&#x27;
        slot:
          $ref: &#x27;#/components/schemas/Slot&#x27;
        teacher_name:
          type: string
          example: Rance
    Slot: 
      type: object
      properties:
        starts_at:
          type: string
          format: date-time
        type:
          type: string
          enum: [normal, premium]
    Teacher:
      type: object
      properties:
        name:
            type: string
            example: &quot;Perico Palotes&quot;
        language:
          type: array
          items:
            type: string
            minItems: 1
          example: [english, latin]
        free_slots:
          type: array
          items:
            $ref: &#x27;#/components/schemas/Slot&#x27;
    NewLesson:
      type: object
      required:
      - teacher_name
      - starts_at
      - student_email
      properties:
        teacher_name:
          type: string
          example: Rance
        starts_at:
          type: string
          format: date-time
        student_email:
          type: string
          format: email
          example: manolo@g.cc
        teacher_comments:
          type: string
          example: &quot;Bring your notebook&quot;
        student_comments:
          type: string
          example: null
    ErrorResult:
      type: object
      properties:
        status:
          type: integer
          enum: [400, 401, 403, 404, 409]
        error: 
          type: string
          enum: 
					[
						&quot;Bad Request&quot;, 
						&quot;Unauthorized&quot;, 
						&quot;Forbidden&quot;, 
						&quot;Not Found&quot;, 
						&quot;Conflict&quot;
					]
        message: 
          type: string
  examples:
    error400_gc:
      value:
        status: 400
        error: &quot;Bad Request&quot;
        message: &quot;Incorrect start_time - end_time interval&quot;
    error400_put:
      value:
        status: 400
        error: &quot;Bad Request&quot;
        message: &quot;Invalid time format&quot;
    error400_post:
      value:
        status: 400
        error: &quot;Bad Request&quot;
        message: &quot;No Student with this email&quot;
    error401:
      value:
        status: 401
        error: &quot;Unauthorized&quot;
        message: &quot;You provided no api key (X-API-KEY Header)&quot;
    error403:
      value:
        status: 403
        error: &quot;Forbidden&quot;
        message: &quot;Your api key (X-API-KEY Header) is not valid&quot;
    error404_gi:
      value:
        status: 404
        error: &quot;Not Found&quot;
        message: &quot;No Teacher with this name&quot;
    error404_delete:
      value:
        status: 404
        error: &quot;Not Found&quot;
        message: &quot;No TimeSlot for this Teacher&#x27;s name and start_time&quot;
    error404_put:
      value:
        status: 404
        error: &quot;Not Found&quot;
        message: &quot;No Lesson for this number&quot;
    error409_delete:
      value:
        status: 409
        error: &quot;Conflict&quot;
        message: &quot;TimeSlot already assigned to a Lesson&quot;
    error409_put:
      value:
        status: 409
        error: &quot;Conflict&quot;
        message: &quot;The new TimeSlot is not free&quot;
    error409_post:
      value:
        status: 409
        error: &quot;Conflict&quot;
        message: &quot;The TimeSlot is not free&quot;</code></pre><p id="e3af4acd-2c5f-4314-93d5-e989a3bea114" class="">
</p><h2 id="2f62ad89-2cf6-4358-8da1-8d640482b408" class="">201718q2_control_2</h2><h3 id="92b7f4a7-7688-4f12-9a2a-2028477f4e81" class="">Enunciat</h3><p id="15c19330-8946-4081-adc0-fe4ae9953313" class="">Considereu un sistema per reservar taules a restaurants. Suposeu que els possibles clients (programes) dels serveis que dissenyareu ho faran des d‚Äôuna intranet segura i que, per tant, no cal considerar el tema de l‚Äôautenticaci√≥/ autoritzaci√≥. El diagrama de classes que en descriu el domini √©s el seg√ºent:</p><figure id="79d16ed0-28a0-4a1d-9103-2f2ed04db185" class="image"><a href="ASW%20Preparaci%20segon%20control%20bf24a41f685b4794b4583b5f46fce66c/Screenshot_2020-06-06_at_14.23.23.png"><img style="width:576px" src="ASW%20Preparaci%20segon%20control%20bf24a41f685b4794b4583b5f46fce66c/Screenshot_2020-06-06_at_14.23.23.png"/></a></figure><p id="1895b7be-1b1e-4f65-a5e3-630ebefd1dd3" class="">
</p><p id="bda8ad83-5fa7-4681-9978-dba7e0087086" class="">CaldraÃÄ dissenyar els serveis que permetin implementar les 5 operacions seguÃàents:</p><ol id="62797bc1-76e7-4bd4-8305-4d172dd47f04" class="numbered-list" start="1"><li>Consultar la info (tots els atributs) d‚Äôun <em>Restaurant </em>concret. CaldraÃÄ incloure tambeÃÅ els atributs <em>number </em>i <em>capacity </em>de totes les seves taules (<em>tables</em>).</li></ol><ol id="e784b61d-af19-4d43-9007-d9ea292abbf3" class="numbered-list" start="2"><li>Consultar totes les reserves (reservations), amb la possibilitat de filtrar-les per data, Restaurant (id), Customer (phone), servei (lunch | dinner) i/o status (<em>pending</em>, ...). Per cada reserva, cal retornar tots els seus atributs aixiÃÅ com els del <em>Customer</em>, <em>Restaurant </em>i taules corresponents.</li></ol><ol id="2df7e57b-ae33-4882-afd0-1b1169d6043b" class="numbered-list" start="3"><li>Modificar l‚Äôstatus d‚Äôuna reserva. Cal que el canvi sigui coherent (p.ex. no es pot passar de <em>cancelled </em>a <em>served</em>).</li></ol><ol id="f4ee0c77-eac0-49b0-919f-f91ff31ed2d7" class="numbered-list" start="4"><li>Eliminar una determinada taula (<em>table</em>) d‚Äôun restaurant. Cal que aquesta no estigui associada amb reserves <em>pending </em>o <em>serving</em>.</li></ol><ol id="dc5af7b2-fd94-433f-8b8b-a47723aeb2e8" class="numbered-list" start="5"><li>Fer una reserva nova, indicant tota la info necessaÃÄria, incloent-hi la de les taules que s‚Äôusaran. Cal fer totes les comprovacions pertinents (per ex., que les taules estiguin juntes i disponibles, que hi caÃÄpiguen totes les persones, etc.). El <em>locator </em>de la reserva el genera el sistema.</li></ol><p id="835881f9-3268-4c2e-9f8f-55956c2e576d" class="">
</p><p id="78a52372-9cbd-44da-824a-3eb0eb0b0126" class="">MeÃÅs concretament,</p><p id="b32c8f91-4176-4970-93d9-56dab4a049a1" class="">a) <strong>[2 punts] </strong>Dissenyeu un servei web SOAP que inclogui les <strong>4 primeres </strong>operacions. Heu d‚Äôutilitzar els patrons RPC API i DTO. Per a cada operacioÃÅ cal definir els paraÃÄmetres d‚Äôentrada i el resultat. Utilitzeu el mode d‚ÄôinteraccioÃÅ <em>Request/Response</em>.</p><p id="18c7eedd-f2d4-4a8e-83cc-6711d139eeae" class="">b) <strong>[1 punt] </strong>Dissenyeu un servei web SOAP utilitzant el mode d‚ÄôinteraccioÃÅ <em>Request/Acknowledge/Poll </em>per a l‚ÄôoperacioÃÅ de <strong>fer una reserva nova</strong>. Heu d‚Äôutilitzar els patrons RPC API i DTO.</p><p id="b125e67b-cb85-4e3a-91d7-9aeb9e36ff7f" class="">c) <strong>[3 punts] </strong>Dissenyeu un servei web REST per a les <strong>5 operacions</strong>. Per descriure cada operacioÃÅ caldraÃÄ omplir la plantilla que teniu a continuacioÃÅ:</p><figure id="f579aef3-d55c-47d0-81de-bc2c9fa3a289" class="image"><a href="ASW%20Preparaci%20segon%20control%20bf24a41f685b4794b4583b5f46fce66c/Screenshot_2020-06-06_at_14.25.36.png"><img style="width:528px" src="ASW%20Preparaci%20segon%20control%20bf24a41f685b4794b4583b5f46fce66c/Screenshot_2020-06-06_at_14.25.36.png"/></a></figure><p id="88c373c5-9855-423c-a4e3-c14454dd2ee3" class="">d) <strong>[1 punt] </strong>Definiu l‚Äôescenari que utilitzi el servei web REST anterior i que permeti cancel¬∑lar totes les reserves pendents del Customer amb phone = 965414605.</p><h3 id="88869ce2-3b24-4df2-8c5e-06792ce23b74" class="">Soluci√≥</h3><p id="53eead49-669c-4358-b810-2207fd8b1492" class="">a) Servei web SOAP per a les 4 primeres operacions</p><ul id="991e83ce-70f3-4bb9-be08-5721e7ec7085" class="bulleted-list"><li><code>getRestaurantById</code><pre id="39a97519-646f-4e99-b3d4-80396d88a301" class="code"><code>// input
getRestaurantByIdReq = 
&lt;
	id: String
&gt;</code></pre><pre id="c29cc7ae-99f9-450c-a181-f7c2ddfb8d7f" class="code"><code>// output
getRestaurantByIdRes = 
&lt;
	id: String,
	name: String, 
	location: String, 
	tables: InfoTable [*]
&gt;
	where InfoTable = 
	&lt;
		number: Integer, 
		capacity: Integer
	&gt;</code></pre></li></ul><ul id="1a04fae2-efb5-4e87-a661-64e2eb741a20" class="bulleted-list"><li><code>getReservations</code><pre id="d97cb159-d191-4de7-9a23-1e49eff0fb47" class="code"><code>// input
getReservationsReq = 
&lt;
	date: Date [0..1],
	restaurant_id: String [0..1], 
	customer_phone: String [0..1], 
	service: {lunch, dinner} [0..1], 
	status: {pending, ...} [0..1] 
&gt;</code></pre><pre id="5bef8ca1-176a-4205-9bb6-171eafa2e128" class="code"><code>// output
getReservationsRes = 
&lt;	
	Set(InfoReservation)
&gt; 
	where InfoReservation = 
	&lt;
		locator: String,
		...,
		status: {pending, ...},
		customer: 
		&lt;
			phone: String, 
			name: String
		&gt;,
		restaurant: 
		&lt;
			id: String, 
			name: String, 
			location: String
		&gt;, 
		..tables: InfoTable [*] 
	&gt;</code></pre></li></ul><ul id="9217edc3-fb80-4c40-9204-96b57f820b52" class="bulleted-list"><li><code>changeReservationStatus</code><pre id="3fdd652b-325c-47da-a024-a7202ba81739" class="code"><code>// input
changeReservationStatusReq = 
&lt;
	locator: String,
	status {pending, ...}
&gt;</code></pre><pre id="98bbd386-b275-4a71-b627-c6de47c1c0c1" class="code"><code>// output
changeReservationStatusRes = 
&lt;
	code: Integer,
	message: String
&gt;</code></pre></li></ul><ul id="7da83bed-2249-4717-bccf-1b7764b50511" class="bulleted-list"><li><code>deleteRestaurantTable</code><pre id="612f483e-78c9-42bb-a8be-930738bd00aa" class="code"><code>// input
deleteRestaurantTableReq = 
&lt;
	restaurant_id: String,
	table_number: String
&gt;</code></pre><pre id="c017256e-5032-438e-b7a0-4aae0bd5faef" class="code"><code>// output
deleteRestaurantTableRes = 
&lt;
	code: Integer,
	message: String
&gt;</code></pre></li></ul><p id="1f548aaa-1d46-4cee-bf0b-29685c0a2076" class="">b) Servei web SOAP utilitzant el mode d‚Äôinteracci√≥ Request/Acknowledge/Poll per a l‚Äôoperaci√≥ fer una reserva nova</p><ul id="8c03038e-d297-40a8-95e8-f3ea3d3aa0b1" class="bulleted-list"><li><code>makeNewReservation</code><pre id="6dd66be9-839a-49c9-ac5f-79fb38fe3c79" class="code"><code>// input
makeNewReservationReq = 
&lt;
	restaurant_id: String,
	customer_phone: String, 
	..table_numbers: Integer [*],
	date: Date,
	..service: {lunch, dinner}, 
	..num_people: Integer
&gt;</code></pre><pre id="148ed68f-0db3-4743-83d2-7802ac024d31" class="code"><code>// output
makeNewReservationAck = 
&lt;
	id: String
&gt;</code></pre></li></ul><ul id="5f19ccc7-f33b-4834-8f39-ac54981d94bc" class="bulleted-list"><li><code>getResults</code><pre id="415d28b9-2d2a-4871-8aa5-61569f7749e9" class="code"><code>// input
makeNewReservationAck = 
&lt;
	id: String
&gt;</code></pre><pre id="e78cae12-88a7-40fe-9de2-bb010a434b90" class="code"><code>// output
makeNewReservationRes = 
&lt;
	code: Integer,
	message: String, 
	locator: String [0..1]
&gt;</code></pre></li></ul><p id="c469bba0-ac17-45b5-8380-89f21969e9d9" class="">c) Api REST per a les 5 operacions</p><figure id="de74575d-47ce-4bd6-a198-85b4b86c7604" class="image"><a href="ASW%20Preparaci%20segon%20control%20bf24a41f685b4794b4583b5f46fce66c/Screenshot_2020-06-06_at_14.36.35.png"><img style="width:576px" src="ASW%20Preparaci%20segon%20control%20bf24a41f685b4794b4583b5f46fce66c/Screenshot_2020-06-06_at_14.36.35.png"/></a></figure><figure id="93e9e950-775d-4f14-9779-0520625720e4" class="image"><a href="ASW%20Preparaci%20segon%20control%20bf24a41f685b4794b4583b5f46fce66c/Screenshot_2020-06-06_at_14.36.50.png"><img style="width:576px" src="ASW%20Preparaci%20segon%20control%20bf24a41f685b4794b4583b5f46fce66c/Screenshot_2020-06-06_at_14.36.50.png"/></a></figure><figure id="df720a94-2ea4-42ec-af6b-205b13d50435" class="image"><a href="ASW%20Preparaci%20segon%20control%20bf24a41f685b4794b4583b5f46fce66c/Screenshot_2020-06-06_at_14.37.04.png"><img style="width:576px" src="ASW%20Preparaci%20segon%20control%20bf24a41f685b4794b4583b5f46fce66c/Screenshot_2020-06-06_at_14.37.04.png"/></a></figure><figure id="4eab6976-eab7-43af-9303-f3ac4c84229c" class="image"><a href="ASW%20Preparaci%20segon%20control%20bf24a41f685b4794b4583b5f46fce66c/Screenshot_2020-06-06_at_14.37.21.png"><img style="width:576px" src="ASW%20Preparaci%20segon%20control%20bf24a41f685b4794b4583b5f46fce66c/Screenshot_2020-06-06_at_14.37.21.png"/></a></figure><figure id="a988a2d5-4239-4bde-b79c-3e22f24d7896" class="image"><a href="ASW%20Preparaci%20segon%20control%20bf24a41f685b4794b4583b5f46fce66c/Screenshot_2020-06-06_at_14.37.34.png"><img style="width:576px" src="ASW%20Preparaci%20segon%20control%20bf24a41f685b4794b4583b5f46fce66c/Screenshot_2020-06-06_at_14.37.34.png"/></a></figure><p id="26a79824-c20c-4c61-a2eb-daddc9f0b92c" class="">
</p><p id="6478bbe1-526c-4d2f-910f-94ace4b2a035" class="">d) Client</p><ol id="65e31bc5-3a79-426e-a05f-db72f0740552" class="numbered-list" start="1"><li>Obtinc totes les reserves amb <code>status=pending</code> i <code>customer_phone=965414605</code>:<pre id="c00fcf6f-d028-481e-82cf-83c584739432" class="code"><code>GET /api/reservations?customer_phone=<strong>965414605</strong>&amp;status=<strong>pending</strong></code></pre></li></ol><ol id="f2e54b52-0d3e-44f1-aa02-ec62fa0df6f4" class="numbered-list" start="2"><li>Per cada reserva amb <code>locator = NN</code> obtingut, faig la peticioÃÅ seguÃàent:<pre id="90c220d1-5b93-4221-8837-fe38a6f71b9f" class="code"><code>PUT /api/reservations/<strong>NN
</strong>{‚Äústatus‚Äù: ‚Äúcancelled‚Äù}</code></pre></li></ol><h3 id="f1abd21f-f097-46f8-8faf-f0cc92f89171" class="">YAML</h3><pre id="e0fbb45f-7b11-4ea1-a5c5-c622426f5b93" class="code"><code>openapi: 3.0.1
info:
  version: 1.0.0
  title: 201718q2_control_2
  description: 
		&quot;Versi√≥ OpenAPI del l&#x27;apartat c de l&#x27;exercici del 
		**201718q2_control_2**. Se suposa que els possibles 
		clients (programes) que usen aqueste crides ho fan 
		des d‚Äôuna intranet segura i que, per tant, no cal 
		considerar el tema de l‚Äôautenticaci√≥/autoritzaci√≥.&quot;
servers:
  - url: &#x27;https://aswfib.free.beeceptor.com/api/&#x27;
paths:
  /restaurants/{id}:
    get:
      tags:
      - restaurants
      summary: Consultar la info d‚Äôun Restaurant concret
      parameters:
      - in: path
        name: id
        schema:
          type: string
        required: true
      responses:
        200:
          description: successful operation
          content:
            application/json:
              schema:
                $ref: &#x27;#/components/schemas/RestaurantFull&#x27;
        404:
          description: &#x27;Error: Not Found&#x27;
          content:
            application/json:
              schema:
                $ref: &#x27;#/components/schemas/ErrorResult&#x27;
              examples:
                errorExample:
                  $ref: &#x27;#/components/examples/error404_gi&#x27;
  /reservations:
    get:
      tags:
      - reservations
      summary: Consultar reserves
      parameters:
      - in: query
        name: restaurant_id
        schema:
          type: string
        required: false
      - in: query
        name: customer_phone
        schema:
          type: string
        required: false
      - in: query
        name: date
        schema:
          type: string
          format: date
        required: false
      - in: query
        name: service
        schema:
          $ref: &#x27;#/components/schemas/Service&#x27;
        required: false
      - in: query
        name: status
        schema:
          $ref: &#x27;#/components/schemas/ReservationStatus&#x27;
        required: false
      responses:
        200:
          description: successful operation
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: &#x27;#/components/schemas/Reservation&#x27;
        400:
          description: &#x27;Error: Bad Request&#x27;
          content:
            application/json:
              schema:
                $ref: &#x27;#/components/schemas/ErrorResult&#x27;
              examples:
                errorExample:
                  $ref: &#x27;#/components/examples/error400_gc&#x27;
    post:
      tags:
      - reservations
      summary: Fer una nova reserva
      requestBody:
        content:
          application/json:
            schema:
              $ref: &#x27;#/components/schemas/NewReservation&#x27;
      responses:
        201:
          description: &quot;New Reservation created successfully&quot;
          headers:
            Location:
              schema:
                type: string
                format: uri
                example: 
									&quot;https://aswfib.free.beeceptor.com/api/reservations/AEE344&quot;
          content:
            application/json:
              schema:
                $ref: &#x27;#/components/schemas/Reservation&#x27;
        400:
          description: &#x27;Error: Bad Request&#x27;
          content:
            application/json:
              schema:
                $ref: &#x27;#/components/schemas/ErrorResult&#x27;
              examples:
                errorExample:
                  $ref: &#x27;#/components/examples/error400_post&#x27;
        409:
          description: &#x27;Error: Conflict&#x27;
          content:
            application/json:
              schema:
                $ref: &#x27;#/components/schemas/ErrorResult&#x27;
              examples:
                errorExample:
                  $ref: &#x27;#/components/examples/error409_post&#x27;
  /restaurants/{id}/tables/{number}:
    delete:
      tags:
      - tables
      summary: Eliminar una taula
      parameters:
      - in: path
        name: id
        schema:
          type: string
        required: true
      - in: path
        name: number
        schema:
          type: integer
        required: true
      responses:
        204:
          description: &quot;Table removed&quot;
          content:
            application/json: {}
        404:
          description: &#x27;Error: Not Found&#x27;
          content:
            application/json:
              schema:
                $ref: &#x27;#/components/schemas/ErrorResult&#x27;
              examples:
                errorExample:
                  $ref: &#x27;#/components/examples/error404_del&#x27;
        409:
          description: &#x27;Error: Conflict&#x27;
          content:
            application/json:
              schema:
                $ref: &#x27;#/components/schemas/ErrorResult&#x27;
              examples:
                errorExample:
                  $ref: &#x27;#/components/examples/error409_del&#x27;
  /reservations/{locator}:
    put:
      tags:
      - reservations
      summary: Modificar status d‚Äôuna reserva
      parameters:
      - in: path
        name: locator
        schema:
          type: string
        required: true
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                status:
                  $ref: &#x27;#/components/schemas/ReservationStatus&#x27;
      responses:
        200:
          description: &quot;Lesson rescheduled&quot;
          content:
            application/json:
              schema:
                $ref: &#x27;#/components/schemas/Reservation&#x27;
        400:
          description: &#x27;Error: Bad Request&#x27;
          content:
            application/json:
              schema:
                $ref: &#x27;#/components/schemas/ErrorResult&#x27;
              examples:
                errorExample:
                  $ref: &#x27;#/components/examples/error400_put&#x27;
        404:
          description: &#x27;Error: Not Found&#x27;
          content:
            application/json:
              schema:
                $ref: &#x27;#/components/schemas/ErrorResult&#x27;
              examples:
                errorExample:
                  $ref: &#x27;#/components/examples/error404_put&#x27;
        409:
          description: &#x27;Error: Conflict&#x27;
          content:
            application/json:
              schema:
                $ref: &#x27;#/components/schemas/ErrorResult&#x27;
              examples:
                errorExample:
                  $ref: &#x27;#/components/examples/error409_put&#x27;
components:
  schemas:
    Customer:
      type: object
      properties:
        phone:
          type: string
          example: &quot;+346892567&quot;
        name:
          type: string
          example: Nick Carraway
    Service:
      type: string
      enum:
      - lunch
      - dinner
    ReservationStatus:
      type: string
      enum:
      - pending
      - cancelled
      - serving
      - served
      - no_show
    Reservation:
      type: object
      properties:
        locator:
          type: string
          example: AEE344
        date:
          type: string
          format: date
        service:
          $ref: &#x27;#/components/schemas/Service&#x27;
        num_people:
          type: integer
          minimum: 1
          example: 6
        status:
          $ref: &#x27;#/components/schemas/ReservationStatus&#x27;
        restaurant:
          $ref: &#x27;#/components/schemas/Restaurant&#x27;
        customer: 
          $ref: &#x27;#/components/schemas/Customer&#x27;
        tables:
          type: array
          items:
           $ref: &#x27;#/components/schemas/Table&#x27;
    Table: 
      type: object
      properties:
        number:
          type: integer
          example: 1
        capacity:
          type: integer
          example: 4
    Restaurant:
      type: object
      properties:
        id:
          type: string
          example: &quot;CELLERROCA&quot;
        name:
          type: string
          example: &quot;El Celler de Rocallaura&quot;
        location:
          type: string
          example: &quot;Rocallaura&quot;
    RestaurantFull:
      allOf:
      - $ref: &#x27;#/components/schemas/Restaurant&#x27;
      - type: object
        properties:
          tables:
            type: array
            items:
              $ref: &#x27;#/components/schemas/Table&#x27;
    NewReservation:
      type: object
      required:
      - date
      - service
      - num_people
      - restarant_id
      - customer_phone
      - table_numbers
      properties:
        date:
          type: string
          format: date
        service:
          $ref: &#x27;#/components/schemas/Service&#x27;
        num_people:
          type: integer
          minimum: 1
          example: 6
        restaurant_id:
          type: string
          example: CELLERROCA
        customer_phone: 
          type: string
          example: &quot;+346892567&quot;
        table_numbers:
          type: array
          items:
           type: integer
           example: 1
    ErrorResult:
      type: object
      properties:
        status:
          type: integer
          enum: [400, 401, 403, 404, 409]
        error: 
          type: string
          enum: 
					[
						&quot;Bad Request&quot;, 
						&quot;Unauthorized&quot;, 
						&quot;Forbidden&quot;, 
						&quot;Not Found&quot;, 
						&quot;Conflict&quot;
					]
        message: 
          type: string
  examples:
    error400_gc:
      value:
        status: 400
        error: &quot;Bad Request&quot;
        message: &quot;Incorrect date format&quot;
    error400_put:
      value:
        status: 400
        error: &quot;Bad Request&quot;
        message: &quot;Wrong status&quot;
    error400_post:
      value:
        status: 400
        error: &quot;Bad Request&quot;
        message: &quot;Incorrect date format&quot;
    error401:
      value:
        status: 401
        error: &quot;Unauthorized&quot;
        message: &quot;You provided no api key (X-API-KEY Header)&quot;
    error403:
      value:
        status: 403
        error: &quot;Forbidden&quot;
        message: &quot;Your api key (X-API-KEY Header) is not valid&quot;
    error404_gi:
      value:
        status: 404
        error: &quot;Not Found&quot;
        message: &quot;No Restaurant with this id&quot;
    error404_del:
      value:
        status: 404
        error: &quot;Not Found&quot;
        message: &quot;No Table for this Restarant&#x27;s id and number&quot;
    error404_put:
      value:
        status: 404
        error: &quot;Not Found&quot;
        message: &quot;No Reservation for this locator&quot;
    error409_del:
      value:
        status: 409
        error: &quot;Conflict&quot;
        message: &quot;Cannot delete: active reservations&quot;
    error409_put:
      value:
        status: 409
        error: &quot;Conflict&quot;
        message: &quot;Illegal status change request&quot;
    error409_post:
      value:
        status: 409
        error: &quot;Conflict&quot;
        message: &quot;No enough room in tables&quot;</code></pre><h2 id="0194ea11-4f40-467f-bfcc-e592f18653da" class="">201718q1_control_2</h2><h3 id="5b2f0c2d-929d-467a-9854-bd3da7368cb8" class="">Enunciat</h3><p id="8da18cc8-6555-4b2b-af48-97f78c7934e3" class="">Considereu un sistema per planificar (schedule) issues. Suposeu que els possibles clients (programes) dels serveis que dissenyareu ho faran des d‚Äôuna intranet segura i que, per tant, no cal considerar el tema de l‚Äôautenticaci√≥/ autoritzaci√≥. El diagrama de classes que en descriu el domini √©s el seg√ºent:</p><figure id="01b16095-e9ee-4287-bdd8-c3736f9b44e0" class="image"><a href="ASW%20Preparaci%20segon%20control%20bf24a41f685b4794b4583b5f46fce66c/Screenshot_2020-06-06_at_14.42.58.png"><img style="width:432px" src="ASW%20Preparaci%20segon%20control%20bf24a41f685b4794b4583b5f46fce66c/Screenshot_2020-06-06_at_14.42.58.png"/></a></figure><p id="6d4fbd0a-5e84-4696-be9e-219231897f49" class="">Caldr√† dissenyar els serveis que permetin implementar les 5 operacions seg√ºents:</p><ol id="5a6d7a09-0ec9-43cb-a80f-9cf9f0776817" class="numbered-list" start="1"><li>Consultar la info (tots els atributs) d‚Äôun issue concret. Si l‚Äôissue ja est√† planificat (t√© un scheduling), caldr√† incloure-hi tamb√© els atributs start_time, end_time, aix√≠ com els nif i name del developer.</li></ol><ol id="81f2f0d0-8041-4db5-98b8-523af300cea7" class="numbered-list" start="2"><li>Consultar els issues d‚Äôun determinat project amb la possibilitat de filtrar-los per type, priority i/o developer (nif). Per cada issue, cal retornar la mateixa informaci√≥ que a l‚Äôoperaci√≥ anterior.</li></ol><ol id="575b12a2-c72c-4a6e-bf87-ef9fee5fc544" class="numbered-list" start="3"><li>Des-planificar un issue (√©s a dir, eliminar el seu scheduling).</li></ol><ol id="2942854b-8074-4de2-a87c-2f8a9e8422a9" class="numbered-list" start="4"><li>Modificar start_time i/o end_time d‚Äôun <em>scheduling</em>. Cal que start_time ‚â§ end_time.</li></ol><ol id="4eaa73f0-9849-4a85-8a27-a5f1c1f0620c" class="numbered-list" start="5"><li>Planificar un issue (√©s a dir, crear un scheduling), indicant tota la info necess√†ria. Cal que l‚Äôissue no estigui ja planificat, que start_time ‚â§ end_time i que el developer pertanyi al project.</li></ol><p id="ca47d904-5da2-43b8-b1c3-0deb6bd21a76" class="">M√©s concretament,</p><p id="0bb621dc-7370-4bf3-b5e2-8e14a3a8ea9a" class="">a) [2 punts] Dissenyeu un servei web SOAP que inclogui les 4 primeres operacions. Heu d‚Äôutilitzar els patrons RPC API i DTO. Per a cada operaci√≥ cal definir els par√†metres d‚Äôentrada i el resultat. Utilitzeu el mode d‚Äôinteracci√≥ Request/Response.</p><p id="7cf22e00-51c2-457f-b93e-524789e7acb7" class="">b) [1 punt] Dissenyeu un servei web SOAP utilitzant el mode d‚Äôinteracci√≥ Request/Acknowledge/Poll per a l‚Äôoperaci√≥ de planificar un issue. Heu d‚Äôutilitzar els patrons RPC API i DTO.</p><p id="f8323535-d0b9-4162-8fe9-9057382d1616" class="">c) [3 punts] Dissenyeu un servei web REST per a les 5 operacions. Per descriure cada operaci√≥ caldr√† omplir la plantilla que teniu a continuaci√≥:</p><figure id="ead940f8-3ee0-44ee-bbf3-586d2a2ba688" class="image"><a href="ASW%20Preparaci%20segon%20control%20bf24a41f685b4794b4583b5f46fce66c/Screenshot_2020-06-06_at_14.44.43.png"><img style="width:528px" src="ASW%20Preparaci%20segon%20control%20bf24a41f685b4794b4583b5f46fce66c/Screenshot_2020-06-06_at_14.44.43.png"/></a></figure><p id="682ec3a3-8311-4aa7-8b93-cb859d06667f" class="">d) [1 punt] Definiu l‚Äôescenari que utilitzi el servei web REST anterior i que permeti eliminar tots els schedulings que el developer ‚Äú66234111X‚Äù (nif) t√© assignats en el project ‚Äú2016LLAVOR009‚Äù (code).</p><h3 id="227789f2-d36e-4225-a652-b412c237851e" class="">Soluci√≥</h3><p id="8d47a9c2-b8fb-4f3c-8f12-482b4faa6cb6" class="">a) Servei web SOAP per a les 4 primeres operacions</p><ul id="75c1c2cc-9928-4f98-8a2f-113a323ba0c6" class="bulleted-list"><li><code>getIssueById</code><pre id="d077cc6a-bc17-47ef-853d-2c99788e83b9" class="code"><code>// input
getIssueByIdReq= 
&lt;
	id: IssueID
&gt;
	where IssueID = 
	&lt;
		prj_code: String,
		iss_num: Integer
	&gt;</code></pre><pre id="bfeedf54-98d5-4fa1-8953-ba45de9c12cd" class="code"><code>// output
getIssueByIdRes =
&lt;
	id: IssueID,
	name: String, 
	description: String, 
	priority: {...},
	type: {...}&gt;,
	..scheduling: 
	&lt;
		start_time: ...,
		end_time: ..., 
		dev_nif: ..., 
		dev_name: ...
	&gt; [0..1]
&gt;</code></pre><pre id="e05e6864-40f1-4d67-8f00-2dd9eabf1123" class="code"><code>// description
Get the complete info of an issue given its id</code></pre></li></ul><ul id="332292e8-098a-4c6b-b995-17513f2c130f" class="bulleted-list"><li><code>getIssues</code><pre id="0522bc17-7b1b-4f87-8f61-d418a93fd5be" class="code"><code>// input
getIssuesReq = 
&lt;
	prj_code: String,
	type: {...}[0..1], 
	priority: {...}[0..1], 
	dev_nif: String [0..1] 
&gt;</code></pre><pre id="d80900be-7d7b-4905-8e31-641d0d30bfe5" class="code"><code>// output
getIssuesRes = 
&lt;
	Set(getIssueByIdRes)
&gt;</code></pre><pre id="645545c1-148a-4fd5-ad31-98954c7f8afa" class="code"><code>// description
Get the complete info of the issues filtered 
by the provided params (if any)</code></pre></li></ul><ul id="908ad656-7b43-4a1d-9f60-e49759282b62" class="bulleted-list"><li><code>unSchedule</code><pre id="8c86274d-ecc2-4a0f-9fd6-67abf47a5e63" class="code"><code>// input
unScheduleReq = 
&lt;
	issue_id: IssueID
&gt;</code></pre><pre id="34d5886a-7d9d-444c-ac4e-a8dcc1d88e8f" class="code"><code>// output
unScheduleRes =
&lt;
	code: Integer,
	message: String
&gt;</code></pre><pre id="3859c382-baed-489d-b3d4-5ae7d4f49b04" class="code"><code>// description
Unschedule an issue</code></pre></li></ul><ul id="817bd863-c7e2-466e-8731-35abe42199e3" class="bulleted-list"><li><code>modifyScheduling</code><pre id="4184620d-80db-49ac-a821-0bf3d495b1fc" class="code"><code>// input
modifySchedulingReq = 
&lt;
	issue_id: IssueID,
	start_time: Date[0..1], 
	end_time: Date[0..1]
&gt;</code></pre><pre id="8c5e72af-62dd-44f7-9647-1a563b7d6a0a" class="code"><code>// output
modifySchedulingRes = 
&lt;
	code: Integer,
	message: String
&gt;</code></pre><pre id="0dabb315-088b-4db7-a6d6-5aa1e75b59e1" class="code"><code>// description
Modify some attributes of a given Scheduling</code></pre></li></ul><p id="552ecfe6-2653-4e6a-a408-b4eb7356cf2e" class="">b) Servei web SOAP utilitzant el mode d‚Äôinteracci√≥ Request/Acknowledge/Poll per a l‚Äôoperaci√≥ de planificar un issue</p><ul id="7433a07e-e6f7-48c4-b564-e077d9bd2586" class="bulleted-list"><li><code>schedule</code><pre id="fbc44b81-73cc-41f4-988b-d255af086fbe" class="code"><code>// input
scheduleReq =
&lt;
	issue_id: IssueID,
	dev_nif: String, 
	..start_time: Date, 
	end_time: Date
&gt;</code></pre><pre id="56ffcb0a-747a-4402-b6a7-79b563c472d5" class="code"><code>// output
scheduleAck = 
&lt;
	id: String
&gt;</code></pre><pre id="1a90c218-a928-4fe9-9981-b9f2a7dd3e9e" class="code"><code>// description
Request to create a new Scheduling for a given issue</code></pre></li></ul><ul id="632b0e27-4be2-47f2-b430-b9abc7a78c25" class="bulleted-list"><li><code>getResults</code><pre id="0978c606-021a-486a-9ba0-c1bc09e0f66b" class="code"><code>// input
scheduleAck = 
&lt;
	id: String
&gt;</code></pre><pre id="a7306429-a133-4de2-bf84-1c38ac238d79" class="code"><code>// output
scheduleRes = 
&lt;
	code: Integer,
	message: String
&gt;</code></pre><pre id="a1787b57-c401-4151-b48a-228375b9dc8d" class="code"><code>// description
S‚Äôobt√© el resultat de la petici√≥ anterior</code></pre></li></ul><p id="697ce693-728b-42e4-9cd1-5095840184a2" class="">c) Api REST per a les 5 operacions</p><figure id="ddd32293-6725-496e-964c-60669bf92dfc" class="image"><a href="ASW%20Preparaci%20segon%20control%20bf24a41f685b4794b4583b5f46fce66c/Screenshot_2020-06-06_at_14.59.34.png"><img style="width:576px" src="ASW%20Preparaci%20segon%20control%20bf24a41f685b4794b4583b5f46fce66c/Screenshot_2020-06-06_at_14.59.34.png"/></a></figure><figure id="94a9fc3c-746a-4cc8-80f4-01757b72b6ab" class="image"><a href="ASW%20Preparaci%20segon%20control%20bf24a41f685b4794b4583b5f46fce66c/Screenshot_2020-06-06_at_14.59.50.png"><img style="width:576px" src="ASW%20Preparaci%20segon%20control%20bf24a41f685b4794b4583b5f46fce66c/Screenshot_2020-06-06_at_14.59.50.png"/></a></figure><figure id="1eff9e76-0e87-40c1-a815-06c64d188ff3" class="image"><a href="ASW%20Preparaci%20segon%20control%20bf24a41f685b4794b4583b5f46fce66c/Screenshot_2020-06-06_at_15.00.12.png"><img style="width:576px" src="ASW%20Preparaci%20segon%20control%20bf24a41f685b4794b4583b5f46fce66c/Screenshot_2020-06-06_at_15.00.12.png"/></a></figure><figure id="d6dfa56f-a46c-41c5-82cb-b398a3d6fd0b" class="image"><a href="ASW%20Preparaci%20segon%20control%20bf24a41f685b4794b4583b5f46fce66c/Screenshot_2020-06-06_at_15.00.24.png"><img style="width:576px" src="ASW%20Preparaci%20segon%20control%20bf24a41f685b4794b4583b5f46fce66c/Screenshot_2020-06-06_at_15.00.24.png"/></a></figure><figure id="9d79a082-d197-4274-bc0b-9af822c6e5dd" class="image"><a href="ASW%20Preparaci%20segon%20control%20bf24a41f685b4794b4583b5f46fce66c/Screenshot_2020-06-06_at_15.00.45.png"><img style="width:576px" src="ASW%20Preparaci%20segon%20control%20bf24a41f685b4794b4583b5f46fce66c/Screenshot_2020-06-06_at_15.00.45.png"/></a></figure><p id="2eae0649-513c-4631-a5ad-ba8044c9e950" class="">d) Client</p><ol id="8916aa5f-de16-41d1-9a09-13e4e513ad7f" class="numbered-list" start="1"><li>Obtinc tots els issues del project <code>‚Äú2016LLAVOR009‚Äù</code> estan planificades per ser implementades per al developer <code>‚Äú66234111X‚Äù</code><pre id="e7bca5ea-1b36-4bf9-8843-c25a95dd7c89" class="code"><code>GET /api/projects/2016LLAVOR009/issues?dev_nif=66234111X</code></pre></li></ol><ol id="22c36470-b0f6-4e20-a2aa-1e2054257c79" class="numbered-list" start="2"><li>Per cada issue amb <code>number = XX</code> obtingut, faig la petici√≥ seg√ºent:<pre id="d11d9040-b061-4e21-a1ff-0bcf2130dcd0" class="code"><code>DELETE /api/projects/2016LLAVOR009/issues/XX/scheduling</code></pre></li></ol><h3 id="1b97de7b-9d2b-4341-a5e1-87cd805bbbe9" class="">YAML</h3><pre id="7073cb84-0bff-4e6e-a273-4a35b90cdec4" class="code"><code>openapi: 3.0.1
info:
  version: 1.0.0
  title: 201718q1_control_2
  description: 
		&quot;Versi√≥ OpenAPI del l&#x27;apartat c de l&#x27;exercici del 
		**201718q2_control_1**. Se suposa que els possibles 
		clients (programes) que usen aquestes crides ho fan 
		des d‚Äôuna intranet segura i que, per tant, no cal 
		considerar el tema de l‚Äôautenticaci√≥/autoritzaci√≥.&quot;
servers:
  - url: &#x27;https://aswfib.free.beeceptor.com/api/&#x27;
paths:
  /projects/{code}/issues/{number}:
    get:
      tags:
      - issues
      summary: Consultar la info d‚Äôun Issue concret
      parameters:
      - in: path
        name: code
        schema:
          type: string
        required: true
      - in: path
        name: number
        schema:
          type: string
        required: true
      responses:
        200:
          description: successful operation
          content:
            application/json:
              schema:
                $ref: &#x27;#/components/schemas/IssueInfo&#x27;
        404:
          description: &#x27;Error: Not Found&#x27;
          content:
            application/json:
              schema:
                $ref: &#x27;#/components/schemas/ErrorResult&#x27;
              examples:
                errorExample:
                  $ref: &#x27;#/components/examples/error404_gi&#x27;
  /projects/{code}/issues:
    get:
      tags:
      - issues
      summary: Consultar issues
      parameters:
      - in: path
        name: code
        schema:
          type: string
        description: Project&#x27;s
        required: true
      - in: query
        name: priority
        schema:
          $ref: &#x27;#/components/schemas/IssuePriority&#x27;
        required: false
      - in: query
        name: type
        schema:
          $ref: &#x27;#/components/schemas/IssueType&#x27;
        required: false
      - in: query
        name: dev_nif
        schema:
          type: string
        required: false
        description: Developer&#x27;s identifier
      responses:
        200:
          description: successful operation
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: &#x27;#/components/schemas/IssueInfo&#x27;
        400:
          description: &#x27;Error: Bad Request&#x27;
          content:
            application/json:
              schema:
                $ref: &#x27;#/components/schemas/ErrorResult&#x27;
              examples:
                errorExample:
                  $ref: &#x27;#/components/examples/error400_gc&#x27;
        404:
          description: &#x27;Error: Not Found&#x27;
          content:
            application/json:
              schema:
                $ref: &#x27;#/components/schemas/ErrorResult&#x27;
              examples:
                errorExample:
                  $ref: &#x27;#/components/examples/error404_gc&#x27;
  /projects/{code}/issues/{number}/scheduling:
    post:
      tags:
      - schedulings
      summary: Planificar un issue
      parameters:
      - in: path
        name: code
        schema:
          type: string
        required: true
      - in: path
        name: number
        schema:
          type: integer
        required: true
      requestBody:
        content:
          application/json:
            schema:
              allOf:
              - type: object
                properties: 
                  dev_nif:
                    type: string
                    example: &quot;98988945K&quot;
              - $ref: &#x27;#/components/schemas/NewScheduling&#x27;
      responses:
        201:
          description: &quot;New Scheduling created successfully&quot;
          headers:
            Location:
              schema:
                type: string
                format: uri
                example: &quot;https://aswfib.free.beeceptor.com/api/projects/SUPERSEDE/issues/9780/scheduling&quot;
          content:
            application/json:
              schema:
                $ref: &#x27;#/components/schemas/NewScheduling&#x27;
        400:
          description: &#x27;Error: Bad Request&#x27;
          content:
            application/json:
              schema:
                $ref: &#x27;#/components/schemas/ErrorResult&#x27;
              examples:
                errorExample:
                  $ref: &#x27;#/components/examples/error400_put&#x27;
        404:
          description: &#x27;Error: Not Found&#x27;
          content:
            application/json:
              schema:
                $ref: &#x27;#/components/schemas/ErrorResult&#x27;
              examples:
                errorExample:
                  $ref: &#x27;#/components/examples/error404_gi&#x27;
        409:
          description: &#x27;Error: Conflict&#x27;
          content:
            application/json:
              schema:
                $ref: &#x27;#/components/schemas/ErrorResult&#x27;
              examples:
                errorExample:
                  $ref: &#x27;#/components/examples/error409_post&#x27;
    delete:
      tags:
      - schedulings
      summary: Desplanificar un issue
      parameters:
      - in: path
        name: code
        schema:
          type: string
        required: true
      - in: path
        name: number
        schema:
          type: integer
        required: true
      responses:
        204:
          description: &quot;Scheduling removed&quot;
          content:
            application/json: {}
        404:
          description: &#x27;Error: Not Found&#x27;
          content:
            application/json:
              schema:
                $ref: &#x27;#/components/schemas/ErrorResult&#x27;
              examples:
                errorExample:
                  $ref: &#x27;#/components/examples/error404_gi&#x27;
    put:
      tags:
      - schedulings
      summary: Canviar un scheduling
      parameters:
      - in: path
        name: code
        schema:
          type: string
        required: true
      - in: path
        name: number
        schema:
          type: integer
        required: true
      requestBody:
        content:
          application/json:
            schema:
              $ref: &#x27;#/components/schemas/NewScheduling&#x27;
      responses:
        200:
          description: &quot;Scheduling changed&quot;
          content:
            application/json:
              schema:
                $ref: &#x27;#/components/schemas/NewScheduling&#x27;
        400:
          description: &#x27;Error: Bad Request&#x27;
          content:
            application/json:
              schema:
                $ref: &#x27;#/components/schemas/ErrorResult&#x27;
              examples:
                errorExample:
                  $ref: &#x27;#/components/examples/error400_put&#x27;
        404:
          description: &#x27;Error: Not Found&#x27;
          content:
            application/json:
              schema:
                $ref: &#x27;#/components/schemas/ErrorResult&#x27;
              examples:
                errorExample:
                  $ref: &#x27;#/components/examples/error404_gi&#x27;
components:
  schemas:
    IssuePriority:
      type: integer
      enum: [1, 2, 3, 4, 5]
    IssueType:
      type: string
      enum:
      - bug
      - enhancement
      - new_feature
    NewScheduling:
      type: object
      properties:
        start_time:
          type: string
          format: date
        end_time:
          type: string
          format: date
    SchedulingInfo:
      allOf:
      - type: object
        properties:
          dev_nif:
            type: string
            example: &quot;98988945K&quot;
          dev_name:
            type: string
            example: &quot;Manolo R.&quot;
      - $ref: &#x27;#/components/schemas/NewScheduling&#x27;
    IssueInfo:
      type: object
      properties:
        proj_code: 
          type: string
          example: SUPERSEDE
        number: 
          type: integer
          example: 9780
        name:
          type: string
          example: Login bug
        description:
          type: string
          example: &quot;When a careless user pushes the Login button ...&quot;
        priority:
          $ref: &#x27;#/components/schemas/IssuePriority&#x27;
        type:
          $ref: &#x27;#/components/schemas/IssueType&#x27;
        schedulling:
          $ref: &#x27;#/components/schemas/SchedulingInfo&#x27;
    ErrorResult:
      type: object
      properties:
        status:
          type: integer
          enum: [400, 401, 403, 404, 409]
        error: 
          type: string
          enum: 
					[
						&quot;Bad Request&quot;, 
						&quot;Unauthorized&quot;,  
						&quot;Forbidden&quot;,  
						&quot;Not Found&quot;,  
						&quot;Conflict&quot;
					]
        message: 
          type: string
  examples:
    error400_gc:
      value:
        status: 400
        error: &quot;Bad Request&quot;
        message: &quot;There is no developer with this dev_nif&quot;
    error400_put:
      value:
        status: 400
        error: &quot;Bad Request&quot;
        message: &quot;Wrong dates&quot;
    error401:
      value:
        status: 401
        error: &quot;Unauthorized&quot;
        message: &quot;You provided no api key (X-API-KEY Header)&quot;
    error403:
      value:
        status: 403
        error: &quot;Forbidden&quot;
        message: &quot;Your api key (X-API-KEY Header) is not valid&quot;
    error404_gi:
      value:
        status: 404
        error: &quot;Not Found&quot;
        message: &quot;No Issue with these code &amp; number&quot;
    error404_gc:
      value:
        status: 404
        error: &quot;Not Found&quot;
        message: &quot;No Project with this code&quot;
    error409_del:
      value:
        status: 409
        error: &quot;Conflict&quot;
        message: &quot;Cannot delete: active reservations&quot;
    error409_post:
      value:
        status: 409
        error: &quot;Conflict&quot;
        message: &quot;The issue was already scheduled&quot;</code></pre><p id="6435713c-bc88-4279-8b48-a761a6bd00ec" class="">
</p><h2 id="2a9795a3-1404-4238-91e0-a43c4ef73ca0" class="">Unit 5. Design of Web Services Exercises</h2><h3 id="3cd89d3e-a06c-459c-93bf-a0905455a768" class="">Enunciat (1)</h3><p id="86e13cc4-f5e5-4374-8197-e52d2cbbe900" class="">Un entitat d‚ÄôautoritzacioÃÅ de pagaments vol definir un servei web per proporcionar operacions per poder fer pagaments amb targetes en TPVVs (terminals de punt de venda virtuals). A continuacioÃÅ disposeu d‚Äôun fragment del diagrama de classes que descriu les dades que aquesta entitat posseeix.</p><figure id="61e74e81-0581-432d-955f-0b498f41e8f0" class="image"><a href="ASW%20Preparaci%20segon%20control%20bf24a41f685b4794b4583b5f46fce66c/Screenshot_2020-06-06_at_15.13.16.png"><img style="width:1966px" src="ASW%20Preparaci%20segon%20control%20bf24a41f685b4794b4583b5f46fce66c/Screenshot_2020-06-06_at_15.13.16.png"/></a></figure><p id="d220b67c-6fb8-40e8-b5c8-2543879a24e8" class="">
</p><p id="8e29722c-3e22-41c1-b805-f3228b38da8d" class="">El servei web que cal definir permetraÃÄ gestionar els escenaris seguÃàents:</p><ul id="51c2edec-7893-46ee-a935-6923c46e82b0" class="bulleted-list"><li><strong>Escenari pagament‚Äã:</strong> <p id="bb4cefa5-73fa-411a-905d-72756a6a9d7e" class="">L‚Äôusuari inserta la targeta al TPVV i indica la quantitat a pagar. El TPVV llegeix les dades de la targeta (nuÃÅmero i data de caducitat) i demana el nuÃÅmero secret. L‚Äôusuari introdueix el nuÃÅmero secret i el TPVV envia la peticioÃÅ de pagament a l‚Äôentitat d‚ÄôautoritzacioÃÅ de pagaments. L‚Äôentitat autoritzadora comprova que les dades de la targeta siguin correctes. Si les dades soÃÅn correctes es crea un moviment de tipus caÃÄrrec. Si la targeta eÃÅs de deÃÄbit, s‚Äôactualitza el saldo del compte corrent associat i si la targeta eÃÅs de creÃÄdit, s‚Äôactualitza el creÃÄdit disponible, si en teÃÅ. Una vegada processada la peticioÃÅ, el TPVV mostra la resposta (codi de resposta i un missatge).</p></li></ul><ul id="dca54581-9e71-4f8e-9a72-e640e5a4908d" class="bulleted-list"><li><strong>Escenari retrocedir pagament‚Äã: </strong><p id="ff74a480-4eea-47bf-9ba4-7c587f10cb4c" class="">L‚Äôusuari inserta la targeta al TPVV i indica la quantitat a retrocedir. El TPVV llegeix les dades de la targeta (nuÃÅmero i data de caducitat) i demana el nuÃÅmero secret. L‚Äôusuari introdueix el nuÃÅmero secret i el TPVV envia la peticioÃÅ de retrocedir el pagament a l‚Äôentitat d‚ÄôautoritzacioÃÅ de pagaments. L‚Äôentitat autoritzadora comprova que les dades de la targeta siguin correctes. Si les dades soÃÅn correctes, es crea un moviment de tipus abonament. Si la targeta eÃÅs de deÃÄbit, s‚Äôactualitza el saldo del compte corrent associat i si la targeta eÃÅs de creÃÄdit, s‚Äôactualitza el creÃÄdit disponible. Una vegada processada la peticioÃÅ, el TPVV mostra la resposta (codi de resposta i un missatge).</p></li></ul><p id="4e9e9a36-2a0e-47f8-a4cf-28bfef4cc4f5" class="">En tots dos escenaris, el TPVV estaÃÄ configurat de forma que quan s‚Äôenvia la peticioÃÅ de pagament o de retrocedir el pagament a l‚Äôentitat d‚ÄôautoritzacioÃÅ de pagaments tambeÃÅ s‚Äôenvia el concepte del pagament, la data i el nuÃÅmero del compte corrent on s‚Äôhan d‚Äôingressar els diners dels pagaments o s‚Äôhan de treure els diners dels pagaments retrocedits.</p><p id="473e07cc-b4e7-4ea7-9059-74f0cdec08a6" class="">
</p><p id="ffd61d8d-7c96-4798-88ad-ebe81979fa72" class="">Es demana:</p><ol id="aac45c01-f9a3-421c-b331-43547e4ea052" class="numbered-list" start="1"><li>Dissenyar un servei web SOAP que tingui les operacions dels escenaris descrits. Heu d‚Äôutilitzar els patrons RPC API i DTO. Per a cada operacioÃÅ cal definir els paraÃÄmetres d‚Äôentrada i el resultat, aixiÃÅ com la descripcioÃÅ de cada operacioÃÅ utilitzant el mode d‚ÄôinteraccioÃÅ Request/Response. Cal indicar els diferents codis i missatges de resposta que es poden obtenir.</li></ol><ol id="49f31d0b-9f01-4af3-bd1a-420ccc28ffa0" class="numbered-list" start="2"><li>Diagrama de classes del servei de l‚Äôapartat 1).</li></ol><ol id="4ac59f3d-7319-44c3-af34-cf2e0c586284" class="numbered-list" start="3"><li>Dissenyar un servei web SOAP que tingui les operacions dels escenaris descrits. Heu d‚Äôutilitzar els patrons RPC API i DTO. Per a cada operacioÃÅ cal definir els paraÃÄmetres d‚Äôentrada i el resultat, aixiÃÅ com la descripcioÃÅ de cada operacioÃÅ utilitzant el mode d‚ÄôinteraccioÃÅ Request/Acknowledge/Poll.</li></ol><ol id="4c65b340-6f78-4fc1-8942-7b10fd4332fe" class="numbered-list" start="4"><li>Diagrama de classes del servei de l‚Äôapartat c).</li></ol><ol id="56745ea1-8010-41c9-a301-82187e9c25f6" class="numbered-list" start="5"><li>Diagrama de sequÃàeÃÄncia que mostri la interaccioÃÅ entre un client i el servei per a<p id="6f419c62-c750-4126-87a9-b6b2033f3161" class="">l‚Äôescenari de fer un pagament utilitzant el mode d‚ÄôinteraccioÃÅ</p></li></ol><ol id="384c4305-7b22-4dc1-9925-11fad61a77b5" class="numbered-list" start="6"><li>Com canviariÃÅeu el diagrama de sequÃàeÃÄncia anterior si utilitzem els patrons Message API i DTO i el mode d‚ÄôinteraccioÃÅ Request/Acknowledge/Poll.</li></ol><p id="2e919f9b-ec17-4089-8287-1956aca245f6" class="">
</p><h3 id="c1f1dfe9-7553-4e76-856f-49b3dc2a9cfb" class="">Enunciat (2)</h3><p id="b886bdfa-0c99-4a2f-8ca5-013831982653" class="">Volem definir un servei web per gestionar els contactes i els grups de contactes de diferents usuaris. A continuacioÃÅ disposeu d‚Äôun fragment del diagrama de classes on hi ha els conceptes representats.</p><figure id="215cdb8c-97af-409c-b3d7-9c710f95f731" class="image"><a href="ASW%20Preparaci%20segon%20control%20bf24a41f685b4794b4583b5f46fce66c/Screenshot_2020-06-06_at_15.12.55.png"><img style="width:672px" src="ASW%20Preparaci%20segon%20control%20bf24a41f685b4794b4583b5f46fce66c/Screenshot_2020-06-06_at_15.12.55.png"/></a></figure><p id="64c66c11-d886-4c84-a46a-929d721084b4" class="">Es demana dissenyar les operacions per crear contactes, esborrar contactes, obtenir un contacte pel seu nom, crear grups de contactes, esborrar grups de contactes, obtenir els contactes d‚Äôun grup de contactes, afegir un contacte a un grup i eliminar un contacte d‚Äôun grup mitjancÃßant:</p><ol id="1efddf58-f86e-48ac-9d57-bf408a1cc33e" class="numbered-list" start="1"><li>Un servei web SOAP. Heu d‚Äôutilitzar els patrons RPC API. Per a cada operacioÃÅ cal definir els paraÃÄmetres d‚Äôentrada i el resultat, aixiÃÅ com la descripcioÃÅ de cada operacioÃÅ (veure plantilla a l‚Äôannex). Utilitzeu el mode d‚ÄôinteraccioÃÅ Request/Response.</li></ol><ol id="f58adfdd-5d06-4ada-ba47-3a336bfbc8ff" class="numbered-list" start="2"><li>Un servei web SOAP. Heu d‚Äôutilitzar els patrons RPC API i DTO. Per a cada operacioÃÅ cal definir els paraÃÄmetres d‚Äôentrada i el resultat, aixiÃÅ com la descripcioÃÅ de cada operacioÃÅ (veure plantilla a l‚Äôannex). Utilitzeu el mode d‚ÄôinteraccioÃÅ Request/Response. Explica les diferencies que existeixen respecte a la canviabilitat entre la solucioÃÅ de l‚Äôapartat a) i la solucioÃÅ d‚Äôaquest apartat.</li></ol><ol id="31483639-0008-4f75-9c51-da9d98d1f983" class="numbered-list" start="3"><li>Diagrama de classes del servei de l‚Äôapartat b).</li></ol><ol id="2185b2d7-7028-4ad2-a336-2de7db68144d" class="numbered-list" start="4"><li>Un servei web SOAP utilitzant el mode d‚ÄôinteraccioÃÅ Request/Acknowledge/Poll per a l‚ÄôoperacioÃÅ d‚Äôobtenir contactes per nom. Heu d‚Äôutilitzar els patrons RPC API i DTO.</li></ol><ol id="5182f85b-3e25-461f-ba3d-166b8c492e9f" class="numbered-list" start="5"><li>Un servei web REST. Per descriure cada operacioÃÅ caldraÃÄ omplir la plantilla que teniu a l‚Äôannex.</li></ol><ol id="7a4a2887-475e-44bc-b0a1-b306314aab95" class="numbered-list" start="6"><li>Definir l‚Äôescenari d‚Äôun client que utilitzi el servei web RESTful anterior i que permeti al‚Äôusuari ‚Äã<em>Maria </em>crear un grup ‚Äã<em>g1UnioÃÅg2 </em>q‚Äãue contingui la unioÃÅ de dos grups ‚Äã<em>g1 </em>‚Äãi ‚Äã<em>g2</em>‚Äã. Expliqueu cada acceÃÅs al servei que feu.</li></ol><h3 id="3394bcea-7c84-46b3-abfc-b94fd5a7dec0" class="">Enunciat (3)</h3><p id="a8ce910e-8af1-403c-93cf-cb5371bb41f0" class="">‚ÄãDonat l‚Äôesquema conceptual seguent:</p><figure id="0aab89aa-6ffa-4510-ab99-70e24acd64ea" class="image"><a href="ASW%20Preparaci%20segon%20control%20bf24a41f685b4794b4583b5f46fce66c/Screenshot_2020-06-06_at_15.37.59.png"><img style="width:624px" src="ASW%20Preparaci%20segon%20control%20bf24a41f685b4794b4583b5f46fce66c/Screenshot_2020-06-06_at_15.37.59.png"/></a></figure><p id="0083b3f3-d07f-4714-8295-76e880100f5b" class="">
</p><p id="293d80ea-40ae-484f-bf90-ba726668a2df" class="">I les operacions:</p><ol id="90c3cab5-388b-4910-a560-d2d2efd82043" class="numbered-list" start="1"><li>Tweet something.</li></ol><ol id="1d9a7b3e-6115-49d3-a375-fec17978e31f" class="numbered-list" start="2"><li>Remove a tweet.</li></ol><ol id="91e0d78f-e49f-428c-b2ae-c7cb841e5bde" class="numbered-list" start="3"><li>Retweet a given tweet.</li></ol><ol id="e8e2c8ec-9af6-4de5-bda9-93bd0853a794" class="numbered-list" start="4"><li>List the tweets of a given user (assume that the system returns a default number of 20 tweets per request).</li></ol><ol id="20d0066c-b8b9-4558-adcf-0374699ac4cd" class="numbered-list" start="5"><li>List the retweets of a given tweet (default: 20 retweets per request).</li></ol><ol id="70348272-9d98-4391-8de2-0f0ee6cd26a9" class="numbered-list" start="6"><li>List the followers of a given user (default: 20 followers per request). For each user: userid, username, full_name, picture.</li></ol><ol id="9354524d-3253-4267-88c8-63c6d935ba2c" class="numbered-list" start="7"><li>Start following a user.</li></ol><ol id="c63860f9-ab7e-49fc-bb78-3f7a4cb7b578" class="numbered-list" start="8"><li>Stop following a user.</li></ol><ol id="1a2175e4-aa75-41f7-a36d-f0ce52cfa478" class="numbered-list" start="9"><li>Show a user‚Äôs full public info (including her profile) and her last 10 tweets.</li></ol><ol id="ccd5d521-dda3-4057-862f-443bc2d5efad" class="numbered-list" start="10"><li>Modify a user profile.</li></ol><p id="52175cfc-1a92-4d94-92ec-332b1f6ac86b" class="">
</p><p id="62693f29-d95b-4751-af10-74cb2759d672" class="">Es demana dissenyar:</p><ol id="0d80d69c-a081-47c4-8506-990d4ada615f" class="numbered-list" start="1"><li>Un servei web SOAP. Heu d‚Äôutilitzar els patrons RPC API i DTO. Per a cada operacioÃÅ cal definir els paraÃÄmetres d‚Äôentrada i el resultat, aixiÃÅ com la descripcioÃÅ de cada operacioÃÅ (veure plantilla a l‚Äôannex). Utilitzeu el mode d‚ÄôinteraccioÃÅ Request/Response.</li></ol><ol id="583c52ab-b5c0-4d5c-83d9-bcbc548ecb9e" class="numbered-list" start="2"><li>Diagrama de classes del servei de l‚Äôapartat 1).</li></ol><ol id="1f9debb6-510b-43b8-bc00-94624365926b" class="numbered-list" start="3"><li>Un servei web SOAP utilitzant el mode d‚ÄôinteraccioÃÅ Request/Acknowledge/Poll per a l‚ÄôoperacioÃÅ tweet something. Heu d‚Äôutilitzar els patrons RPC API i DTO.</li></ol><ol id="34d62578-d249-4116-afbe-b61370168a06" class="numbered-list" start="4"><li>Un servei web REST. Per descriure cada operacioÃÅ caldraÃÄ omplir la plantilla que teniu a l‚Äôannex. Suposeu que totes les crides estan degudament autentificades amb uns tokens que identifiquen l‚Äôusuari del servei.<ol id="63814a86-0c95-4dd8-b943-ec1f79ed8a53" class="block-color-purple_background numbered-list" start="1"><li>SOLUCI√ì<figure id="5b5a74b8-0839-4dca-8209-16563bc6491a" class="image"><a href="ASW%20Preparaci%20segon%20control%20bf24a41f685b4794b4583b5f46fce66c/Screenshot_2020-06-06_at_15.43.44.png"><img style="width:2064px" src="ASW%20Preparaci%20segon%20control%20bf24a41f685b4794b4583b5f46fce66c/Screenshot_2020-06-06_at_15.43.44.png"/></a></figure><figure id="4ebd5ec7-bdb1-4a74-9d7f-dfd4cbb8db01" class="image"><a href="ASW%20Preparaci%20segon%20control%20bf24a41f685b4794b4583b5f46fce66c/Screenshot_2020-06-06_at_15.43.56.png"><img style="width:2064px" src="ASW%20Preparaci%20segon%20control%20bf24a41f685b4794b4583b5f46fce66c/Screenshot_2020-06-06_at_15.43.56.png"/></a></figure><figure id="22062cf6-213b-4ff2-bcf2-43d7ce44be13" class="image"><a href="ASW%20Preparaci%20segon%20control%20bf24a41f685b4794b4583b5f46fce66c/Screenshot_2020-06-06_at_15.44.12.png"><img style="width:2064px" src="ASW%20Preparaci%20segon%20control%20bf24a41f685b4794b4583b5f46fce66c/Screenshot_2020-06-06_at_15.44.12.png"/></a></figure><figure id="96255426-efb6-448e-885b-bc36e6021791" class="image"><a href="ASW%20Preparaci%20segon%20control%20bf24a41f685b4794b4583b5f46fce66c/Screenshot_2020-06-06_at_15.44.23.png"><img style="width:2064px" src="ASW%20Preparaci%20segon%20control%20bf24a41f685b4794b4583b5f46fce66c/Screenshot_2020-06-06_at_15.44.23.png"/></a></figure><figure id="e286875a-12d6-4cb3-b0c2-0297a7c7b1dd" class="image"><a href="ASW%20Preparaci%20segon%20control%20bf24a41f685b4794b4583b5f46fce66c/Screenshot_2020-06-06_at_15.44.41.png"><img style="width:2064px" src="ASW%20Preparaci%20segon%20control%20bf24a41f685b4794b4583b5f46fce66c/Screenshot_2020-06-06_at_15.44.41.png"/></a></figure><figure id="8f5c6ecb-4393-482a-bb5d-32d00511b31e" class="image"><a href="ASW%20Preparaci%20segon%20control%20bf24a41f685b4794b4583b5f46fce66c/Screenshot_2020-06-06_at_15.44.55.png"><img style="width:2064px" src="ASW%20Preparaci%20segon%20control%20bf24a41f685b4794b4583b5f46fce66c/Screenshot_2020-06-06_at_15.44.55.png"/></a></figure><figure id="7318d99b-c1e2-4784-a03f-46ada5b1202d" class="image"><a href="ASW%20Preparaci%20segon%20control%20bf24a41f685b4794b4583b5f46fce66c/Screenshot_2020-06-06_at_15.45.09.png"><img style="width:2064px" src="ASW%20Preparaci%20segon%20control%20bf24a41f685b4794b4583b5f46fce66c/Screenshot_2020-06-06_at_15.45.09.png"/></a></figure><figure id="13adf24d-398c-40b0-802c-4b104e0f3624" class="image"><a href="ASW%20Preparaci%20segon%20control%20bf24a41f685b4794b4583b5f46fce66c/Screenshot_2020-06-06_at_15.45.24.png"><img style="width:2064px" src="ASW%20Preparaci%20segon%20control%20bf24a41f685b4794b4583b5f46fce66c/Screenshot_2020-06-06_at_15.45.24.png"/></a></figure><figure id="f16a87e3-0f95-4b28-8d8d-acbfad6e14c8" class="image"><a href="ASW%20Preparaci%20segon%20control%20bf24a41f685b4794b4583b5f46fce66c/Screenshot_2020-06-06_at_15.45.47.png"><img style="width:1340px" src="ASW%20Preparaci%20segon%20control%20bf24a41f685b4794b4583b5f46fce66c/Screenshot_2020-06-06_at_15.45.47.png"/></a></figure><figure id="ae143a63-eeb6-4fee-b460-7e31161b3e7f" class="image"><a href="ASW%20Preparaci%20segon%20control%20bf24a41f685b4794b4583b5f46fce66c/Screenshot_2020-06-06_at_15.45.59.png"><img style="width:1340px" src="ASW%20Preparaci%20segon%20control%20bf24a41f685b4794b4583b5f46fce66c/Screenshot_2020-06-06_at_15.45.59.png"/></a></figure><pre id="bed367e5-6276-4c83-8133-d9268bdf6c33" class="code"><code>openapi: 3.0.1
info:
  version: 1.0.0
  title: Exercise 5.3
  description: 
		&quot;Versi√≥ OpenAPI del la soluci√≥ publicada a 
		&lt;https://atenea.upc.edu/mod/resource/view.php?id=2158291&gt;. 
		Suposem que totes les crides necessiten autentificaci√≥ 
		via una api_key que indentifica un usuari determinat.&quot;
servers:
  - url: &#x27;https://aswfib.free.beeceptor.com/api/&#x27;
paths:
  /tweets:
    get:
      tags:
      - tweets
      summary: List the tweets
      parameters:
      - in: query
        name: userid
        schema:
          type: integer
          format: int64
        description: The id of the user that made the tweets
        required: false
      - in: query
        name: offset
        schema:
          type: integer
        description: 
					The number of items to skip before starting 
					to collect the result set
        required: false
      - in: query
        name: count
        schema:
          type: integer
        description: The numbers of items to return
        required: false  
      responses:
        200:
          description: successful operation
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: &#x27;#/components/schemas/Tweet&#x27;
        400:
          description: &#x27;Error: Bad Request&#x27;
          content:
            application/json:
              schema:
                $ref: &#x27;#/components/schemas/ErrorResult&#x27;
              examples:
                errorExample:
                  $ref: &#x27;#/components/examples/error4002&#x27;
        401:
          description: &#x27;Error: Unauthorized&#x27;
          content:
            application/json:
              schema:
                $ref: &#x27;#/components/schemas/ErrorResult&#x27;
              examples:
                errorExample:
                  $ref: &#x27;#/components/examples/error401&#x27;
      security:
      - ApiKeyAuth: []
    post:
      tags:
      - tweets
      summary: Tweet something
      requestBody:
        content:
          application/json:
            schema:
              type: object
              required:
                - text
              properties:
                text:
                  type: string
                  maxLength: 280
                  example: &quot;Clever tweet text&quot;
      responses:
        201:
          description: &quot;Tweet creat&quot;
          headers:
            Location:
              schema:
                type: string
                format: uri
                example: 
									&quot;https://aswfib.free.beeceptor.com/api/tweets/4865651&quot;
          content:
            application/json:
              schema:
                $ref: &#x27;#/components/schemas/Tweet&#x27;
        400:
          description: &#x27;Error: Bad Request&#x27;
          content:
            application/json:
              schema:
                $ref: &#x27;#/components/schemas/ErrorResult&#x27;
              examples:
                errorExample:
                  $ref: &#x27;#/components/examples/error400&#x27;
        401:
          description: &#x27;Error: Unauthorized&#x27;
          content:
            application/json:
              schema:
                $ref: &#x27;#/components/schemas/ErrorResult&#x27;
              examples:
                errorExample:
                  $ref: &#x27;#/components/examples/error401&#x27;
      security:
      - ApiKeyAuth: []
  /tweets/{id}:
    delete:
      tags:
      - tweets
      summary: Remove a tweet
      parameters:
      - name: id
        in: path
        description: Tweet id to delete
        required: true
        schema:
          type: integer
          format: int64
      responses:
        204:
          description: Tweet deleted
          content:
            application/json: {}
        404:
          description: &#x27;Error: Not Found&#x27;
          content:
            application/json:
              schema:
                $ref: &#x27;#/components/schemas/ErrorResult&#x27;
              examples:
                errorExample:
                  $ref: &#x27;#/components/examples/error404&#x27;
        401:
          description: &#x27;Error: Unauthorized&#x27;
          content:
            application/json:
              schema:
                $ref: &#x27;#/components/schemas/ErrorResult&#x27;
              examples:
                errorExample:
                  $ref: &#x27;#/components/examples/error401&#x27;
        403:
          description: &#x27;Error: Forbidden&#x27;
          content:
            application/json:
              schema:
                $ref: &#x27;#/components/schemas/ErrorResult&#x27;
              examples:
                errorExample:
                  $ref: &#x27;#/components/examples/error403&#x27;
      security:
        - ApiKeyAuth: []
  /tweets/{id}/retweets:
    post:
      tags:
      - retweets
      summary: Retweet a given tweet
      parameters:
      - name: id
        in: path
        description: Tweet id to retweet
        required: true
        schema:
          type: integer
          format: int64
      requestBody:
        content:
          application/json:
            schema:
              type: object
              required:
                - quote
              properties:
                quote:
                  type: string
                  maxLength: 280
                  example: &quot;Great tweet! I agree!&quot;
      responses:
        201:
          description: &quot;Retweet creat&quot;
          headers:
            Location:
              schema:
                type: string
                format: uri
                example: 
									&quot;https://aswfib.free.beeceptor.com/api/tweets/
									353535/retweets/4865651&quot;
          content:
            application/json:
              schema:
                $ref: &#x27;#/components/schemas/ReTweet&#x27;
        400:
          description: &#x27;Error: Bad Request&#x27;
          content:
            application/json:
              schema:
                $ref: &#x27;#/components/schemas/ErrorResult&#x27;
              examples:
                errorExample:
                  $ref: &#x27;#/components/examples/error400&#x27;
        401:
          description: &#x27;Error: Unauthorized&#x27;
          content:
            application/json:
              schema:
                $ref: &#x27;#/components/schemas/ErrorResult&#x27;
              examples:
                errorExample:
                  $ref: &#x27;#/components/examples/error401&#x27;
        404:
          description: &#x27;Error: Not Found&#x27;
          content:
            application/json:
              schema:
                $ref: &#x27;#/components/schemas/ErrorResult&#x27;
              examples:
                errorExample:
                  $ref: &#x27;#/components/examples/error404&#x27;
      security:
      - ApiKeyAuth: []
    get:
      tags:
      - retweets
      summary: List the retweets of a given tweet
      parameters:
      - in: path
        name: id
        schema:
          type: integer
          format: int64
        description: The id of the retweeted tweet
        required: true
      responses:
        200:
          description: successful operation
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: &#x27;#/components/schemas/ReTweet&#x27;
        404:
          description: &#x27;Error: Not Found&#x27;
          content:
            application/json:
              schema:
                $ref: &#x27;#/components/schemas/ErrorResult&#x27;
              examples:
                errorExample:
                  $ref: &#x27;#/components/examples/error404&#x27;
        401:
          description: &#x27;Error: Unauthorized&#x27;
          content:
            application/json:
              schema:
                $ref: &#x27;#/components/schemas/ErrorResult&#x27;
              examples:
                errorExample:
                  $ref: &#x27;#/components/examples/error401&#x27;
      security:
      - ApiKeyAuth: []
  /users/{userid}/followers:
    get:
      tags:
      - followers
      summary: List the followers of a given user
      parameters:
      - in: path
        name: userid
        schema:
          type: integer
          format: int64
        description: The id of the followed user
        required: true
      responses:
        200:
          description: successful operation
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: &#x27;#/components/schemas/Follower&#x27;
        404:
          description: &#x27;Error: Not Found&#x27;
          content:
            application/json:
              schema:
                $ref: &#x27;#/components/schemas/ErrorResult&#x27;
              examples:
                errorExample:
                  $ref: &#x27;#/components/examples/error404user&#x27;
        401:
          description: &#x27;Error: Unauthorized&#x27;
          content:
            application/json:
              schema:
                $ref: &#x27;#/components/schemas/ErrorResult&#x27;
              examples:
                errorExample:
                  $ref: &#x27;#/components/examples/error401&#x27;
      security:
      - ApiKeyAuth: []
    post:
      tags:
      - followers
      summary: Start following a user
      parameters:
      - in: path
        name: userid
        schema:
          type: integer
          format: int64
        description: The id of the followed user
        required: true
      requestBody:
        content:
          application/json:
            schema:
              type: object
              required:
                - follower_id
              properties:
                follower_id:
                  type: integer
                  format: int64
                  example: 3433535
      responses:
        201:
          description: &quot;Follower added&quot;
          headers:
            Location:
              schema:
                type: string
                format: uri
                example: 
									&quot;https://aswfib.free.beeceptor.com/api/
									users/353535/followers/3433535&quot;
          content:
            application/json:
              schema: {}
              examples:
                message:
                  $ref: &#x27;#/components/examples/followeradded&#x27;
        400:
          description: &#x27;Error: Bad Request&#x27;
          content:
            application/json:
              schema:
                $ref: &#x27;#/components/schemas/ErrorResult&#x27;
              examples:
                errorExample:
                  $ref: &#x27;#/components/examples/error400follower&#x27;
        401:
          description: &#x27;Error: Unauthorized&#x27;
          content:
            application/json:
              schema:
                $ref: &#x27;#/components/schemas/ErrorResult&#x27;
              examples:
                errorExample:
                  $ref: &#x27;#/components/examples/error401&#x27;
        403:
          description: &#x27;Error: Forbidden&#x27;
          content:
            application/json:
              schema:
                $ref: &#x27;#/components/schemas/ErrorResult&#x27;
              examples:
                errorExample:
                  $ref: &#x27;#/components/examples/error403&#x27;
        404:
          description: &#x27;Error: Not Found&#x27;
          content:
            application/json:
              schema:
                $ref: &#x27;#/components/schemas/ErrorResult&#x27;
              examples:
                errorExample:
                  $ref: &#x27;#/components/examples/error404user&#x27;
      security:
      - ApiKeyAuth: []
  /users/{userid}/followers/{follower_id}:
    delete:
      tags:
      - followers
      summary: Stop following a user
      parameters:
      - in: path
        name: userid
        schema:
          type: integer
          format: int64
        description: The id of the followed user
        required: true
      - in: path
        name: follower_id
        schema:
          type: integer
          format: int64
        description: The id of the following user
        required: true
      responses:
        204:
          description: &quot;Follower removed&quot;
          content:
            application/json: {}
        401:
          description: &#x27;Error: Unauthorized&#x27;
          content:
            application/json:
              schema:
                $ref: &#x27;#/components/schemas/ErrorResult&#x27;
              examples:
                errorExample:
                  $ref: &#x27;#/components/examples/error401&#x27;
        403:
          description: &#x27;Error: Forbidden&#x27;
          content:
            application/json:
              schema:
                $ref: &#x27;#/components/schemas/ErrorResult&#x27;
              examples:
                errorExample:
                  $ref: &#x27;#/components/examples/error403&#x27;
        404:
          description: &#x27;Error: Not Found&#x27;
          content:
            application/json:
              schema:
                $ref: &#x27;#/components/schemas/ErrorResult&#x27;
              examples:
                errorExample:
                  $ref: &#x27;#/components/examples/error404user&#x27;
      security:
      - ApiKeyAuth: []
  /users/{userid}:
    get:
      tags:
      - users
      summary: Show an user‚Äôs full public info
      parameters:
      - in: path
        name: userid
        schema:
          type: integer
          format: int64
        description: The id of the user
        required: true
      responses:
        200:
          description: successful operation
          content:
            application/json:
              schema:
                $ref: &#x27;#/components/schemas/FullInfo&#x27;
        404:
          description: &#x27;Error: Not Found&#x27;
          content:
            application/json:
              schema:
                $ref: &#x27;#/components/schemas/ErrorResult&#x27;
              examples:
                errorExample:
                  $ref: &#x27;#/components/examples/error404user&#x27;
        401:
          description: &#x27;Error: Unauthorized&#x27;
          content:
            application/json:
              schema:
                $ref: &#x27;#/components/schemas/ErrorResult&#x27;
              examples:
                errorExample:
                  $ref: &#x27;#/components/examples/error401&#x27;
      security:
      - ApiKeyAuth: []
  /users/{userid}/profile:
    put:
      tags:
      - users
      summary: Modify a user profile
      parameters:
      - in: path
        name: userid
        schema:
          type: integer
          format: int64
        description: The id of the user
        required: true
      requestBody:
        content:
          application/json:
            schema:
              $ref: &#x27;#/components/schemas/Profile&#x27;
      responses:
        200:
          description: &quot;Prolife updated&quot;
          content:
            application/json:
              schema:
                $ref: &#x27;#/components/schemas/User&#x27;
        400:
          description: &#x27;Error: Bad Request&#x27;
          content:
            application/json:
              schema:
                $ref: &#x27;#/components/schemas/ErrorResult&#x27;
              examples:
                errorExample:
                  $ref: &#x27;#/components/examples/error400profile&#x27;
        401:
          description: &#x27;Error: Unauthorized&#x27;
          content:
            application/json:
              schema:
                $ref: &#x27;#/components/schemas/ErrorResult&#x27;
              examples:
                errorExample:
                  $ref: &#x27;#/components/examples/error401&#x27;
        403:
          description: &#x27;Error: Forbidden&#x27;
          content:
            application/json:
              schema:
                $ref: &#x27;#/components/schemas/ErrorResult&#x27;
              examples:
                errorExample:
                  $ref: &#x27;#/components/examples/error403&#x27;
        404:
          description: &#x27;Error: Not Found&#x27;
          content:
            application/json:
              schema:
                $ref: &#x27;#/components/schemas/ErrorResult&#x27;
              examples:
                errorExample:
                  $ref: &#x27;#/components/examples/error404user&#x27;
      security:
      - ApiKeyAuth: []
components:
  schemas:
    Tweet:
      type: object
      properties:
        id:
            type: integer
            format: int64
            example: 4865651
        text:
          type: string
          example: &#x27;Clever tweet text&#x27;
        date:
          type: string
          format: date-time
        num_retweets:
          type: integer
          format: int32
        num_likes:
          type: integer
          format: int32
        userid:
          type: integer
          format: int64
          example: 5456
    ReTweet:
      allOf:
      - $ref: &#x27;#/components/schemas/Tweet&#x27;
      - type: object
        properties:
          quote:
            type: string
            maxLength: 280
            example: &quot;Great tweet! I agree!&quot;
          retweeted_id:
            type: integer
            format: int64
            example: 353535
    Follower:
      type: object
      properties:
        userid:
            type: integer
            format: int64
            example: 465666
        screenname:
          type: string
          example: fib_was
        full_name:
          type: string
          example: Web Applications &amp; Services
        picture:
          type: string
          format: uri
    Profile:
      type: object
      properties:
        full_name:
          type: string
          example: Web Applications &amp; Services
        location:
          type: string
          example: BCN
        about:
          type: string
          example: Just an ordinary guy
        picture:
          type: string
          format: uri
    User:
      type: object
      properties:
        userid:
          type: integer
          format: int64
          example: 465666
        screenname:
          type: string
          example: fib_was
        profile:
          $ref: &#x27;#/components/schemas/Profile&#x27;
    FullInfo:
      allOf:
      - $ref: &#x27;#/components/schemas/User&#x27;  
      - type: object
        properties:
          last_tweets:
            type: array
            items:
              $ref: &#x27;#/components/schemas/Tweet&#x27;
            maxItems: 10 
          num_tweets:
            type: integer
            example: 545
          num_followers:
            type: integer
            example: 78
          num_following:
            type: integer
            example: 121
    ErrorResult:
      type: object
      properties:
        status:
          type: integer
          enum: [400, 401, 403, 404, 409]
        error: 
          type: string
          enum: 
					[
						&quot;Bad Request&quot;, 
						&quot;Unauthorized&quot;, 
						&quot;Forbidden&quot;, 
						&quot;Not Found&quot;, 
						&quot;Conflict&quot; 
					]
        message: 
          type: string
  examples:
    error400:
      value:
        status: 400
        error: &quot;Bad Request&quot;
        message: &quot;Text too long&quot;
    error4002:
      value:
        status: 400
        error: &quot;Bad Request&quot;
        message: &quot;No user with such a userid&quot;
    error400follower:
      value:
        status: 400
        error: &quot;Bad Request&quot;
        message: &quot;No user with such a follower_id&quot;
    error400profile:
      value:
        status: 400
        error: &quot;Bad Request&quot;
        message: &quot;picture should be a valid uri&quot;
    error401:
      value:
        status: 401
        error: &quot;Unauthorized&quot;
        message: &quot;You provided no api key (X-API-KEY Header)&quot;
    error403:
      value:
        status: 403
        error: &quot;Forbidden&quot;
        message: &quot;Your api key (X-API-KEY Header) is not valid&quot;
    error404:
      value:
        status: 404
        error: &quot;Not Found&quot;
        message: &quot;No tweet with such an id&quot;
    error404user:
      value:
        status: 404
        error: &quot;Not Found&quot;
        message: &quot;No user with such an userid&quot;
    followeradded:
      value:
        message: &quot;Follower added successfully&quot;
  securitySchemes:
    ApiKeyAuth:
      type: apiKey
			#Custom headers in rails apps must have the X- prefix
      name: X-API-KEY 
      in: header</code></pre></li></ol><p id="009c7d87-b905-4844-9928-99ee79fd3a68" class="">
</p></li></ol><p id="5b509691-6f0e-4f16-ae55-1a6ecb28bbd0" class="">
</p><h3 id="f720da92-fe71-449f-8ffa-9de37686fdbe" class="">Enunciat (4)</h3><p id="eff38fac-ff46-4b0e-bcff-9eafd7c36b1d" class="">Volem definir un servei web de correu electroÃÄnic. A continuacioÃÅ disposeu d‚Äôun fragment del diagrama de classes on hi ha els conceptes representats.</p><figure id="3ae7442b-bca8-4290-92f1-6d5ee163e088" class="image"><a href="ASW%20Preparaci%20segon%20control%20bf24a41f685b4794b4583b5f46fce66c/Screenshot_2020-06-06_at_15.40.17.png"><img style="width:624px" src="ASW%20Preparaci%20segon%20control%20bf24a41f685b4794b4583b5f46fce66c/Screenshot_2020-06-06_at_15.40.17.png"/></a></figure><p id="d7e61ad5-4160-44ec-a47f-7f370c753faf" class="">
</p><p id="78dbd575-0a03-4df7-859e-9ddb80807662" class="">Es demana:</p><p id="df322341-c46a-4da0-ad71-9d7b3679c04e" class="">a) Dissenyar les operacions per obtenir un missatge concret, esborrar un missatge, llistar tots els missatges d‚Äôun usuari i crear un missatge per a un usuari (sense enviar-lo) mitjancÃßant un servei web REST. Per descriure cada operacioÃÅ caldraÃÄ omplir la plantilla que teniu a l‚Äôannex.</p><ul id="59d375a7-701f-4359-a00b-451b97b8b1c4" class="block-color-purple_background bulleted-list"><li>Soluci√≥<figure id="f9851dbc-9ed3-44e9-965a-725b6c2b6a90" class="image"><a href="ASW%20Preparaci%20segon%20control%20bf24a41f685b4794b4583b5f46fce66c/Screenshot_2020-06-06_at_15.49.50.png"><img style="width:1872px" src="ASW%20Preparaci%20segon%20control%20bf24a41f685b4794b4583b5f46fce66c/Screenshot_2020-06-06_at_15.49.50.png"/></a></figure><figure id="6af8e8ee-a3a4-4089-951e-24d0def27ae1" class="image"><a href="ASW%20Preparaci%20segon%20control%20bf24a41f685b4794b4583b5f46fce66c/Screenshot_2020-06-06_at_15.50.03.png"><img style="width:1872px" src="ASW%20Preparaci%20segon%20control%20bf24a41f685b4794b4583b5f46fce66c/Screenshot_2020-06-06_at_15.50.03.png"/></a></figure><figure id="9f7fb733-acc2-4df2-822c-7122cd40ae90" class="image"><a href="ASW%20Preparaci%20segon%20control%20bf24a41f685b4794b4583b5f46fce66c/Screenshot_2020-06-06_at_15.50.17.png"><img style="width:1872px" src="ASW%20Preparaci%20segon%20control%20bf24a41f685b4794b4583b5f46fce66c/Screenshot_2020-06-06_at_15.50.17.png"/></a></figure><figure id="2dd7655e-a292-4641-b8a9-7b3bae8dd5e0" class="image"><a href="ASW%20Preparaci%20segon%20control%20bf24a41f685b4794b4583b5f46fce66c/Screenshot_2020-06-06_at_15.50.32.png"><img style="width:1872px" src="ASW%20Preparaci%20segon%20control%20bf24a41f685b4794b4583b5f46fce66c/Screenshot_2020-06-06_at_15.50.32.png"/></a></figure><pre id="13492c95-ccd6-400a-aa78-31a961c88465" class="code"><code>openapi: 3.0.1
info:
  version: 1.0.0
  title: Exercise 5.4
  description: 
		&quot;Versi√≥ OpenAPI del la soluci√≥ publicada a 
		&lt;https://atenea.upc.edu/mod/resource/view.php?id=2158292&gt;. 
		Suposem que totes les crides necessiten autentificaci√≥ 
		via una api_key que indentifica un usuari determinat. 
		Nom√©s es poc accedir als missatges de l&#x27;usuari autentificat.&quot;
servers:
  - url: &#x27;https://aswfib.free.beeceptor.com/apirest/&#x27;
paths:
  /usuaris/{username}/missatges:
    get:
      tags:
      - missatges
      summary: Obtenir Missatges Usuari
      parameters:
      - name: username
        in: path
        required: true
        schema:
          type: string
      responses:
        200:
          description: successful operation
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: &#x27;#/components/schemas/Missatge&#x27;
        404:
          description: &#x27;Error: Not Found&#x27;
          content:
            application/json:
              schema:
                $ref: &#x27;#/components/schemas/ErrorResult&#x27;
              examples:
                errorExample:
                  $ref: &#x27;#/components/examples/error404&#x27;
        401:
          description: &#x27;Error: Unauthorized&#x27;
          content:
            application/json:
              schema:
                $ref: &#x27;#/components/schemas/ErrorResult&#x27;
              examples:
                errorExample:
                  $ref: &#x27;#/components/examples/error401&#x27;
        403:
          description: &#x27;Error: Forbidden&#x27;
          content:
            application/json:
              schema:
                $ref: &#x27;#/components/schemas/ErrorResult&#x27;
              examples:
                errorExample:
                  $ref: &#x27;#/components/examples/error403&#x27;
      security:
      - ApiKeyAuth: []
    post:
      tags:
      - missatges
      summary: Crear Missatge Usuari
      parameters:
      - name: username
        in: path
        required: true
        schema:
          type: string
      requestBody:
        content:
          application/json:
            schema:
              $ref: &#x27;#/components/schemas/MissatgePost&#x27;
      responses:
        201:
          description: &quot;Missatge creat&quot;
          headers:
            Location:
              schema:
                type: string
                format: uri
                example: 
									&quot;https://aswfib.free.beeceptor.com/apirest/
									usuaris/pepito/missatges/2&quot;
          content:
            application/json:
              schema:
                $ref: &#x27;#/components/schemas/Missatge&#x27;
        400:
          description: &#x27;Error: Bad Request&#x27;
          content:
            application/json:
              schema:
                $ref: &#x27;#/components/schemas/ErrorResult&#x27;
              examples:
                errorExample:
                  $ref: &#x27;#/components/examples/error400&#x27;
        404:
          description: &#x27;Error: Not Found&#x27;
          content:
            application/json:
              schema:
                $ref: &#x27;#/components/schemas/ErrorResult&#x27;
              examples:
                errorExample:
                  $ref: &#x27;#/components/examples/error404&#x27;
        401:
          description: &#x27;Error: Unauthorized&#x27;
          content:
            application/json:
              schema:
                $ref: &#x27;#/components/schemas/ErrorResult&#x27;
              examples:
                errorExample:
                  $ref: &#x27;#/components/examples/error401&#x27;
        403:
          description: &#x27;Error: Forbidden&#x27;
          content:
            application/json:
              schema:
                $ref: &#x27;#/components/schemas/ErrorResult&#x27;
              examples:
                errorExample:
                  $ref: &#x27;#/components/examples/error403&#x27;
      security:
      - ApiKeyAuth: []
  /usuaris/{username}/missatges/{id}:
    get:
      tags:
      - missatges
      summary: &quot;Obtenir Missatge d‚Äôun Usuari per Identificador&quot;
      description: Returns a single Tweet
      operationId: getTweetById
      parameters:
      - name: username
        in: path
        required: true
        schema:
          type: string
      - name: id
        in: path
        description: ID del Missatge
        required: true
        schema:
          type: integer
          format: int64
      responses:
        200:
          description: successful operation
          content:
            application/json:
              schema:
                $ref: &#x27;#/components/schemas/Missatge&#x27;
        404:
          description: &#x27;Error: Not Found&#x27;
          content:
            application/json:
              schema:
                $ref: &#x27;#/components/schemas/ErrorResult&#x27;
              examples:
                errorExample:
                  $ref: &#x27;#/components/examples/error404&#x27;
        401:
          description: &#x27;Error: Unauthorized&#x27;
          content:
            application/json:
              schema:
                $ref: &#x27;#/components/schemas/ErrorResult&#x27;
              examples:
                errorExample:
                  $ref: &#x27;#/components/examples/error401&#x27;
        403:
          description: &#x27;Error: Forbidden&#x27;
          content:
            application/json:
              schema:
                $ref: &#x27;#/components/schemas/ErrorResult&#x27;
              examples:
                errorExample:
                  $ref: &#x27;#/components/examples/error403&#x27;
      security:
      - ApiKeyAuth: []
    delete:
      tags:
      - missatges
      summary: Esborrar Missatge
      parameters:
      - name: username
        in: path
        description: &quot;ID de l&#x27;usuari&quot;
        required: true
        schema:
          type: string
      - name: id
        in: path
        description: Tweet id to delete
        required: true
        schema:
          type: integer
          format: int64
      responses:
        204:
          description: Tweet deleted
          content:
            application/json: {}
        404:
          description: &#x27;Error: Not Found&#x27;
          content:
            application/json:
              schema:
                $ref: &#x27;#/components/schemas/ErrorResult&#x27;
              examples:
                errorExample:
                  $ref: &#x27;#/components/examples/error404&#x27;
        401:
          description: &#x27;Error: Unauthorized&#x27;
          content:
            application/json:
              schema:
                $ref: &#x27;#/components/schemas/ErrorResult&#x27;
              examples:
                errorExample:
                  $ref: &#x27;#/components/examples/error401&#x27;
        403:
          description: &#x27;Error: Forbidden&#x27;
          content:
            application/json:
              schema:
                $ref: &#x27;#/components/schemas/ErrorResult&#x27;
              examples:
                errorExample:
                  $ref: &#x27;#/components/examples/error403&#x27;
      security:
      - ApiKeyAuth: []
components:
  schemas:
    MissatgePost:
      type: object
      properties:
        &#x27;t√≠tol&#x27;:
          type: string
          example: &#x27;Title&#x27;
        cos:
          type: string
          example: &#x27;Message Body&#x27;
        from:
           type: string
           format: email
           example: &#x27;me@example.com&#x27;
    Missatge:
      allOf:
      - type: object
        properties:
          id:
            type: integer
            format: int64
            example: 2
      - $ref: &#x27;#/components/schemas/MissatgePost&#x27;
    ErrorResult:
      type: object
      properties:
        status:
          type: integer
          enum: [400, 401, 403, 404, 409]
        error: 
          type: string
          enum: 
					[
						&quot;Bad Request&quot;, 
						&quot;Unauthorized&quot;, 
						&quot;Forbidden&quot;, 
						&quot;Not Found&quot;, 
						&quot;Conflict&quot;
					]
        message: 
          type: string
  examples:
    error400:
      value:
        status: 400
        error: &quot;Bad Request&quot;
        message: &quot;El camp `from` √©s obligatori&quot;
    error401:
      value:
        status: 401
        error: &quot;Unauthorized&quot;
        message: &quot;You provided no api key (X-API-KEY Header)&quot;
    error403:
      value:
        status: 403
        error: &quot;Forbidden&quot;
        message: &quot;Your api key (X-API-KEY Header) is not valid&quot;
    error404:
      value:
        status: 404
        error: &quot;Not Found&quot;
        message: &quot;No hi ha cap usuari amb a aquest ID&quot;
  securitySchemes:
    ApiKeyAuth:
      type: apiKey
			#Custom headers in rails apps must have the X- prefix
      name: X-API-KEY 
      in: header</code></pre></li></ul><p id="2df713b6-9843-4ce4-b784-470589864eb6" class="">b) Definir l‚Äôescenari d‚Äôun client que permeti a un usuari crear un missatge i, a continuacioÃÅ, mostrar tots els seus missatges (incloÃÄs el que s‚Äôacaba de crear).</p><ul id="f0560a2e-cd63-4166-b923-ad447f2a2854" class="block-color-purple_background bulleted-list"><li>Soluci√≥<p id="0b703c81-f97c-4057-96f4-b1cc42e10cd9" class="">First, we add a message with all the data in the body request.</p><pre id="c730de07-5c68-48a1-8dc4-b33928127980" class="code"><code>POST http://www.exercici4.com/apirest/usuaris/:username/missatges</code></pre><p id="501b540d-aff8-4013-9eab-ae88a87ddd81" class="">Second, we parse the response to obtain all the messages.</p><pre id="1f090220-e2f2-4ad9-b62f-acfc97fc03fb" class="code"><code>GET http://www.exercici4.com/apirest/usuaris/:username/missatges</code></pre></li></ul><p id="7fd41bc3-2aa9-4195-b30e-4a6121af61ba" class="">c) Suposeu que hem constatat que usualment els usuaris que esborren un missatge tambeÃÅ esborren missatges amb un tiÃÅtol similar. Es demana que definiu un client amb aquest escenari. Podeu suposar l‚ÄôexisteÃÄncia d‚Äôuna operacioÃÅ que donats dos tiÃÅtols ens diu si soÃÅn similars. Nota: Si voleu explorar el servei REST proporcionat per Gmail podeu consultar ‚Äãhttps://developers.google.com/gmail/api/v1/reference/</p><ul id="6be4ebd0-f8f1-48dc-8637-b58ad5fd05b4" class="block-color-purple_background bulleted-list"><li>Soluci√≥<p id="58ac6f9e-3376-4277-bc7e-cb0462eaeac8" class="">We delete the message with the id.</p><pre id="5e36235f-9653-456c-8e7c-92d2c8e06723" class="code"><code>DELETE http://www.exercici4.com/apirest/usuaris/:username/missatges/:id</code></pre><p id="4eac3573-2f91-46af-9387-9d148ab3b1c7" class="">We obtain all the messages.</p><pre id="5875e845-718f-418e-84bc-f206e3a253eb" class="code"><code>GET http://www.exercici4.com/apirest/usuaris/:username/missatges</code></pre><p id="39c10760-ad5a-443d-9763-0d74cd3ff4ba" class="">We compare the title of the messages retrieved with the title of the message deleted and select those that have similar titles.</p><p id="b4db453b-1499-4469-91b4-702fcbf2c545" class="">We delete each message selected.</p><pre id="ee3e0175-0375-4749-b5fa-6b9c2ba3c6b9" class="code"><code>DELETE http://www.exercici4.com/apirest/usuaris/:username/missatges/:id</code></pre></li></ul><h3 id="3e8b071e-0145-4c6e-b103-8b50dcdac6cf" class="">Enunciat (5)</h3><p id="03af24c1-36c5-425f-b89b-cba10786dc31" class="">‚ÄãDefinir l‚Äôescenari d‚Äôun client que utilitzi el servei web RESTful ‚ÄãDelicious (http://www.peej.co.uk/articles/restfully-delicious.html‚Äã) que permeti esborrar els bookmarks que tinguin alhora el tag ‚Äútest‚Äù i ‚Äúexample‚Äù de l‚Äôusuari ‚ÄãJoshua.‚Äã Expliqueu cada acceÃÅs al servei que feu.</p><ul id="84fdb81b-94bd-4376-9318-93775d03ce3f" class="block-color-purple_background bulleted-list"><li>Soluci√≥<p id="3dc13e8c-38ec-450c-9e9a-d46777f86db2" class="">First, we start like every client, by fetching the APIs homepage. We parse the response XML and find the tags URL of the user with the name &quot;Joshua&quot;. This gives us <a href="http://del.icio.us/api/joshua/tags/">http://del.icio.us/api/joshua/tags/</a>.</p><pre id="9b650cc0-6281-415b-9cba-b1e210968c19" class="code"><code>GET http://del.icio.us/api/</code></pre><p id="fa1ce6e6-c5f7-4ac1-bc8b-a713931c3c76" class="">So we get the resource that represents Joshua tags. We parse the XML and see if the tag &quot;test&quot; and the tag ‚Äúexample&quot; are mentioned. If it isn&#x27;t, then we GET the URL in the &quot;next&quot; attribute and try again. If there is not one of the tags or both we inform of that fact to the client. If both tags are mentioned then we&#x27;ll get the URLs <a href="http://del.icio.us/api/joshua/tags/test">http://del.icio.us/api/joshua/tags/test</a> and <a href="http://del.icio.us/api/joshua/tags/example">http://del.icio.us/api/joshua/tags/example</a> .</p><pre id="d7635b65-f86d-448e-89d6-172c4488238d" class="code"><code>GET http://del.icio.us/api/joshua/tags/</code></pre><p id="977b934c-ecdb-4fab-8e10-fc58a994267d" class="">Now we&#x27;ve got the details for the tag &quot;test&quot;, so we parse the XML and get a list of bookmarks. If there is a &quot;next&quot; attribute, we&#x27;ll follow that to get the next page of bookmarks. Eventually we&#x27;ll have a list of all bookmarks tagged with &quot;test&quot;. If there is no bookmarks, we inform to the client.</p><pre id="b5ff39c1-0f87-4037-937c-98fd4eb0b03d" class="code"><code>GET http://del.icio.us/api/joshua/tags/test</code></pre><p id="5319ddfe-b42f-42bf-ba36-650552949839" class="">Now we&#x27;ve got the details for the tag ‚Äúexample&quot;, so we parse the XML and get a list of bookmarks. If there is a &quot;next&quot; attribute, we&#x27;ll follow that to get the next page of bookmarks. Eventually we&#x27;ll have a list of all bookmarks tagged with ‚Äúexample&quot;. If there is no bookmarks, we inform to the client.</p><pre id="2ea5656a-861c-4fd9-9831-194db6f92927" class="code"><code>GET http://del.icio.us/api/joshua/tags/example</code></pre><p id="8d91b528-0da1-41a6-aeeb-325a968306e2" class="">The client intersects the lists of bookmarks and select the bookmarks that have both tags.</p><p id="e332aef4-d220-4219-89e0-dda91c8ea752" class="">Finally we can walk through our list of bookmarks and call the DELETE HTTP method on each of their URLs.</p><pre id="df3a6c70-7ea0-4988-93f9-6d4c7dc5156a" class="code"><code>DELETE http://del.icio.us/api/joshua/bookmarks/:hash</code></pre></li></ul><p id="6cdac8a4-b104-4a0a-957e-80835db367d6" class="">
</p><p id="d745674b-1b28-409a-97aa-068375fdee24" class="">
</p><h2 id="8774d68a-dfb5-4d13-b6be-649b93a61acb" class="">Annex 1: Plantilla per definir les operacions dels serveis web SOAP</h2><figure id="734b35e8-b986-420f-9667-b48b04f1f018" class="image"><a href="ASW%20Preparaci%20segon%20control%20bf24a41f685b4794b4583b5f46fce66c/Screenshot_2020-06-06_at_15.42.04.png"><img style="width:624px" src="ASW%20Preparaci%20segon%20control%20bf24a41f685b4794b4583b5f46fce66c/Screenshot_2020-06-06_at_15.42.04.png"/></a></figure><h2 id="fc5b5ba6-9681-46f8-90c8-fa17552b7d6a" class="">Annex 2: Plantilla per definir les operacions dels serveis web REST</h2><figure id="a50be2be-d114-475e-a01f-5793e9640e4d" class="image"><a href="ASW%20Preparaci%20segon%20control%20bf24a41f685b4794b4583b5f46fce66c/Screenshot_2020-06-06_at_15.42.33.png"><img style="width:1724px" src="ASW%20Preparaci%20segon%20control%20bf24a41f685b4794b4583b5f46fce66c/Screenshot_2020-06-06_at_15.42.33.png"/></a></figure><p id="d4c1d75f-cfe2-46fb-af60-bb6854e1b9dd" class="">
</p></div></article></body></html>